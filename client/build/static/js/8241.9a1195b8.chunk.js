"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[8241],{49086:(e,s,a)=>{a.d(s,{A:()=>x});var t=a(65043),c=a(73216),i=a(77291),l=a(65835),n=a(35475),r=a(99964),o=a(6574),d=a(73732),h=a(33784),m=a(93946),_=(a(85416),a(70579));const j=e=>{let{contact:s}=e;const{setPerson:a}=(0,t.useContext)(d.L),{setUserAsUnread:c,usersOnline:i,setCountMessage:m}=(0,o.d)(),j=(i.find((e=>e.userId==s.chatId)),(()=>{const e=Object.keys(s.messages);let a;a=0!==e.length?e[e.length-1]:"2000-01-01";let t=[];if("{}"!==JSON.stringify(s.messages)&&(t=[...s.messages[a]]),t.length){return t.pop()}return""})());return(0,_.jsxs)(n.N_,{className:"sidebar-contact",onClick:()=>(async()=>{a({name:s.name,id:s.chatId,avatar:s.avatar}),c(s.chatId),m(0)})(),children:[(0,_.jsx)("div",{className:"sidebar-contact__avatar-wrapper",children:s.avatar?(0,_.jsx)("img",{src:`https://proj.uley.team:5000/${s.avatar}`,onError:e=>{e.target.src=h},alt:"",className:"avatar-adm"}):(0,_.jsx)("img",{src:h,alt:"",className:"avatar-adm"})}),(0,_.jsxs)("div",{className:"sidebar-contact__content",children:[(0,_.jsxs)("div",{className:"sidebar-contact__top-content",children:[(0,_.jsxs)("h2",{className:"sidebar-contact__name",children:[" ",s.name]}),(0,_.jsx)("span",{className:"sidebar-contact__time",children:""===j?"":(0,r.A)(j.time)})]}),(0,_.jsxs)("div",{className:"sidebar-contact__bottom-content",children:[(0,_.jsxs)("p",{className:"sidebar-contact__message-wrapper",children:[j.status&&(0,_.jsx)(l.A,{id:"sent"===(null===j||void 0===j?void 0:j.status)?"singleTick":"doubleTick","aria-label":null===j||void 0===j?void 0:j.status,className:"sidebar-contact__message-icon "+("read"===(null===j||void 0===j?void 0:j.status)?"sidebar-contact__message-icon--blue":"")}),(0,_.jsx)("span",{className:"sidebar-contact__message "+(s.unread?"sidebar-contact__message--unread":""),children:s.typing?(0,_.jsx)("i",{children:" \u043f\u0435\u0447\u0430\u0442\u0430\u0435\u0442..."}):null===j||void 0===j?void 0:j.content})]}),(0,_.jsxs)("div",{className:"sidebar-contact__icons",children:[s.pinned&&(0,_.jsx)(l.A,{id:"pinned",className:"sidebar-contact__icon"}),!!s.unread&&(0,_.jsx)("span",{className:"sidebar-contact__unread",children:s.unread}),(0,_.jsx)("button",{"aria-label":"sidebar-contact__btn",children:(0,_.jsx)(l.A,{id:"downArrow",className:"sidebar-contact__icon sidebar-contact__icon--dropdown"})})]})]})]})]})};var p=a(80853);a(42507);const x=()=>{const{users:e,setUsers:s}=(0,o.d)(),[a,n]=(0,t.useState)([]),[r,d]=(0,t.useState)(""),[h,x]=(0,t.useState)(!0),[u,g]=(0,t.useState)([]),v=(0,c.Zp)();(0,t.useEffect)((()=>{const s=[...e].sort(((e,s)=>{var a=new Date(e.date);return new Date(s.date)-a}));n(s),e.length>0&&x(!1)}),[e]),(0,t.useEffect)((()=>{const s=e.filter((e=>{var s;return null===(s=e.name+e.chatId)||void 0===s?void 0:s.replace(/[\u0435\u0451]/g,"(\u0435|\u0451)").toLowerCase().includes(r.replace(/[\u0435\u0451]/g,"(\u0435|\u0451)").toLowerCase())}));n(s)}),[r]);return(0,_.jsxs)("aside",{className:"sidebarB",children:[(0,_.jsxs)("header",{className:"headerB",children:[(0,_.jsx)("div",{className:"sidebar__avatar-wrapper",children:(0,_.jsx)("img",{src:i,alt:"U.L.E.Y",className:"avatar-adm"})}),(0,_.jsx)("div",{children:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u044b"}),(0,_.jsx)("div",{className:"sidebar__actions",children:(0,_.jsx)(p.A,{className:"sidebar__action",ariaLabel:"Menu",iconId:"menu",iconClassName:"sidebar__action-icon",onSelected:e=>{switch(e){case 0:console.log("\u041f\u0440\u043e\u0444\u0438\u043b\u044c");break;case 1:console.log("1");break;case 4:v("/dashboard");break;default:console.log("\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435")}},options:["\u041f\u0440\u043e\u0444\u0438\u043b\u044c"]})})]}),(0,_.jsxs)("div",{className:"search-wrapper",children:[(0,_.jsxs)("div",{className:"search-icons",children:[(0,_.jsx)(l.A,{id:"search",className:"search-icon"}),(0,_.jsx)("button",{className:"search__back-btn",children:(0,_.jsx)(l.A,{id:"back"})})]}),(0,_.jsx)("input",{className:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430",onChange:e=>d(e.target.value)})]}),(0,_.jsx)("div",{className:"sidebar__contacts",children:h?(0,_.jsx)(m.JT,{style:{margin:"50%"}}):a.map((e=>"1775583141"!==e.chatId&&(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(j,{contact:e})})))})]})}},25339:(e,s,a)=>{a.d(s,{A:()=>$});var t=a(65043),c=a(65835),i=a(70579);const l=[{icon:"recent",label:"Recent emojis",active:!0},{icon:"emojiPeople",label:"People emojis",active:!1},{icon:"emojiNature",label:"Nature emojis",active:!1},{icon:"emojiFood",label:"Food emojis",active:!1},{icon:"emojiActivity",label:"Activity emojis",active:!1},{icon:"emojiTravel",label:"Travel emojis",active:!1},{icon:"emojiObjects",label:"Object emojis",active:!1},{icon:"emojiSymbols",label:"Symbol emojis",active:!1},{icon:"emojiFlags",label:"Flag emojis",active:!1}],n=e=>{let{showEmojis:s,newMessage:a,setNewMessage:t}=e;return(0,i.jsxs)("div",{className:"emojis__wrapper "+(s?"emojis__wrapper--active":""),children:[(0,i.jsx)("div",{className:"emojis__tabs",children:l.map((e=>(0,i.jsx)("div",{className:"emojis__tab "+(e.active?"emojis__tab--active":""),children:(0,i.jsx)("button",{"aria-label":e.label,children:(0,i.jsx)(c.A,{id:e.icon,className:"emojis__tab-icon"})},e.icon)},e.label)))}),(0,i.jsxs)("div",{className:"emojis__content",children:[(0,i.jsx)("input",{className:"emojis__search",placeholder:"Search Emoji"}),(0,i.jsxs)("h4",{className:"emojis__label",children:[" Smileys ","&"," People "]}),(0,i.jsx)("div",{className:"emojis__grid",children:new Array(6).fill(null).map(((e,s)=>new Array(11).fill(null).map(((e,a)=>(0,i.jsx)("div",{role:"img","aria-label":"emoji",className:"emoji emojis__emoji",style:{backgroundPositionX:-3-44.2*a,backgroundPositionY:-6-52*s}},`${s}-${a}`)))))}),(0,i.jsxs)("h4",{className:"emojis__label",children:[" Animals ","&"," Nature "]}),(0,i.jsx)("div",{className:"emojis__grid",children:new Array(6).fill(null).map(((e,s)=>new Array(11).fill(null).map(((e,a)=>(0,i.jsx)("div",{role:"img","aria-label":"emoji",className:"emoji emojis__emoji",style:{backgroundPositionX:-3-44.2*a,backgroundPositionY:-6-52*s}},`${s}-${a}`)))))})]})]})},r=(e,s)=>{(0,t.useEffect)((()=>{if(e){e.style.height="0px";const s=e.scrollHeight-40;e.style.height=s+"px"}}),[e,s])},o=[{icon:"attachDocument",label:"Choose document",click:"doc"},{icon:"attachImage",label:"Choose image",click:"image"}],d=e=>{let{showAttach:s,setShowAttach:a,showEmojis:l,setShowEmojis:n,mess:d,setMess:h,submitNewMessage:m,onFileChange:_}=e;const j=(0,t.useRef)(null);r(j.current,d);return(0,i.jsxs)("div",{className:"chat__input-wrapper",children:[l&&(0,i.jsx)("button",{"aria-label":"Close emojis",onClick:()=>n(!1),children:(0,i.jsx)(c.A,{id:"cancel",className:"chat__input-icon"})}),(0,i.jsx)("button",{"aria-label":"Emojis",onClick:()=>n(!0),children:(0,i.jsx)(c.A,{id:"smiley",className:"chat__input-icon "+(l?"chat__input-icon--highlight":"")})}),l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{"aria-label":"Choose GIF",children:(0,i.jsx)(c.A,{id:"gif",className:"chat__input-icon"})}),(0,i.jsx)("button",{"aria-label":"Choose sticker",children:(0,i.jsx)(c.A,{id:"sticker",className:"chat__input-icon"})})]}),(0,i.jsxs)("div",{className:"pos-rel",children:[(0,i.jsx)("button",{"aria-label":"Attach",onClick:()=>a(!s),children:(0,i.jsx)(c.A,{id:"attach",className:"chat__input-icon "+(s?"chat__input-icon--pressed":"")})}),(0,i.jsx)("div",{className:"chat__attach "+(s?"chat__attach--active":""),children:o.map((e=>(0,i.jsxs)("button",{className:"chat__attach-btn","aria-label":e.label,onClick:()=>console.log(e.click),children:[(0,i.jsx)("label",{htmlFor:"fileInput",children:(0,i.jsx)(c.A,{id:e.icon,className:"chat__attach-icon"})}),(0,i.jsx)("input",{type:"file",id:"fileInput",name:"photo",style:{display:"none"},onChange:e=>_(e)})]},e.label)))})]}),(0,i.jsx)("textarea",{className:"chat__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",value:d,onChange:e=>{console.log(e.target.value),h(e.target.value)},ref:j,rows:1}),(0,i.jsx)("button",{"aria-label":"Send message",onClick:m,children:(0,i.jsx)(c.A,{id:"send",className:"chat__input-icon"})})]})};var h=a(80853),m=a(33784),_=a(93946);const j=e=>{let{user:s,openProfileSidebar:a,openSearchSidebar:t,clearFile:l,setClearFile:n,clickClearFile:r}=e;return(0,i.jsxs)("header",{className:"headerB chat__header",children:[(0,i.jsx)("div",{className:"chat__avatar-wrapper",onClick:a,children:s.avatar?(0,i.jsx)("img",{src:`https://proj.uley.team:5000/${s.avatar}`,alt:null===s||void 0===s?void 0:s.name,className:"avatar-adm"}):(0,i.jsx)("img",{src:m,alt:null===s||void 0===s?void 0:s.name,className:"avatar-adm"})}),(0,i.jsxs)("div",{className:"chat__contact-wrapper",onClick:a,children:[(0,i.jsxs)("h2",{className:"chat__contact-name",children:[" ",null===s||void 0===s?void 0:s.name]}),(0,i.jsx)("p",{className:"chat__contact-desc",children:s.typing?"\u043f\u0435\u0447\u0430\u0442\u0430\u0435\u0442...":"\u0434\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430"})]}),(0,i.jsxs)("div",{className:"chat__actions",children:[l?(0,i.jsx)(_.Q_,{color:"danger",onClick:r,children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"}):"",(0,i.jsx)("button",{className:"chat__action","aria-label":"Search",onClick:t,children:(0,i.jsx)(c.A,{id:"search",className:"chat__action-icon chat__action-icon--search"})}),(0,i.jsx)(h.A,{className:"chat__action",ariaLabel:"Menu",iconId:"menu",iconClassName:"chat__action-icon",onSelected:e=>{switch(e){case 0:a();break;case 1:console.log("1");break;default:console.log("\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435")}},options:["\u0414\u0430\u043d\u043d\u044b\u0435 \u043e \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435","\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u043a\u0443","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0447\u0430\u0442"]})]})]})},p=e=>{let{active:s,closeSidebar:a,heading:t,children:l}=e;return(0,i.jsxs)("aside",{className:"chat-sidebar "+(s?"chat-sidebar--active":""),children:[(0,i.jsxs)("header",{className:"header chat-sidebar__header",children:[(0,i.jsx)("button",{onClick:a,children:(0,i.jsx)(c.A,{id:"cancel",className:"chat-sidebar__header-icon"})}),(0,i.jsxs)("h2",{className:"chat-sidebar__heading",children:[" ",t]})]}),(0,i.jsx)("div",{className:"chat-sidebar__content",children:l})]})},x=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"search-wrapper",children:[(0,i.jsxs)("div",{className:"search-icons",children:[(0,i.jsx)(c.A,{id:"search",className:"search-icon"}),(0,i.jsx)("button",{className:"search__back-btn",children:(0,i.jsx)(c.A,{id:"back"})})]}),(0,i.jsx)("input",{className:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a..."})]}),(0,i.jsx)("div",{className:"chat-sidebar__search-results",children:(0,i.jsx)("p",{children:" \u041f\u043e\u0438\u0441\u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0432 \u0447\u0430\u0442\u0435"})})]});var u=a(74267);const g=e=>{let{inputProps:s}=e;return(0,i.jsxs)("div",{className:"checkbox",children:[(0,i.jsx)("input",{type:"checkbox",id:"checkbox",...s,className:"checkbox__input"}),(0,i.jsx)("label",{htmlFor:"checkbox",className:"checkbox__label",children:(0,i.jsx)(c.A,{id:"check",className:"checkbox__icon"})})]})};var v=a(42507),N=a(6574),b=a(73732);const f=e=>{let{user:s}=e;const[a,l]=(0,t.useState)(""),[n,r]=(0,t.useState)(!1),{addNewName:o,addNewAvatar:d}=(0,N.d)(),{setPerson:h}=(0,t.useContext)(b.L),[_,j]=(0,t.useState)(null),[p,x]=(0,t.useState)(!1),f=t.useRef(),w="https://proj.uley.team:5000/";(0,t.useEffect)((()=>{j(`${w}${s.avatar}`)}),[s]);const y=async()=>{h({name:s.name,id:s.chatId,avatar:s.avatar})},A=t.useCallback((async()=>{try{const e=new FormData;e.append("photo",_);let a=await(0,v.QM)(e);const t={avatar:a.data.path.split(".team")[1]};await(0,v.CL)(t,s.chatId),d(s.chatId,a.data.path.split(".team")[1]),y(),x(!1)}catch(e){}}),[_]);return(0,i.jsxs)("div",{className:"profile",children:[(0,i.jsxs)("div",{className:"profile__section profile__section--personal",children:[(0,i.jsxs)("div",{className:"profile__avatar-wrapper upload",children:[s.avatar?(0,i.jsx)("img",{src:`${w}${s.avatar}`,alt:null===s||void 0===s?void 0:s.name,className:"avatar-adm"}):(0,i.jsx)("img",{src:m,alt:null===s||void 0===s?void 0:s.name,className:"avatar-adm"}),(0,i.jsxs)("div",{className:"round_adm",children:[(0,i.jsx)("input",{type:"file",name:"photo",onChange:async e=>{e.preventDefault(),j(e.target.files[0]),x(!0)}}),(0,i.jsx)("i",{className:"fa fa-camera",style:{color:"#fff"}})]})]}),p?(0,i.jsx)("button",{className:"btn_save",onClick:A,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}):"",(0,i.jsx)("p",{style:{color:"#d5d5d5"},children:s.chatId}),n?(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t={username:a};await(0,v.Hg)(t,s.chatId),o(s.chatId,a),y(),r(!1)},children:[(0,i.jsx)("input",{type:"text",value:a,onChange:e=>{e.preventDefault(),l(e.target.value)},ref:f,onFocus:()=>f.current.select(),style:{borderBottom:"1px solid #0e892e",color:"#d5d5d5"}}),(0,i.jsx)("input",{type:"submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",style:{color:"#6a6a6a"}})]}):(0,i.jsxs)("h2",{className:"profile__name",children:[" ",s.name," "]}),n?"":(0,i.jsx)("span",{onClick:()=>{l(s.name),r(!0)},style:{cursor:"pointer",color:"#6a6a6a"},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]}),(0,i.jsxs)("div",{className:"profile__section profile__section--media",children:[(0,i.jsxs)("div",{className:"sb profile__heading-wrapper",children:[(0,i.jsx)("h2",{className:"profile__heading",children:" \u041c\u0435\u0434\u0438\u0430, \u0441\u0441\u044b\u043b\u043a\u0438 \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b "}),(0,i.jsx)("button",{children:(0,i.jsx)(c.A,{id:"rightArrow",className:"profile__heading-icon"})})]}),(0,i.jsxs)("div",{className:"profile__media-wrapper",children:[(0,i.jsx)("img",{src:u,alt:"media",className:"profile__media"}),(0,i.jsx)("img",{src:u,alt:"media",className:"profile__media"}),(0,i.jsx)("img",{src:u,alt:"media",className:"profile__media"})]})]}),(0,i.jsxs)("ul",{className:"profile__section profile__section--actions",children:[(0,i.jsxs)("li",{className:"profile__action",children:[(0,i.jsx)("p",{className:"profile__action-left",children:(0,i.jsx)("span",{className:"profile__action-text profile__action-text--top",children:"\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"})}),(0,i.jsx)("div",{className:"profile__action-right",children:(0,i.jsx)(g,{})})]}),(0,i.jsxs)("li",{className:"profile__action",children:[(0,i.jsx)("p",{className:"profile__action-left",children:(0,i.jsx)("span",{className:"profile__action-text profile__action-text--top",children:"\u041e\u0442\u043c\u0435\u0447\u0435\u043d\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"})}),(0,i.jsx)("button",{className:"profile__action-right",children:(0,i.jsx)(c.A,{id:"rightArrow",className:"profile__heading-icon"})})]}),(0,i.jsxs)("li",{className:"profile__action",children:[(0,i.jsxs)("p",{className:"profile__action-left",children:[(0,i.jsx)("span",{className:"profile__action-text profile__action-text--top",children:"\u0418\u0441\u0447\u0435\u0437\u0430\u044e\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}),(0,i.jsx)("span",{className:"profile__action-text profile__action-text--bottom",children:"Off"})]}),(0,i.jsxs)("button",{className:"profile__action-right",children:[(0,i.jsx)(c.A,{id:"rightArrow",className:"profile__heading-icon"})," "]})]})]}),(0,i.jsxs)("div",{className:"profile__section profile__section--about",children:[(0,i.jsx)("div",{className:"sb profile__heading-wrapper",children:(0,i.jsx)("h2",{className:"profile__heading",children:" \u041e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u0438 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 "})}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{className:"profile__about-item",children:"\u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0432 \u043e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438..."}),(0,i.jsx)("li",{className:"profile__about-item",children:"+7 123-12-12"})]})]}),(0,i.jsxs)("div",{className:"profile__section profile__section--danger",children:[(0,i.jsx)(c.A,{id:"block",className:"profile__danger-icon"}),(0,i.jsx)("p",{className:"profile__danger-text",children:" \u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c "})]}),(0,i.jsxs)("div",{className:"profile__section profile__section--danger",children:[(0,i.jsx)(c.A,{id:"thumbsDown",className:"profile__danger-icon"}),(0,i.jsx)("p",{className:"profile__danger-text",children:" \u0421\u043e\u043e\u0431\u0449\u0438\u0442\u044c \u043e \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435 "})]}),(0,i.jsxs)("div",{className:"profile__section profile__section--danger",children:[(0,i.jsx)(c.A,{id:"delete",className:"profile__danger-icon"}),(0,i.jsx)("p",{className:"profile__danger-text",children:" \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0447\u0430\u0442 "})]})]})};var w=a(55164),y=a(58533),A=a(99964),k=a(15830),S=a(12996);const C=e=>{let{lastMsgRef:s,messages:a}=e;const{person:l}=(0,t.useContext)(b.L),n=Object.keys(a),r="1775583141",o=(0,t.useRef)([]);let d;const{delMessageContext:h}=(0,N.d)(),m=t.forwardRef(((e,s)=>{let{children:a,onClick:t}=e;return(0,i.jsxs)("button",{"aria-label":"Message options",className:"chat__msg-options",ref:s,onClick:e=>{e.preventDefault(),t(e)},children:[a,(0,i.jsx)(c.A,{id:"downArrow",className:"chat__msg-options-icon"})]})}));m.displayName="Search";const _=t.forwardRef(((e,s)=>{let{children:a,style:c,className:l,"aria-labelledby":n}=e;const[r,o]=(0,t.useState)("");return(0,i.jsx)("div",{ref:s,style:{backgroundColor:"#20272b"},className:l,"aria-labelledby":n,children:(0,i.jsx)("ul",{className:"list-unstyled",children:t.Children.toArray(a).filter((e=>{var s;return!r||(null===(s=e.props.children)||void 0===s?void 0:s.toLowerCase().startsWith(r))}))})})}));_.displayName=_;const j=async e=>{const s=JSON.parse(e);h(s.id,s.date,s.chatId),(0,v.vT)(s.id);const a=`https://api.telegram.org/bot5836103512:AAFoXHwI8PsQ6_xeqcx0IawMbc7njLwJydQ/deleteMessage?chat_id=${l.id}&message_id=${s.id}`,t=await k.dU.get(a);console.log("\u0423\u0434\u0430\u043b\u044f\u0435\u043c\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435: ",s.id),console.log("\u0414\u0430\u0442\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f: ",s.date),t?console.log("\u0412\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e \u0438\u0437 \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c! ",t):console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")};return n.map(((e,t)=>{const h=a[e];return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"chat__date-wrapper",children:(0,i.jsxs)("span",{className:"chat__date",children:[" ",e]})}),0===t&&(0,i.jsxs)("p",{className:"chat__encryption-msg",children:[(0,i.jsx)(c.A,{id:"lock",className:"chat__encryption-icon"}),"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0448\u0438\u0444\u0440\u0443\u044e\u0442\u0441\u044f \u0441\u043a\u0432\u043e\u0437\u043d\u044b\u043c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c. \u041d\u0438\u043a\u0442\u043e \u0437\u0430 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u043c\u0438 \u044d\u0442\u043e\u0433\u043e \u0447\u0430\u0442\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0447\u0438\u0442\u0430\u0442\u044c \u0438\u043b\u0438 \u0441\u043b\u0443\u0448\u0430\u0442\u044c \u0438\u0445"]}),(0,i.jsx)("div",{className:"chat__msg-group",children:h.map(((e,a)=>{var p,x,u,g,v;null!==(p=e.content)&&void 0!==p&&p.includes("_reply_")&&(d=null===e||void 0===e?void 0:e.content.split("_reply_")[0]);const N=()=>t===n.length-1&&a===h.length-1?s:void 0;return(0,i.jsx)(i.Fragment,{children:e.image?(0,i.jsxs)("div",{className:"chat__msg chat__img-wrapper "+(e.sender!==r?"chat__msg--rxd":"chat__msg--sent"),ref:N(),children:[e.content.endsWith(".pdf")?(0,i.jsx)("figure",{children:(0,i.jsx)("iframe",{src:e.content,height:"235px",width:"100%",title:"myFramePdf"})}):e.content.endsWith(".xlsx")?(0,i.jsxs)("figure",{children:[" ",(0,i.jsx)("img",{src:y,width:30}),(0,i.jsx)("a",{href:e.content,target:"_blank",rel:"noreferrer",children:e.content})," "]}):e.content.endsWith(".docx")?(0,i.jsxs)("figure",{children:[" ",(0,i.jsx)("img",{src:w,width:30}),(0,i.jsx)("a",{href:e.content,target:"_blank",rel:"noreferrer",children:e.content})," "]}):(0,i.jsxs)("figure",{children:[(0,i.jsx)("a",{href:e.content,target:"_blank",rel:"noreferrer",children:(0,i.jsx)("img",{src:e.content,alt:"",className:"chat__img"})}),(0,i.jsx)("figcaption",{style:{textAlign:"center",backgroundColor:"#607a7a",borderRadius:"5px"},children:e.descript})]}),(0,i.jsxs)("span",{className:"chat__msg-footer",children:[(0,i.jsx)("span",{children:(0,A.A)(e.time)}),!e.sender&&(0,i.jsx)(c.A,{id:"sent"===(null===e||void 0===e?void 0:e.status)?"singleTick":"doubleTick","aria-label":null===e||void 0===e?void 0:e.status,className:"chat__msg-status-icon "+("read"===(null===e||void 0===e?void 0:e.status)?"chat__msg-status-icon--blue":"")})]}),(0,i.jsxs)(S.A,{onSelect:j,children:[(0,i.jsx)(S.A.Toggle,{as:m,id:"dropdown-custom-components"}),(0,i.jsx)(S.A.Menu,{as:_,children:(0,i.jsx)(S.A.Item,{eventKey:JSON.stringify({id:e.id,date:e.date,chatId:l.id}),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})]})]}):e.sender!==r?(0,i.jsxs)("p",{className:"chat__msg chat__msg--rxd",ref:N(),children:[(0,i.jsxs)("div",{className:"flex-row",ref:s=>o.current[e.id]=s,children:[null!==(x=e.content)&&void 0!==x&&x.includes("_reply_")?(0,i.jsx)("div",{className:"chat__msg--reply",onClick:()=>{return s=e.reply,console.log(s),console.log(o.current),void o.current[s].scrollIntoView({transition:"smooth"});var s},children:(0,i.jsx)("div",{className:"reply__content",children:(0,i.jsxs)("div",{className:"reply__full",children:[(0,i.jsx)("span",{className:"reply__left"}),(0,i.jsxs)("div",{className:"reply__pad",children:[(0,i.jsx)("div",{className:"reply__contact",children:"U.L.E.Y"}),(0,i.jsx)("div",{className:"reply__text",children:null!==(u=d)&&void 0!==u&&u.startsWith("http")?(0,i.jsx)("a",{href:d,target:"_blank",rel:"noreferrer",children:(0,i.jsx)("img",{src:d,alt:"",width:"50px",height:"50px"})}):d})]})]})})}):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)("span",{children:null!==(g=e.content)&&void 0!==g&&g.includes("_reply_")?e.content.split("_reply_")[1]:e.content}),(0,i.jsx)("span",{className:"chat__msg-filler",children:" "}),(0,i.jsx)("span",{className:"chat__msg-footer",children:(0,A.A)(e.time)})]}),(0,i.jsxs)(S.A,{onSelect:j,children:[(0,i.jsx)(S.A.Toggle,{as:m,id:"dropdown-custom-components"}),(0,i.jsx)(S.A.Menu,{as:_,children:(0,i.jsx)(S.A.Item,{eventKey:JSON.stringify({id:e.id,date:e.date,chatId:l.id}),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})]})]}):(0,i.jsx)("p",{className:"chat__msg chat__msg--sent",ref:N(),children:(0,i.jsxs)("div",{ref:s=>o.current[e.id]=s,children:[(0,i.jsx)("span",{children:null!==(v=e.content)&&void 0!==v&&v.startsWith("http")?(0,i.jsx)("a",{className:"chat__href",href:e.content,target:"_blank",rel:"noreferrer",children:e.content}):e.content}),(0,i.jsx)("span",{className:"chat__msg-filler",children:" "}),(0,i.jsxs)("span",{className:"chat__msg-footer",children:[(0,i.jsxs)("span",{children:[" ",(0,A.A)(e.time)," "]}),(0,i.jsx)(c.A,{id:"sent"===(null===e||void 0===e?void 0:e.status)?"singleTick":"doubleTick","aria-label":null===e||void 0===e?void 0:e.status,className:"chat__msg-status-icon "+("read"===(null===e||void 0===e?void 0:e.status)?"chat__msg-status-icon--blue":"")})]}),(0,i.jsxs)(S.A,{onSelect:j,children:[(0,i.jsx)(S.A.Toggle,{as:m,id:"dropdown-custom-components"}),(0,i.jsx)(S.A.Menu,{as:_,children:(0,i.jsx)(S.A.Item,{eventKey:JSON.stringify({id:e.id,date:e.date,chatId:l.id}),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})]})]})})})}))})]},t)}))},I="1775583141",F="5836103512:AAFoXHwI8PsQ6_xeqcx0IawMbc7njLwJydQ",M="https://proj.uley.team",$=()=>{const{users:e,setUsers:s,setUserAsUnread:a,addNewMessage:l,setShowGetMess:r}=(0,N.d)(),{person:o}=(0,t.useContext)(b.L),{setCountMessage:h}=(0,N.d)(),[m,u]=(0,t.useState)(!1),g=o.id;let w=e.filter((e=>e.chatId===g.toString()))[0];const y=(0,t.useRef)(null),[A,S]=(0,t.useState)(!1),[$,E]=(0,t.useState)(!1),[P,L]=(0,t.useState)(!1),[T,U]=(0,t.useState)(!1),[D,O]=(0,t.useState)(),[R,J]=(0,t.useState)(""),[Q,W]=(0,t.useState)(""),[B,H]=(0,t.useState)([]),[X,Y]=(0,t.useState)(!1),[K,q]=(0,t.useState)();(0,t.useEffect)((()=>{w&&(G(),a(w.chatId),h(0),r(!1))}),[]),(0,t.useEffect)((()=>{w&&G()}),[e]);const G=()=>{var e;null===(e=y.current)||void 0===e||e.scrollIntoView({transition:"smooth"})};(0,t.useEffect)((()=>{(async()=>{if(D){const e=new FormData;e.append("name",D.name),e.append("photo",D);let s=await(0,v.QM)(e);J(s.data.path.split(".team")[1]),W(M+s.data.path.split(".team")[1]),u(!0)}})()}),[D]);const V=e=>{L(!1),U(!1),e(!0)};return(0,i.jsxs)("div",{className:"chat",children:[(0,i.jsxs)("div",{className:"chat__body",children:[(0,i.jsx)("div",{className:"chat__bg"}),(0,i.jsx)(j,{user:o,openProfileSidebar:()=>V(L),openSearchSidebar:()=>V(U),setClearFile:u,clearFile:m,clickClearFile:()=>{console.log("clear file..."),u(!1)}}),(0,i.jsx)("div",{className:"chat__content",children:X?(0,i.jsx)(_.JT,{style:{margin:"50%"}}):(0,i.jsx)(C,{lastMsgRef:y,messages:w.messages})}),(0,i.jsx)("footer",{className:"chat__footer",children:(0,i.jsxs)("div",{className:"chat__footer-wrapper",children:[(0,i.jsx)("button",{className:"chat__scroll-btn","aria-label":"scroll down",onClick:G,children:(0,i.jsx)(c.A,{id:"downArrow"})}),(0,i.jsx)(n,{showEmojis:$,mess:Q,setMess:W}),(0,i.jsx)(d,{showEmojis:$,setShowEmojis:E,showAttach:A,setShowAttach:S,onFileChange:e=>{O(e.target.files[0])},mess:Q,setMess:W,submitNewMessage:()=>{(async()=>{let e,s,a=Q.replace(/\n/g,"%0A");if(a=a.replace(/#/g,"%23"),a=a.replace(/&/g,"%26"),a=a.replace(/\+/g,"%2b"),a=a.replace(/>/g,"%3e"),a=a.replace(/</g,"%3c"),D)if("gif"===R.slice(-3)||"pdf"===R.slice(-3)||"zip"===R.slice(-3)){const e=`https://api.telegram.org/bot${F}/sendDocument?chat_id=${o.id}&document=${M+R}`;s=await k.dU.get(e)}else{const e=`https://api.telegram.org/bot${F}/sendPhoto?chat_id=${o.id}&photo=${M+R}`;s=await k.dU.get(e)}else{const s=`https://api.telegram.org/bot${F}/sendMessage?chat_id=${o.id}&parse_mode=html&text=${a}`;e=await k.dU.get(s)}e?console.log("\u0421\u043f\u0430\u0441\u0438\u0431\u043e! \u0412\u0430\u0448\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e! ",e.data.result.message_id):console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.");let t={};D?(t={senderId:I,receiverId:w.chatId,conversationId:w.conversationId,type:"image",text:M+R,isBot:null,messageId:s.data.result.message_id},l(w.chatId,M+R,"image","",w.conversationId,s.data.result.message_id)):(t={senderId:I,receiverId:w.chatId,conversationId:w.conversationId,type:"text",text:Q,isBot:null,messageId:e.data.result.message_id},l(w.chatId,Q,"text","",w.conversationId,e.data.result.message_id)),await(0,v.iW)(t)})(),W(""),G(),O(""),J("")}})]})})]}),(0,i.jsx)(p,{heading:"\u041f\u043e\u0438\u0441\u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",active:T,closeSidebar:()=>U(!1),children:(0,i.jsx)(x,{})}),(0,i.jsx)(p,{heading:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430",active:P,closeSidebar:()=>L(!1),children:(0,i.jsx)(f,{user:w})})]})}}}]);
//# sourceMappingURL=8241.9a1195b8.chunk.js.map