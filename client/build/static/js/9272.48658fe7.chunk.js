"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[9272],{33314:(e,a,s)=>{s.d(a,{Z:()=>x});var t=s(72791),c=s(57689),i=s(75421),l=s(36223),n=s(11087),r=s(48463),o=s(26213),d=s(64941),h=s(27839),m=s(78983),_=(s(69835),s(80184));const j=e=>{let{contact:a}=e;const{setPerson:s}=(0,t.useContext)(d.w),{setUserAsUnread:c,usersOnline:i,setCountMessage:m}=(0,o.Z)(),j=(i.find((e=>e.userId==a.chatId)),(()=>{const e=Object.keys(a.messages);let s;s=0!==e.length?e[e.length-1]:"2000-01-01";let t=[];if("{}"!==JSON.stringify(a.messages)&&(t=[...a.messages[s]]),t.length){return t.pop()}return""})());return(0,_.jsxs)(n.rU,{className:"sidebar-contact",onClick:()=>(async()=>{s({name:a.name,id:a.chatId,avatar:a.avatar}),c(a.chatId),m(0)})(),children:[(0,_.jsx)("div",{className:"sidebar-contact__avatar-wrapper",children:a.avatar?(0,_.jsx)("img",{src:"".concat("https://proj.uley.team:5000/").concat(a.avatar),onError:e=>{e.target.src=h},alt:"",className:"avatar-adm"}):(0,_.jsx)("img",{src:h,alt:"",className:"avatar-adm"})}),(0,_.jsxs)("div",{className:"sidebar-contact__content",children:[(0,_.jsxs)("div",{className:"sidebar-contact__top-content",children:[(0,_.jsxs)("h2",{className:"sidebar-contact__name",children:[" ",a.name]}),(0,_.jsx)("span",{className:"sidebar-contact__time",children:""===j?"":(0,r.Z)(j.time)})]}),(0,_.jsxs)("div",{className:"sidebar-contact__bottom-content",children:[(0,_.jsxs)("p",{className:"sidebar-contact__message-wrapper",children:[j.status&&(0,_.jsx)(l.Z,{id:"sent"===(null===j||void 0===j?void 0:j.status)?"singleTick":"doubleTick","aria-label":null===j||void 0===j?void 0:j.status,className:"sidebar-contact__message-icon ".concat("read"===(null===j||void 0===j?void 0:j.status)?"sidebar-contact__message-icon--blue":"")}),(0,_.jsx)("span",{className:"sidebar-contact__message ".concat(a.unread?"sidebar-contact__message--unread":""),children:a.typing?(0,_.jsx)("i",{children:" \u043f\u0435\u0447\u0430\u0442\u0430\u0435\u0442..."}):null===j||void 0===j?void 0:j.content})]}),(0,_.jsxs)("div",{className:"sidebar-contact__icons",children:[a.pinned&&(0,_.jsx)(l.Z,{id:"pinned",className:"sidebar-contact__icon"}),!!a.unread&&(0,_.jsx)("span",{className:"sidebar-contact__unread",children:a.unread}),(0,_.jsx)("button",{"aria-label":"sidebar-contact__btn",children:(0,_.jsx)(l.Z,{id:"downArrow",className:"sidebar-contact__icon sidebar-contact__icon--dropdown"})})]})]})]})]})};var p=s(30549);s(94810);const x=()=>{const{users:e,setUsers:a}=(0,o.Z)(),[s,n]=(0,t.useState)([]),[r,d]=(0,t.useState)(""),[h,x]=(0,t.useState)(!0),[u,g]=(0,t.useState)([]),v=(0,c.s0)();(0,t.useEffect)((()=>{const a=[...e].sort(((e,a)=>{var s=new Date(e.date);return new Date(a.date)-s}));n(a),e.length>0&&x(!1)}),[e]),(0,t.useEffect)((()=>{const a=e.filter((e=>{var a;return null===(a=e.name+e.chatId)||void 0===a?void 0:a.replace(/[\u0435\u0451]/g,"(\u0435|\u0451)").toLowerCase().includes(r.replace(/[\u0435\u0451]/g,"(\u0435|\u0451)").toLowerCase())}));n(a)}),[r]);return(0,_.jsxs)("aside",{className:"sidebarB",children:[(0,_.jsxs)("header",{className:"headerB",children:[(0,_.jsx)("div",{className:"sidebar__avatar-wrapper",children:(0,_.jsx)("img",{src:i,alt:"U.L.E.Y",className:"avatar-adm"})}),(0,_.jsx)("div",{children:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u044b"}),(0,_.jsx)("div",{className:"sidebar__actions",children:(0,_.jsx)(p.Z,{className:"sidebar__action",ariaLabel:"Menu",iconId:"menu",iconClassName:"sidebar__action-icon",onSelected:e=>{switch(e){case 0:console.log("\u041f\u0440\u043e\u0444\u0438\u043b\u044c");break;case 1:console.log("1");break;case 4:v("/dashboard");break;default:console.log("\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435")}},options:["\u041f\u0440\u043e\u0444\u0438\u043b\u044c"]})})]}),(0,_.jsxs)("div",{className:"search-wrapper",children:[(0,_.jsxs)("div",{className:"search-icons",children:[(0,_.jsx)(l.Z,{id:"search",className:"search-icon"}),(0,_.jsx)("button",{className:"search__back-btn",children:(0,_.jsx)(l.Z,{id:"back"})})]}),(0,_.jsx)("input",{className:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430",onChange:e=>d(e.target.value)})]}),(0,_.jsx)("div",{className:"sidebar__contacts",children:h?(0,_.jsx)(m.LQ,{style:{margin:"50%"}}):s.map((e=>"1775583141"!==e.chatId&&(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(j,{contact:e})})))})]})}},95017:(e,a,s)=>{s.d(a,{Z:()=>M});var t=s(72791),c=s(36223),i=s(80184);const l=[{icon:"recent",label:"Recent emojis",active:!0},{icon:"emojiPeople",label:"People emojis",active:!1},{icon:"emojiNature",label:"Nature emojis",active:!1},{icon:"emojiFood",label:"Food emojis",active:!1},{icon:"emojiActivity",label:"Activity emojis",active:!1},{icon:"emojiTravel",label:"Travel emojis",active:!1},{icon:"emojiObjects",label:"Object emojis",active:!1},{icon:"emojiSymbols",label:"Symbol emojis",active:!1},{icon:"emojiFlags",label:"Flag emojis",active:!1}],n=e=>{let{showEmojis:a,newMessage:s,setNewMessage:t}=e;return(0,i.jsxs)("div",{className:"emojis__wrapper ".concat(a?"emojis__wrapper--active":""),children:[(0,i.jsx)("div",{className:"emojis__tabs",children:l.map((e=>(0,i.jsx)("div",{className:"emojis__tab ".concat(e.active?"emojis__tab--active":""),children:(0,i.jsx)("button",{"aria-label":e.label,children:(0,i.jsx)(c.Z,{id:e.icon,className:"emojis__tab-icon"})},e.icon)},e.label)))}),(0,i.jsxs)("div",{className:"emojis__content",children:[(0,i.jsx)("input",{className:"emojis__search",placeholder:"Search Emoji"}),(0,i.jsxs)("h4",{className:"emojis__label",children:[" Smileys ","&"," People "]}),(0,i.jsx)("div",{className:"emojis__grid",children:new Array(6).fill(null).map(((e,a)=>new Array(11).fill(null).map(((e,s)=>(0,i.jsx)("div",{role:"img","aria-label":"emoji",className:"emoji emojis__emoji",style:{backgroundPositionX:-3-44.2*s,backgroundPositionY:-6-52*a}},"".concat(a,"-").concat(s))))))}),(0,i.jsxs)("h4",{className:"emojis__label",children:[" Animals ","&"," Nature "]}),(0,i.jsx)("div",{className:"emojis__grid",children:new Array(6).fill(null).map(((e,a)=>new Array(11).fill(null).map(((e,s)=>(0,i.jsx)("div",{role:"img","aria-label":"emoji",className:"emoji emojis__emoji",style:{backgroundPositionX:-3-44.2*s,backgroundPositionY:-6-52*a}},"".concat(a,"-").concat(s))))))})]})]})},r=(e,a)=>{(0,t.useEffect)((()=>{if(e){e.style.height="0px";const a=e.scrollHeight-40;e.style.height=a+"px"}}),[e,a])},o=[{icon:"attachDocument",label:"Choose document",click:"doc"},{icon:"attachImage",label:"Choose image",click:"image"}],d=e=>{let{showAttach:a,setShowAttach:s,showEmojis:l,setShowEmojis:n,mess:d,setMess:h,submitNewMessage:m,onFileChange:_}=e;const j=(0,t.useRef)(null);r(j.current,d);return(0,i.jsxs)("div",{className:"chat__input-wrapper",children:[l&&(0,i.jsx)("button",{"aria-label":"Close emojis",onClick:()=>n(!1),children:(0,i.jsx)(c.Z,{id:"cancel",className:"chat__input-icon"})}),(0,i.jsx)("button",{"aria-label":"Emojis",onClick:()=>n(!0),children:(0,i.jsx)(c.Z,{id:"smiley",className:"chat__input-icon ".concat(l?"chat__input-icon--highlight":"")})}),l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{"aria-label":"Choose GIF",children:(0,i.jsx)(c.Z,{id:"gif",className:"chat__input-icon"})}),(0,i.jsx)("button",{"aria-label":"Choose sticker",children:(0,i.jsx)(c.Z,{id:"sticker",className:"chat__input-icon"})})]}),(0,i.jsxs)("div",{className:"pos-rel",children:[(0,i.jsx)("button",{"aria-label":"Attach",onClick:()=>s(!a),children:(0,i.jsx)(c.Z,{id:"attach",className:"chat__input-icon ".concat(a?"chat__input-icon--pressed":"")})}),(0,i.jsx)("div",{className:"chat__attach ".concat(a?"chat__attach--active":""),children:o.map((e=>(0,i.jsxs)("button",{className:"chat__attach-btn","aria-label":e.label,onClick:()=>console.log(e.click),children:[(0,i.jsx)("label",{htmlFor:"fileInput",children:(0,i.jsx)(c.Z,{id:e.icon,className:"chat__attach-icon"})}),(0,i.jsx)("input",{type:"file",id:"fileInput",name:"photo",style:{display:"none"},onChange:e=>_(e)})]},e.label)))})]}),(0,i.jsx)("textarea",{className:"chat__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",value:d,onChange:e=>{console.log(e.target.value),h(e.target.value)},ref:j,rows:1}),(0,i.jsx)("button",{"aria-label":"Send message",onClick:m,children:(0,i.jsx)(c.Z,{id:"send",className:"chat__input-icon"})})]})};var h=s(30549),m=s(27839),_=s(78983);const j=e=>{let{user:a,openProfileSidebar:s,openSearchSidebar:t,clearFile:l,setClearFile:n,clickClearFile:r}=e;return(0,i.jsxs)("header",{className:"headerB chat__header",children:[(0,i.jsx)("div",{className:"chat__avatar-wrapper",onClick:s,children:a.avatar?(0,i.jsx)("img",{src:"".concat("https://proj.uley.team:5000/").concat(a.avatar),alt:null===a||void 0===a?void 0:a.name,className:"avatar-adm"}):(0,i.jsx)("img",{src:m,alt:null===a||void 0===a?void 0:a.name,className:"avatar-adm"})}),(0,i.jsxs)("div",{className:"chat__contact-wrapper",onClick:s,children:[(0,i.jsxs)("h2",{className:"chat__contact-name",children:[" ",null===a||void 0===a?void 0:a.name]}),(0,i.jsx)("p",{className:"chat__contact-desc",children:a.typing?"\u043f\u0435\u0447\u0430\u0442\u0430\u0435\u0442...":"\u0434\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430"})]}),(0,i.jsxs)("div",{className:"chat__actions",children:[l?(0,i.jsx)(_.u5,{color:"danger",onClick:r,children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"}):"",(0,i.jsx)("button",{className:"chat__action","aria-label":"Search",onClick:t,children:(0,i.jsx)(c.Z,{id:"search",className:"chat__action-icon chat__action-icon--search"})}),(0,i.jsx)(h.Z,{className:"chat__action",ariaLabel:"Menu",iconId:"menu",iconClassName:"chat__action-icon",onSelected:e=>{switch(e){case 0:s();break;case 1:console.log("1");break;default:console.log("\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435")}},options:["\u0414\u0430\u043d\u043d\u044b\u0435 \u043e \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435","\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u043a\u0443","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0447\u0430\u0442"]})]})]})},p=e=>{let{active:a,closeSidebar:s,heading:t,children:l}=e;return(0,i.jsxs)("aside",{className:"chat-sidebar ".concat(a?"chat-sidebar--active":""),children:[(0,i.jsxs)("header",{className:"header chat-sidebar__header",children:[(0,i.jsx)("button",{onClick:s,children:(0,i.jsx)(c.Z,{id:"cancel",className:"chat-sidebar__header-icon"})}),(0,i.jsxs)("h2",{className:"chat-sidebar__heading",children:[" ",t]})]}),(0,i.jsx)("div",{className:"chat-sidebar__content",children:l})]})},x=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"search-wrapper",children:[(0,i.jsxs)("div",{className:"search-icons",children:[(0,i.jsx)(c.Z,{id:"search",className:"search-icon"}),(0,i.jsx)("button",{className:"search__back-btn",children:(0,i.jsx)(c.Z,{id:"back"})})]}),(0,i.jsx)("input",{className:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a..."})]}),(0,i.jsx)("div",{className:"chat-sidebar__search-results",children:(0,i.jsx)("p",{children:" \u041f\u043e\u0438\u0441\u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0432 \u0447\u0430\u0442\u0435"})})]});var u=s(50882);const g=e=>{let{inputProps:a}=e;return(0,i.jsxs)("div",{className:"checkbox",children:[(0,i.jsx)("input",{type:"checkbox",id:"checkbox",...a,className:"checkbox__input"}),(0,i.jsx)("label",{htmlFor:"checkbox",className:"checkbox__label",children:(0,i.jsx)(c.Z,{id:"check",className:"checkbox__icon"})})]})};var v=s(94810),N=s(26213),b=s(64941);const f=e=>{let{user:a}=e;const[s,l]=(0,t.useState)(""),[n,r]=(0,t.useState)(!1),{addNewName:o,addNewAvatar:d}=(0,N.Z)(),{setPerson:h}=(0,t.useContext)(b.w),[_,j]=(0,t.useState)(null),[p,x]=(0,t.useState)(!1),f=t.useRef(),w="https://proj.uley.team:5000/";(0,t.useEffect)((()=>{j("".concat(w).concat(a.avatar))}),[a]);const y=async()=>{h({name:a.name,id:a.chatId,avatar:a.avatar})},k=t.useCallback((async()=>{try{const e=new FormData;e.append("photo",_);let s=await(0,v.cT)(e);const t={avatar:s.data.path.split(".team")[1]};await(0,v.MB)(t,a.chatId),d(a.chatId,s.data.path.split(".team")[1]),y(),x(!1)}catch(e){}}),[_]);return(0,i.jsxs)("div",{className:"profile",children:[(0,i.jsxs)("div",{className:"profile__section profile__section--personal",children:[(0,i.jsxs)("div",{className:"profile__avatar-wrapper upload",children:[a.avatar?(0,i.jsx)("img",{src:"".concat(w).concat(a.avatar),alt:null===a||void 0===a?void 0:a.name,className:"avatar-adm"}):(0,i.jsx)("img",{src:m,alt:null===a||void 0===a?void 0:a.name,className:"avatar-adm"}),(0,i.jsxs)("div",{className:"round_adm",children:[(0,i.jsx)("input",{type:"file",name:"photo",onChange:async e=>{e.preventDefault(),j(e.target.files[0]),x(!0)}}),(0,i.jsx)("i",{className:"fa fa-camera",style:{color:"#fff"}})]})]}),p?(0,i.jsx)("button",{className:"btn_save",onClick:k,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}):"",(0,i.jsx)("p",{style:{color:"#d5d5d5"},children:a.chatId}),n?(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t={username:s};await(0,v.mP)(t,a.chatId),o(a.chatId,s),y(),r(!1)},children:[(0,i.jsx)("input",{type:"text",value:s,onChange:e=>{e.preventDefault(),l(e.target.value)},ref:f,onFocus:()=>f.current.select(),style:{borderBottom:"1px solid #0e892e",color:"#d5d5d5"}}),(0,i.jsx)("input",{type:"submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",style:{color:"#6a6a6a"}})]}):(0,i.jsxs)("h2",{className:"profile__name",children:[" ",a.name," "]}),n?"":(0,i.jsx)("span",{onClick:()=>{l(a.name),r(!0)},style:{cursor:"pointer",color:"#6a6a6a"},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]}),(0,i.jsxs)("div",{className:"profile__section profile__section--media",children:[(0,i.jsxs)("div",{className:"sb profile__heading-wrapper",children:[(0,i.jsx)("h2",{className:"profile__heading",children:" \u041c\u0435\u0434\u0438\u0430, \u0441\u0441\u044b\u043b\u043a\u0438 \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b "}),(0,i.jsx)("button",{children:(0,i.jsx)(c.Z,{id:"rightArrow",className:"profile__heading-icon"})})]}),(0,i.jsxs)("div",{className:"profile__media-wrapper",children:[(0,i.jsx)("img",{src:u,alt:"media",className:"profile__media"}),(0,i.jsx)("img",{src:u,alt:"media",className:"profile__media"}),(0,i.jsx)("img",{src:u,alt:"media",className:"profile__media"})]})]}),(0,i.jsxs)("ul",{className:"profile__section profile__section--actions",children:[(0,i.jsxs)("li",{className:"profile__action",children:[(0,i.jsx)("p",{className:"profile__action-left",children:(0,i.jsx)("span",{className:"profile__action-text profile__action-text--top",children:"\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"})}),(0,i.jsx)("div",{className:"profile__action-right",children:(0,i.jsx)(g,{})})]}),(0,i.jsxs)("li",{className:"profile__action",children:[(0,i.jsx)("p",{className:"profile__action-left",children:(0,i.jsx)("span",{className:"profile__action-text profile__action-text--top",children:"\u041e\u0442\u043c\u0435\u0447\u0435\u043d\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"})}),(0,i.jsx)("button",{className:"profile__action-right",children:(0,i.jsx)(c.Z,{id:"rightArrow",className:"profile__heading-icon"})})]}),(0,i.jsxs)("li",{className:"profile__action",children:[(0,i.jsxs)("p",{className:"profile__action-left",children:[(0,i.jsx)("span",{className:"profile__action-text profile__action-text--top",children:"\u0418\u0441\u0447\u0435\u0437\u0430\u044e\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}),(0,i.jsx)("span",{className:"profile__action-text profile__action-text--bottom",children:"Off"})]}),(0,i.jsxs)("button",{className:"profile__action-right",children:[(0,i.jsx)(c.Z,{id:"rightArrow",className:"profile__heading-icon"})," "]})]})]}),(0,i.jsxs)("div",{className:"profile__section profile__section--about",children:[(0,i.jsx)("div",{className:"sb profile__heading-wrapper",children:(0,i.jsx)("h2",{className:"profile__heading",children:" \u041e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u0438 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 "})}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{className:"profile__about-item",children:"\u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0432 \u043e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438..."}),(0,i.jsx)("li",{className:"profile__about-item",children:"+7 123-12-12"})]})]}),(0,i.jsxs)("div",{className:"profile__section profile__section--danger",children:[(0,i.jsx)(c.Z,{id:"block",className:"profile__danger-icon"}),(0,i.jsx)("p",{className:"profile__danger-text",children:" \u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c "})]}),(0,i.jsxs)("div",{className:"profile__section profile__section--danger",children:[(0,i.jsx)(c.Z,{id:"thumbsDown",className:"profile__danger-icon"}),(0,i.jsx)("p",{className:"profile__danger-text",children:" \u0421\u043e\u043e\u0431\u0449\u0438\u0442\u044c \u043e \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435 "})]}),(0,i.jsxs)("div",{className:"profile__section profile__section--danger",children:[(0,i.jsx)(c.Z,{id:"delete",className:"profile__danger-icon"}),(0,i.jsx)("p",{className:"profile__danger-text",children:" \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0447\u0430\u0442 "})]})]})};var w=s(76443),y=s(43506),k=s(48463),Z=s(50989),S=s(93152);const C=e=>{let{lastMsgRef:a,messages:s}=e;const{person:l}=(0,t.useContext)(b.w),n=Object.keys(s),r="1775583141",o=(0,t.useRef)([]);let d;const{delMessageContext:h}=(0,N.Z)(),m=t.forwardRef(((e,a)=>{let{children:s,onClick:t}=e;return(0,i.jsxs)("button",{"aria-label":"Message options",className:"chat__msg-options",ref:a,onClick:e=>{e.preventDefault(),t(e)},children:[s,(0,i.jsx)(c.Z,{id:"downArrow",className:"chat__msg-options-icon"})]})}));m.displayName="Search";const _=t.forwardRef(((e,a)=>{let{children:s,style:c,className:l,"aria-labelledby":n}=e;const[r,o]=(0,t.useState)("");return(0,i.jsx)("div",{ref:a,style:{backgroundColor:"#20272b"},className:l,"aria-labelledby":n,children:(0,i.jsx)("ul",{className:"list-unstyled",children:t.Children.toArray(s).filter((e=>{var a;return!r||(null===(a=e.props.children)||void 0===a?void 0:a.toLowerCase().startsWith(r))}))})})}));_.displayName=_;const j=async e=>{const a=JSON.parse(e);h(a.id,a.date,a.chatId),(0,v.Kp)(a.id);const s="https://api.telegram.org/bot".concat("5836103512:AAFoXHwI8PsQ6_xeqcx0IawMbc7njLwJydQ","/deleteMessage?chat_id=").concat(l.id,"&message_id=").concat(a.id),t=await Z.y_.get(s);console.log("\u0423\u0434\u0430\u043b\u044f\u0435\u043c\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435: ",a.id),console.log("\u0414\u0430\u0442\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f: ",a.date),t?console.log("\u0412\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e \u0438\u0437 \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c! ",t):console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")};return n.map(((e,t)=>{const h=s[e];return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"chat__date-wrapper",children:(0,i.jsxs)("span",{className:"chat__date",children:[" ",e]})}),0===t&&(0,i.jsxs)("p",{className:"chat__encryption-msg",children:[(0,i.jsx)(c.Z,{id:"lock",className:"chat__encryption-icon"}),"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0448\u0438\u0444\u0440\u0443\u044e\u0442\u0441\u044f \u0441\u043a\u0432\u043e\u0437\u043d\u044b\u043c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c. \u041d\u0438\u043a\u0442\u043e \u0437\u0430 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u043c\u0438 \u044d\u0442\u043e\u0433\u043e \u0447\u0430\u0442\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0447\u0438\u0442\u0430\u0442\u044c \u0438\u043b\u0438 \u0441\u043b\u0443\u0448\u0430\u0442\u044c \u0438\u0445"]}),(0,i.jsx)("div",{className:"chat__msg-group",children:h.map(((e,s)=>{var p,x,u,g,v;null!==(p=e.content)&&void 0!==p&&p.includes("_reply_")&&(d=null===e||void 0===e?void 0:e.content.split("_reply_")[0]);const N=()=>t===n.length-1&&s===h.length-1?a:void 0;return(0,i.jsx)(i.Fragment,{children:e.image?(0,i.jsxs)("div",{className:"chat__msg chat__img-wrapper ".concat(e.sender!==r?"chat__msg--rxd":"chat__msg--sent"),ref:N(),children:[e.content.endsWith(".pdf")?(0,i.jsx)("figure",{children:(0,i.jsx)("iframe",{src:e.content,height:"235px",width:"100%",title:"myFramePdf"})}):e.content.endsWith(".xlsx")?(0,i.jsxs)("figure",{children:[" ",(0,i.jsx)("img",{src:y,width:30}),(0,i.jsx)("a",{href:e.content,target:"_blank",rel:"noreferrer",children:e.content})," "]}):e.content.endsWith(".docx")?(0,i.jsxs)("figure",{children:[" ",(0,i.jsx)("img",{src:w,width:30}),(0,i.jsx)("a",{href:e.content,target:"_blank",rel:"noreferrer",children:e.content})," "]}):(0,i.jsxs)("figure",{children:[(0,i.jsx)("a",{href:e.content,target:"_blank",rel:"noreferrer",children:(0,i.jsx)("img",{src:e.content,alt:"",className:"chat__img"})}),(0,i.jsx)("figcaption",{style:{textAlign:"center",backgroundColor:"#607a7a",borderRadius:"5px"},children:e.descript})]}),(0,i.jsxs)("span",{className:"chat__msg-footer",children:[(0,i.jsx)("span",{children:(0,k.Z)(e.time)}),!e.sender&&(0,i.jsx)(c.Z,{id:"sent"===(null===e||void 0===e?void 0:e.status)?"singleTick":"doubleTick","aria-label":null===e||void 0===e?void 0:e.status,className:"chat__msg-status-icon ".concat("read"===(null===e||void 0===e?void 0:e.status)?"chat__msg-status-icon--blue":"")})]}),(0,i.jsxs)(S.Z,{onSelect:j,children:[(0,i.jsx)(S.Z.Toggle,{as:m,id:"dropdown-custom-components"}),(0,i.jsx)(S.Z.Menu,{as:_,children:(0,i.jsx)(S.Z.Item,{eventKey:JSON.stringify({id:e.id,date:e.date,chatId:l.id}),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})]})]}):e.sender!==r?(0,i.jsxs)("p",{className:"chat__msg chat__msg--rxd",ref:N(),children:[(0,i.jsxs)("div",{className:"flex-row",ref:a=>o.current[e.id]=a,children:[null!==(x=e.content)&&void 0!==x&&x.includes("_reply_")?(0,i.jsx)("div",{className:"chat__msg--reply",onClick:()=>{return a=e.reply,console.log(a),console.log(o.current),void o.current[a].scrollIntoView({transition:"smooth"});var a},children:(0,i.jsx)("div",{className:"reply__content",children:(0,i.jsxs)("div",{className:"reply__full",children:[(0,i.jsx)("span",{className:"reply__left"}),(0,i.jsxs)("div",{className:"reply__pad",children:[(0,i.jsx)("div",{className:"reply__contact",children:"U.L.E.Y"}),(0,i.jsx)("div",{className:"reply__text",children:null!==(u=d)&&void 0!==u&&u.startsWith("http")?(0,i.jsx)("a",{href:d,target:"_blank",rel:"noreferrer",children:(0,i.jsx)("img",{src:d,alt:"",width:"50px",height:"50px"})}):d})]})]})})}):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)("span",{children:null!==(g=e.content)&&void 0!==g&&g.includes("_reply_")?e.content.split("_reply_")[1]:e.content}),(0,i.jsx)("span",{className:"chat__msg-filler",children:" "}),(0,i.jsx)("span",{className:"chat__msg-footer",children:(0,k.Z)(e.time)})]}),(0,i.jsxs)(S.Z,{onSelect:j,children:[(0,i.jsx)(S.Z.Toggle,{as:m,id:"dropdown-custom-components"}),(0,i.jsx)(S.Z.Menu,{as:_,children:(0,i.jsx)(S.Z.Item,{eventKey:JSON.stringify({id:e.id,date:e.date,chatId:l.id}),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})]})]}):(0,i.jsx)("p",{className:"chat__msg chat__msg--sent",ref:N(),children:(0,i.jsxs)("div",{ref:a=>o.current[e.id]=a,children:[(0,i.jsx)("span",{children:null!==(v=e.content)&&void 0!==v&&v.startsWith("http")?(0,i.jsx)("a",{className:"chat__href",href:e.content,target:"_blank",rel:"noreferrer",children:e.content}):e.content}),(0,i.jsx)("span",{className:"chat__msg-filler",children:" "}),(0,i.jsxs)("span",{className:"chat__msg-footer",children:[(0,i.jsxs)("span",{children:[" ",(0,k.Z)(e.time)," "]}),(0,i.jsx)(c.Z,{id:"sent"===(null===e||void 0===e?void 0:e.status)?"singleTick":"doubleTick","aria-label":null===e||void 0===e?void 0:e.status,className:"chat__msg-status-icon ".concat("read"===(null===e||void 0===e?void 0:e.status)?"chat__msg-status-icon--blue":"")})]}),(0,i.jsxs)(S.Z,{onSelect:j,children:[(0,i.jsx)(S.Z.Toggle,{as:m,id:"dropdown-custom-components"}),(0,i.jsx)(S.Z.Menu,{as:_,children:(0,i.jsx)(S.Z.Item,{eventKey:JSON.stringify({id:e.id,date:e.date,chatId:l.id}),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})]})]})})})}))})]},t)}))},I="1775583141",A="5836103512:AAFoXHwI8PsQ6_xeqcx0IawMbc7njLwJydQ",F="https://proj.uley.team",M=()=>{const{users:e,setUsers:a,setUserAsUnread:s,addNewMessage:l}=(0,N.Z)(),{person:r}=(0,t.useContext)(b.w),{setCountMessage:o}=(0,N.Z)(),[h,m]=(0,t.useState)(!1),u=r.id;let g=e.filter((e=>e.chatId===u.toString()))[0];const w=(0,t.useRef)(null),[y,k]=(0,t.useState)(!1),[S,M]=(0,t.useState)(!1),[E,P]=(0,t.useState)(!1),[T,D]=(0,t.useState)(!1),[L,O]=(0,t.useState)(),[R,U]=(0,t.useState)(""),[B,J]=(0,t.useState)(""),[W,Q]=(0,t.useState)([]),[K,X]=(0,t.useState)(!1),[Y,H]=(0,t.useState)();(0,t.useEffect)((()=>{g&&(q(),s(g.chatId),o(0))}),[]),(0,t.useEffect)((()=>{g&&q()}),[e]);const q=()=>{var e;null===(e=w.current)||void 0===e||e.scrollIntoView({transition:"smooth"})};(0,t.useEffect)((()=>{(async()=>{if(L){const e=new FormData;e.append("name",L.name),e.append("photo",L);let a=await(0,v.cT)(e);U(a.data.path.split(".team")[1]),J(F+a.data.path.split(".team")[1]),m(!0)}})()}),[L]);const V=e=>{P(!1),D(!1),e(!0)};return(0,i.jsxs)("div",{className:"chat",children:[(0,i.jsxs)("div",{className:"chat__body",children:[(0,i.jsx)("div",{className:"chat__bg"}),(0,i.jsx)(j,{user:r,openProfileSidebar:()=>V(P),openSearchSidebar:()=>V(D),setClearFile:m,clearFile:h,clickClearFile:()=>{console.log("clear file..."),m(!1)}}),(0,i.jsx)("div",{className:"chat__content",children:K?(0,i.jsx)(_.LQ,{style:{margin:"50%"}}):(0,i.jsx)(C,{lastMsgRef:w,messages:g.messages})}),(0,i.jsx)("footer",{className:"chat__footer",children:(0,i.jsxs)("div",{className:"chat__footer-wrapper",children:[(0,i.jsx)("button",{className:"chat__scroll-btn","aria-label":"scroll down",onClick:q,children:(0,i.jsx)(c.Z,{id:"downArrow"})}),(0,i.jsx)(n,{showEmojis:S,mess:B,setMess:J}),(0,i.jsx)(d,{showEmojis:S,setShowEmojis:M,showAttach:y,setShowAttach:k,onFileChange:e=>{O(e.target.files[0])},mess:B,setMess:J,submitNewMessage:()=>{(async()=>{let e,a,s=B.replace(/\n/g,"%0A");if(s=s.replace(/#/g,"%23"),s=s.replace(/&/g,"%26"),s=s.replace(/\+/g,"%2b"),s=s.replace(/>/g,"%3e"),s=s.replace(/</g,"%3c"),L)if("gif"===R.slice(-3)||"pdf"===R.slice(-3)||"zip"===R.slice(-3)){const e="https://api.telegram.org/bot".concat(A,"/sendDocument?chat_id=").concat(r.id,"&document=").concat(F+R);a=await Z.y_.get(e)}else{const e="https://api.telegram.org/bot".concat(A,"/sendPhoto?chat_id=").concat(r.id,"&photo=").concat(F+R);a=await Z.y_.get(e)}else{const a="https://api.telegram.org/bot".concat(A,"/sendMessage?chat_id=").concat(r.id,"&parse_mode=html&text=").concat(s);e=await Z.y_.get(a)}e?console.log("\u0421\u043f\u0430\u0441\u0438\u0431\u043e! \u0412\u0430\u0448\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e! ",e.data.result.message_id):console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.");let t={};L?(t={senderId:I,receiverId:g.chatId,conversationId:g.conversationId,type:"image",text:F+R,isBot:null,messageId:a.data.result.message_id},l(g.chatId,F+R,"image","",g.conversationId,a.data.result.message_id)):(t={senderId:I,receiverId:g.chatId,conversationId:g.conversationId,type:"text",text:B,isBot:null,messageId:e.data.result.message_id},l(g.chatId,B,"text","",g.conversationId,e.data.result.message_id)),await(0,v.rW)(t)})(),J(""),q(),O(""),U("")}})]})})]}),(0,i.jsx)(p,{heading:"\u041f\u043e\u0438\u0441\u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",active:T,closeSidebar:()=>D(!1),children:(0,i.jsx)(x,{})}),(0,i.jsx)(p,{heading:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430",active:E,closeSidebar:()=>P(!1),children:(0,i.jsx)(f,{user:g})})]})}}}]);
//# sourceMappingURL=9272.48658fe7.chunk.js.map