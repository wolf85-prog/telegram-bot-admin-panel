"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[756],{71415:function(e,s,t){t.r(s),t.d(s,{default:function(){return b}});var r=t(4942),i=t(1413),n=t(74165),c=t(15861),l=t(29439),a=t(72791),d=t(11087),o=t(78983),x=t(84688),u=t(9936),h=t.p+"static/media/pencil.0ce7745fa668e89bedfc.png",j=t(80225),p=t(69835),m="MyModal_myModal__PMGvr",f="MyModal_myModalContent__SsdJo",v="MyModal_active__-NfGc",N=t(80184),g=function(e){var s=e.children,t=e.visible,r=e.setVisible,i=[m];return t&&i.push(v),(0,N.jsx)("div",{className:i.join(" "),onClick:function(){return r(!1)},children:(0,N.jsx)("div",{className:f,onClick:function(e){return e.stopPropagation()},children:s})})};var y=t.p+"static/media/close.292280e2a4c33572fa44d4be444aac11.svg",b=function(){var e=(0,j.Z)(),s=e.distributionsWork,t=e.addNewDistrib,m=e.workers,f=(0,a.useState)([]),v=(0,l.Z)(f,2),b=v[0],w=v[1],S=(0,a.useState)([]),Z=(0,l.Z)(S,2),k=Z[0],C=Z[1],_=(0,a.useState)([]),I=(0,l.Z)(_,2),M=I[0],J=I[1],O=(0,a.useState)(!0),T=(0,l.Z)(O,2),L=T[0],D=T[1],R=(0,a.useState)(""),V=(0,l.Z)(R,2),E=V[0],F=(V[1],(0,a.useState)(1)),H=(0,l.Z)(F,2),P=(H[0],H[1],(0,a.useState)(!1)),U=(0,l.Z)(P,2),W=U[0],z=U[1],G=(0,a.useState)(""),K=(0,l.Z)(G,2),Q=K[0],X=K[1],Y=(0,a.useState)(0),q=(0,l.Z)(Y,2),A=q[0],B=q[1],$=(0,a.useState)(0),ee=(0,l.Z)($,2),se=ee[0],te=ee[1],re=(0,a.useState)([]),ie=(0,l.Z)(re,2),ne=ie[0],ce=ie[1],le=(0,a.useState)(0),ae=(0,l.Z)(le,2),de=ae[0],oe=ae[1],xe=(0,a.useRef)(),ue=(0,N.jsx)(o.oo,{autohide:!0,visible:!0,color:"success",className:"text-white align-items-center",children:(0,N.jsxs)("div",{className:"d-flex",children:[(0,N.jsx)(o.S3,{children:"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430!"}),(0,N.jsx)(o.Pv,{className:"me-2 m-auto",white:!0})]})});(0,a.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],s.map((function(e,s){var r=new Date(e.datestart),i=r.getFullYear(),n=String(r.getMonth()+1).padStart(2,"0"),c=String(r.getDate()).padStart(2,"0"),l=r.getHours(),a=String(r.getMinutes()).padStart(2,"0"),d="".concat(c,".").concat(n,".").concat(i),o="".concat(l,":").concat(a),x=e.delivered,u={id:e.id,text:e.text,image:""!==e.image?e.image:"",project:e.project,projectId:e.projectId?e.projectId:"",receivers:e.receivers.replace(/,/gi,"<br/>"),categories:e.receivers,count:e.count,datestart:d,timestart:o,status:x?"\u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e":"\u0437\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e",uuid:e.uuid,success:e.success,report:e.report,delivered:x};t.push(u)})),w(t),D(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[s]),(0,a.useEffect)((function(){var e=setInterval((function(){t(!0)}),1e4);return function(){return clearInterval(e)}}));var he=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(s){var t,c,l,a,d,o,x,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(ue),w(b.filter((function(e){return e.id!==s.id}))),e.next=4,(0,p.YW)(s.id);case 4:return e.next=6,(0,p.Wh)(s.datestart);case 6:return c=e.sent,l=JSON.parse(c.times),a=l.findIndex((function(e){return e.time===s.timestart})),d=JSON.parse(JSON.stringify(l)),o=d[a],d[a]=(0,i.Z)((0,i.Z)({},o),{},(t={},(0,r.Z)(t,"proj",""),(0,r.Z)(t,"save",!1),t)),x=JSON.stringify(d),u={datestart:s.datestart,times:x},e.next=16,(0,p.A0)(u);case 16:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){console.log("users: ",M);var e=M.filter((function(e){var s;return null===(s=e.userfamily+e.username+e.user)||void 0===s?void 0:s.toLowerCase().includes(Q.toLowerCase())}));C(e)}),[Q,M]);return(0,N.jsxs)("div",{className:"dark-theme",children:[(0,N.jsx)(x.S8,{}),(0,N.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-uley",children:[(0,N.jsx)(x.tf,{}),(0,N.jsx)("div",{className:"body flex-grow-1 px-3",children:(0,N.jsx)(o.KB,{lg:!0,children:(0,N.jsx)(a.Suspense,{fallback:(0,N.jsx)(o.LQ,{color:"primary"}),children:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("h2",{children:"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0438"}),(0,N.jsx)(d.rU,{to:"/distributionw_add",children:(0,N.jsx)(o.u5,{color:"primary",size:"lg",children:"\u041d\u043e\u0432\u0430\u044f \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0430"})}),(0,N.jsx)(o.KF,{ref:xe,push:de,placement:"top-end"}),(0,N.jsx)("br",{}),(0,N.jsx)("br",{}),(0,N.jsx)(o.rb,{children:(0,N.jsxs)(o.b7,{xs:!0,children:[(0,N.jsxs)(o.xH,{className:"mb-4",children:[(0,N.jsx)(o.bn,{children:"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0438 \u0434\u043b\u044f \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u043e\u0432"}),(0,N.jsxs)(o.sl,{children:[(0,N.jsx)("br",{}),L?(0,N.jsx)(o.LQ,{}):(0,N.jsxs)(o.Sx,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[(0,N.jsx)(o.V,{className:"table-dark",children:(0,N.jsxs)(o.T6,{children:[(0,N.jsx)(o.is,{className:"text-center",children:"\u0414\u0430\u0442\u0430"}),(0,N.jsx)(o.is,{className:"text-center",children:"\u0412\u0440\u0435\u043c\u044f"}),(0,N.jsx)(o.is,{className:"text-center",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"}),(0,N.jsx)(o.is,{className:"text-center",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,N.jsx)(o.is,{className:"text-center",children:"\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u0438"}),(0,N.jsx)(o.is,{className:"text-center",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,N.jsx)(o.is,{className:"text-center",children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435"})]})}),(0,N.jsx)(o.NR,{children:b.map((function(e,s){return(0,N.jsxs)(o.T6,{"v-for":"item in tableItems",style:{height:"130px"},children:[(0,N.jsx)(o.NN,{className:"text-center",style:{width:"50px"},children:(0,N.jsx)("div",{children:e.datestart})}),(0,N.jsx)(o.NN,{className:"text-center",style:{width:"50px"},children:(0,N.jsx)("div",{children:e.timestart})}),(0,N.jsx)(o.NN,{className:"text-center",children:(0,N.jsx)("div",{children:e.project})}),(0,N.jsx)(o.NN,{className:"text-center",children:(0,N.jsx)("div",{dangerouslySetInnerHTML:{__html:e.receivers}})}),(0,N.jsx)(o.NN,{className:"text-center",onClick:function(){return function(e){console.log(m),z(!0);var s=0,t=0,r=[];JSON.parse(e).map((function(e,i){200===e.status?s++:t++;var n=m.find((function(s){return s.chatId===e.user})),c={user:e.user,status:e.status,userfamily:n.userfamily,username:n.username,categories:n.worklist};r.push(c)})),B(s),te(t),C(r),J(r)}(e.report)},style:{cursor:"pointer"},children:"\u0437\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e"===e.status?(0,N.jsx)("div",{style:{color:"#3887cd"},children:e.count}):(0,N.jsxs)("div",{children:[e.count," | ",e.success?e.success:"0"]})}),(0,N.jsx)(o.NN,{className:"text-center",children:"\u0437\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e"===e.status?(0,N.jsx)("div",{style:{color:"#3887cd"},children:e.status}):(0,N.jsx)("div",{style:{color:"#f5f114"},children:e.status})}),(0,N.jsxs)(o.NN,{className:"text-center",children:[e.projectId?(0,N.jsx)(d.rU,{to:"/distributionw_add",state:{editD:!0,delivered:e.delivered,project:e.projectId,id:e.id,category:e.categories,img:e.image,date:e.datestart,uuid:e.uuid},children:(0,N.jsx)(o.u5,{color:"light",style:{marginRight:"10px"},children:(0,N.jsx)("img",{src:h,alt:"",width:"10px"})})}):(0,N.jsx)(d.rU,{to:"",state:{project:"".concat(E)},children:(0,N.jsx)(o.u5,{color:"light",style:{marginRight:"10px"},children:(0,N.jsx)("img",{src:h,alt:"",width:"10px"})})}),(0,N.jsx)(o.u5,{color:"light",onClick:function(){return he(e)},children:(0,N.jsx)("img",{src:u,alt:"",width:"10px"})})]})]},s)}))})]})]})]}),(0,N.jsxs)(g,{alignment:"center",visible:W,setVisible:z,onClose:function(){return z(!1)},children:[(0,N.jsx)("div",{style:{paddingTop:"25px"},children:(0,N.jsxs)(o.rb,{className:"mb-3",children:[(0,N.jsx)(o.b7,{sm:9,children:(0,N.jsx)("h3",{children:"\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u0438"})}),(0,N.jsx)(o.b7,{sm:3,children:(0,N.jsx)(o.jO,{placeholder:"\u041f\u043e\u0438\u0441\u043a...",onChange:function(e){return X(e.target.value)},"aria-label":"spec"})})]})}),(0,N.jsx)("img",{onClick:function(){return z(!1)},src:y,alt:"",style:{position:"absolute",right:"20px",top:"20px",width:"15px"}}),(0,N.jsxs)(o.sl,{children:[(0,N.jsxs)("p",{style:{display:"flex",justifyContent:"space-between"},children:[(0,N.jsxs)("span",{children:["\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0430: ",A+se]})," ",(0,N.jsxs)("span",{children:["\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e: ",A]})," ",(0,N.jsxs)("span",{children:[" \u041d\u0435 \u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e: ",se]})]}),(0,N.jsxs)("div",{className:"scroll-table",children:[(0,N.jsx)(o.Sx,{align:"middle",className:"mb-0",responsive:!0,style:{color:"#ffffff"},children:(0,N.jsx)(o.V,{className:"table-dark",children:(0,N.jsxs)(o.T6,{children:[(0,N.jsx)(o.is,{scope:"col",style:{width:"45px"},children:"\u2116"}),(0,N.jsx)(o.is,{scope:"col",style:{width:"110px"},children:"TelegramID"}),(0,N.jsx)(o.is,{scope:"col",style:{width:"170px"},children:"\u0424\u0418\u041e"}),(0,N.jsx)(o.is,{scope:"col",style:{width:"180px"},children:"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c"}),(0,N.jsx)(o.is,{scope:"col",style:{width:"100px"},children:"\u0421\u0442\u0430\u0442\u0443\u0441"})]})})}),(0,N.jsx)("div",{className:"scroll-table-body",style:{height:"300px",overflowX:"auto"},children:(0,N.jsx)(o.Sx,{children:(0,N.jsx)(o.NR,{style:{height:"300px",overflowX:"auto"},children:k.map((function(e,s){return(0,N.jsxs)(o.T6,{children:[(0,N.jsx)(o.is,{style:{width:"45px"},scope:"row",children:s<9?"0"+(s+1):s+1}),(0,N.jsx)(o.NN,{style:{width:"110px"},children:e.user}),(0,N.jsxs)(o.NN,{style:{width:"170px"},children:[e.userfamily," ",e.username]}),(0,N.jsxs)(o.NN,{style:{fontSize:"11px",width:"180px"},children:[(0,N.jsx)("div",{onClick:function(){return e=s,console.log(e,ne[e]),void ce((function(s){return(0,i.Z)((0,i.Z)({},s),{},(0,r.Z)({},e,!s[e]))}));var e},style:{cursor:"pointer",paddingLeft:"35px"},children:ne[s]?(0,N.jsx)("br",{}):"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"}),(0,N.jsx)(o.V9,{visible:ne[s],children:(0,N.jsx)("table",{children:(0,N.jsx)("tbody",{children:""!==e.categories?JSON.parse(e.categories).map((function(e,s){return(0,N.jsx)("tr",{children:(0,N.jsx)("td",{children:""!==e.spec?"- "+e.spec:""})},s)})):""})})})]}),(0,N.jsx)(o.NN,{className:"text-center",style:{width:"100px",color:200===e.status?"#7070e7":"red"},children:200===e.status?"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043e":"\u041d\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e"})]},s+1)}))})})})]})]})]})]})})]})})})}),(0,N.jsx)(x.qh,{})]})]})}},9936:function(e,s,t){e.exports=t.p+"static/media/delete.196e3a0746aa2189534d.png"}}]);
//# sourceMappingURL=756.e7654f4b.chunk.js.map