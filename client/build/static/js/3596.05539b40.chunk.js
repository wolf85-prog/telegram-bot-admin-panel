"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[3596,1321,8532,1165,3437,3214],{54315:(e,s,t)=>{t.d(s,{Z:()=>l});t(72791);const l=t.p+"static/media/close.292280e2a4c33572fa44d4be444aac11.svg"},5677:(e,s,t)=>{t.d(s,{Z:()=>a});t(72791);const l="MyModal_myModal__PMGvr",i="MyModal_myModalContent__SsdJo",c="MyModal_active__-NfGc";var r=t(80184);const a=e=>{let{children:s,visible:t,setVisible:a}=e;const n=[l];return t&&n.push(c),(0,r.jsx)("div",{className:n.join(" "),onClick:()=>a(!1),children:(0,r.jsx)("div",{className:i,onClick:e=>e.stopPropagation(),children:s})})}},93437:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var l=t(72791),i=t(11087),c=t(78983),r=t(10935),a=t(9936),n=t(26213),d=t(69835),x=t(5677),h=t(54315),o=t(80184);const j=()=>{const{users:e}=(0,n.Z)(),[s,t]=(0,l.useState)([]),[j,m]=(0,l.useState)(!0),[p,u]=(0,l.useState)(!1),[N,g]=(0,l.useState)([]),[v,b]=(0,l.useState)(0),[y,f]=(0,l.useState)(0);(0,l.useEffect)((()=>{(async()=>{let e=await(0,d.$J)(),s="",l=0;const i=[];e.map(((e,t)=>{l=0,JSON.parse(e.receivers).map((e=>{s=e.label+" ",200===e.status&&(l+=1)}));const c=new Date(e.createdAt),r=c.getFullYear(),a=String(c.getMonth()+1).padStart(2,"0"),n=String(c.getDate()).padStart(2,"0"),d=c.getHours(),x=String(c.getMinutes()).padStart(2,"0"),h="".concat(n,".").concat(a,".").concat(r," ").concat(d,":").concat(x),o={id:e.id,name:e.name,text:e.text,image:""!==e.image.split("5000/")[1]?e.image:"",button:e.button,receivers:l,datestart:h,status:e.delivered?"\u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e":"\u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e",count:JSON.parse(e.receivers).length,users:JSON.parse(e.receivers)};i.push(o)})),t(i),m(!1)})()}),[]);return(0,o.jsxs)("div",{className:"dark-theme",children:[(0,o.jsx)(r.S8,{}),(0,o.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-uley",children:[(0,o.jsx)(r.tf,{}),(0,o.jsx)("div",{className:"body flex-grow-1 px-3",children:(0,o.jsx)(c.KB,{lg:!0,children:(0,o.jsx)(l.Suspense,{fallback:(0,o.jsx)(c.LQ,{color:"primary"}),children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{children:"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0438"}),(0,o.jsx)(i.rU,{to:"/distribution_add",children:(0,o.jsx)(c.u5,{color:"primary",size:"lg",children:"\u041d\u043e\u0432\u0430\u044f \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0430"})}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)(c.rb,{children:(0,o.jsxs)(c.b7,{xs:!0,children:[(0,o.jsxs)(c.xH,{className:"mb-4",children:[(0,o.jsx)(c.bn,{children:"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0438"}),(0,o.jsxs)(c.sl,{children:[(0,o.jsx)("br",{}),j?(0,o.jsx)(c.LQ,{}):(0,o.jsxs)(c.Sx,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[(0,o.jsx)(c.V,{className:"table-dark",children:(0,o.jsxs)(c.T6,{children:[(0,o.jsx)(c.is,{className:"text-center",children:"\u0414\u0430\u0442\u0430"}),(0,o.jsx)(c.is,{className:"text-center",children:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"}),(0,o.jsx)(c.is,{className:"text-center",children:"\u041a\u043d\u043e\u043f\u043a\u0430"}),(0,o.jsx)(c.is,{className:"text-center",children:"\u0422\u0435\u043a\u0441\u0442"}),(0,o.jsx)(c.is,{className:"text-center",children:"\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u0438"}),(0,o.jsx)(c.is,{className:"text-center",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,o.jsx)(c.is,{className:"text-center",children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435"})]})}),(0,o.jsx)(c.NR,{children:s.map(((l,i)=>(0,o.jsxs)(c.T6,{"v-for":"item in tableItems",children:[(0,o.jsx)(c.NN,{className:"text-center",children:(0,o.jsx)("div",{children:l.datestart})}),(0,o.jsx)(c.NN,{className:"text-center",children:l.image.endsWith(".pdf")?(0,o.jsx)("iframe",{src:l.image,height:"120px",width:"200px",title:"myFramePdf"}):(0,o.jsx)("div",{children:l.image?(0,o.jsx)("a",{href:l.image,target:"_blank",rel:"noreferrer",children:(0,o.jsx)("img",{src:l.image,alt:"",width:230,height:120,style:{objectFit:"contain"}})}):""})}),(0,o.jsx)(c.NN,{className:"text-center",children:(0,o.jsx)("div",{children:l.button})}),(0,o.jsx)(c.NN,{className:"text-center",style:{width:"50px"},children:(0,o.jsx)("div",{children:l.text})}),(0,o.jsx)(c.NN,{className:"text-center",onClick:()=>(s=>{console.log("users: ",e),console.log("users2: ",s),u(!0);let t=0,l=0,i=[];s.map(((s,c)=>{200===s.status?t++:l++;const r=e.find((e=>e.chatId===s.value)),a={user:s.value,status:s.status,userfamily:null===r||void 0===r?void 0:r.name,username:""};i.push(a)})),b(t),f(l),g(i)})(l.users),children:(0,o.jsxs)("div",{children:[l.count," | ",l.receivers]})}),(0,o.jsx)(c.NN,{className:"text-center",children:(0,o.jsx)("div",{children:l.status})}),(0,o.jsx)(c.NN,{className:"text-center",children:(0,o.jsx)(c.u5,{color:"light",onClick:()=>(async e=>{t(s.filter((s=>s.id!==e.id))),await(0,d.vo)(e.id)})(l),children:(0,o.jsx)("img",{src:a,alt:"",width:"10px"})})})]},i)))})]})]})]}),(0,o.jsxs)(x.Z,{alignment:"center",visible:p,setVisible:u,onClose:()=>u(!1),children:[(0,o.jsx)("div",{style:{paddingTop:"25px"},children:(0,o.jsx)(c.rb,{className:"mb-3",children:(0,o.jsx)(c.b7,{sm:9,children:(0,o.jsx)("h3",{children:"\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u0438"})})})}),(0,o.jsx)("img",{onClick:()=>u(!1),src:h.Z,alt:"",style:{position:"absolute",right:"20px",top:"20px",width:"15px"}}),(0,o.jsxs)(c.sl,{children:[(0,o.jsxs)("p",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsxs)("span",{children:["\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0430: ",v+y]})," ",(0,o.jsxs)("span",{children:["\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e: ",v]})," ",(0,o.jsxs)("span",{children:[" \u041d\u0435 \u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e: ",y]})]}),(0,o.jsxs)("div",{className:"scroll-table",children:[(0,o.jsx)(c.Sx,{align:"middle",className:"mb-0",responsive:!0,style:{color:"#ffffff"},children:(0,o.jsx)(c.V,{className:"table-dark",children:(0,o.jsxs)(c.T6,{children:[(0,o.jsx)(c.is,{scope:"col",style:{width:"45px"},children:"\u2116"}),(0,o.jsx)(c.is,{scope:"col",style:{width:"110px"},children:"TelegramID"}),(0,o.jsx)(c.is,{scope:"col",style:{width:"170px"},children:"\u0424\u0418\u041e"}),(0,o.jsx)(c.is,{scope:"col",style:{width:"100px"},children:"\u0421\u0442\u0430\u0442\u0443\u0441"})]})})}),(0,o.jsx)("div",{className:"scroll-table-body",style:{height:"300px",overflowX:"auto"},children:(0,o.jsx)(c.Sx,{children:(0,o.jsx)(c.NR,{style:{height:"300px",overflowX:"auto"},children:N.map(((e,s)=>(0,o.jsxs)(c.T6,{children:[(0,o.jsx)(c.is,{style:{width:"45px"},scope:"row",children:s<9?"0"+(s+1):s+1}),(0,o.jsx)(c.NN,{style:{width:"110px"},children:e.user}),(0,o.jsxs)(c.NN,{style:{width:"170px"},children:[e.userfamily," ",e.username]}),(0,o.jsx)(c.NN,{className:"text-center",style:{width:"100px",color:200===e.status?"#7070e7":"red"},children:200===e.status?"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043e":"\u041d\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e"})]},s+1)))})})})]})]})]})]})})]})})})}),(0,o.jsx)(r.qh,{})]})]})}},9936:(e,s,t)=>{e.exports=t.p+"static/media/delete.c717e72a516ce28e53c7.png"}}]);
//# sourceMappingURL=3596.05539b40.chunk.js.map