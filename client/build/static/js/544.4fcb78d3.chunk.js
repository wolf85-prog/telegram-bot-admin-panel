"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[544,604],{29604:function(e,a,s){s.r(a),s.d(a,{default:function(){return z}});var t=s(72791),n=s(78983),c=s(6665),i=(s(41167),s(82755),s(52036)),r=s(93433),o=s(29439),l=s(57689),d=s(75421),h=s(36223),m=s(74165),u=s(15861),_=s(11087),p=s(48463),x=s(64941),j=s(27839),f=s(79975),v=s(80184),g=function(e){var a=e.contact,s=(0,t.useContext)(x.w).setPerson,n=(0,f.Z)(),c=n.setUserWorkerAsUnread,i=n.setCountMessageWork,o=function(){var e=(0,u.Z)((0,m.Z)().mark((function e(){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({name:a.name,id:a.chatId,avatar:a.avatar}),c(a.chatId),i(0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e,s=Object.keys(a.messages);e=0!==s.length?s[s.length-1]:"2000-01-01";var t=[];if("{}"!==JSON.stringify(a.messages)&&(t=(0,r.Z)(a.messages[e])),t.length)return t.pop();return""}();return(0,v.jsxs)(_.rU,{className:"sidebar-contact",onClick:function(){return o()},children:[(0,v.jsx)("div",{className:"sidebar-contact__avatar-wrapper",children:a.avatar?(0,v.jsx)("img",{src:"".concat("https://proj.uley.team:5000/").concat(a.avatar),alt:"",className:"avatar-adm"}):(0,v.jsx)("img",{src:j,alt:"",className:"avatar-adm"})}),(0,v.jsxs)("div",{className:"sidebar-contact__content",children:[(0,v.jsxs)("div",{className:"sidebar-contact__top-content",children:[(0,v.jsxs)("h2",{className:"sidebar-contact__name",children:[" ",a.name]}),(0,v.jsx)("span",{className:"sidebar-contact__time",children:""===l?"":(0,p.Z)(l.time)})]}),(0,v.jsxs)("div",{className:"sidebar-contact__bottom-content",children:[(0,v.jsxs)("p",{className:"sidebar-contact__message-wrapper",children:[l.status&&(0,v.jsx)(h.Z,{id:"sent"===(null===l||void 0===l?void 0:l.status)?"singleTick":"doubleTick","aria-label":null===l||void 0===l?void 0:l.status,className:"sidebar-contact__message-icon ".concat("read"===(null===l||void 0===l?void 0:l.status)?"sidebar-contact__message-icon--blue":"")}),(0,v.jsx)("span",{className:"sidebar-contact__message ".concat(a.unread?"sidebar-contact__message--unread":""),children:a.typing?(0,v.jsx)("i",{children:" \u043f\u0435\u0447\u0430\u0442\u0430\u0435\u0442..."}):null===l||void 0===l?void 0:l.content})]}),(0,v.jsxs)("div",{className:"sidebar-contact__icons",children:[a.pinned&&(0,v.jsx)(h.Z,{id:"pinned",className:"sidebar-contact__icon"}),!!a.unread&&(0,v.jsx)("span",{className:"sidebar-contact__unread",children:a.unread}),(0,v.jsx)("button",{"aria-label":"sidebar-contact__btn",children:(0,v.jsx)(h.Z,{id:"downArrow",className:"sidebar-contact__icon sidebar-contact__icon--dropdown"})})]})]})]})]})},b=s(30549),N=function(){var e=(0,f.Z)().userWorkers,a=(0,t.useState)([]),s=(0,o.Z)(a,2),n=s[0],c=s[1],i=(0,t.useState)(""),m=(0,o.Z)(i,2),u=m[0],_=m[1],p=(0,l.s0)();(0,t.useEffect)((function(){console.log("sidebar contacts: ",e);var a=(0,r.Z)(e).sort((function(e,a){var s=new Date(e.date);return new Date(a.date)-s}));c(a)}),[e]),(0,t.useEffect)((function(){var a=e.filter((function(e){return e.name.toLowerCase().includes(u.toLowerCase())}));c(a)}),[u]);return(0,v.jsxs)("aside",{className:"sidebarB",children:[(0,v.jsxs)("header",{className:"headerB",children:[(0,v.jsx)("div",{className:"sidebar__avatar-wrapper",children:(0,v.jsx)("img",{src:d,alt:"U.L.E.Y",className:"avatar-adm"})}),(0,v.jsx)("div",{className:"sidebar__actions",children:(0,v.jsx)(b.Z,{className:"sidebar__action",ariaLabel:"Menu",iconId:"menu",iconClassName:"sidebar__action-icon",onSelected:function(e){switch(e){case 0:console.log("\u041f\u0440\u043e\u0444\u0438\u043b\u044c");break;case 1:console.log("1");break;case 4:p("/dashboard");break;default:console.log("\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435")}},options:["\u041f\u0440\u043e\u0444\u0438\u043b\u044c"]})})]}),(0,v.jsxs)("div",{className:"search-wrapper",children:[(0,v.jsxs)("div",{className:"search-icons",children:[(0,v.jsx)(h.Z,{id:"search",className:"search-icon"}),(0,v.jsx)("button",{className:"search__back-btn",children:(0,v.jsx)(h.Z,{id:"back"})})]}),(0,v.jsx)("input",{className:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430",onChange:function(e){return _(e.target.value)}})]}),(0,v.jsx)("div",{className:"sidebar__contacts",children:n.map((function(e){return"1775583141"!==e.chatId&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(g,{contact:e})})}))})]})},w=s(45987),k=s(30888),Z=["id"],y=k.Z,S=function(e){var a=e.id,s=(0,w.Z)(e,Z),t=y[a];return t?t(s):null},C=[{icon:"recent",label:"Recent emojis",active:!0},{icon:"emojiPeople",label:"People emojis",active:!1},{icon:"emojiNature",label:"Nature emojis",active:!1},{icon:"emojiFood",label:"Food emojis",active:!1},{icon:"emojiActivity",label:"Activity emojis",active:!1},{icon:"emojiTravel",label:"Travel emojis",active:!1},{icon:"emojiObjects",label:"Object emojis",active:!1},{icon:"emojiSymbols",label:"Symbol emojis",active:!1},{icon:"emojiFlags",label:"Flag emojis",active:!1}],I=function(e){var a=e.showEmojis;e.newMessage,e.setNewMessage;return(0,v.jsxs)("div",{className:"emojis__wrapper ".concat(a?"emojis__wrapper--active":""),children:[(0,v.jsx)("div",{className:"emojis__tabs",children:C.map((function(e){return(0,v.jsx)("div",{className:"emojis__tab ".concat(e.active?"emojis__tab--active":""),children:(0,v.jsx)("button",{"aria-label":e.label,children:(0,v.jsx)(S,{id:e.icon,className:"emojis__tab-icon"})},e.icon)},e.label)}))}),(0,v.jsxs)("div",{className:"emojis__content",children:[(0,v.jsx)("input",{className:"emojis__search",placeholder:"Search Emoji"}),(0,v.jsxs)("h4",{className:"emojis__label",children:[" Smileys ","&"," People "]}),(0,v.jsx)("div",{className:"emojis__grid",children:new Array(6).fill(null).map((function(e,a){return new Array(11).fill(null).map((function(e,s){return(0,v.jsx)("div",{role:"img","aria-label":"emoji",className:"emoji emojis__emoji",style:{backgroundPositionX:-3-44.2*s,backgroundPositionY:-6-52*a}},"".concat(a,"-").concat(s))}))}))}),(0,v.jsxs)("h4",{className:"emojis__label",children:[" Animals ","&"," Nature "]}),(0,v.jsx)("div",{className:"emojis__grid",children:new Array(6).fill(null).map((function(e,a){return new Array(11).fill(null).map((function(e,s){return(0,v.jsx)("div",{role:"img","aria-label":"emoji",className:"emoji emojis__emoji",style:{backgroundPositionX:-3-44.2*s,backgroundPositionY:-6-52*a}},"".concat(a,"-").concat(s))}))}))})]})]})},A=function(e,a){(0,t.useEffect)((function(){if(e){e.style.height="0px";var a=e.scrollHeight-40;e.style.height=a+"px"}}),[e,a])},M=[{icon:"attachDocument",label:"Choose document",click:"doc"},{icon:"attachImage",label:"Choose image",click:"image"}],F=function(e){var a=e.showAttach,s=e.setShowAttach,n=e.showEmojis,c=e.setShowEmojis,i=e.mess,r=e.setMess,o=e.submitNewMessage,l=e.onFileChange,d=(0,t.useRef)(null);A(d.current,i);return(0,v.jsxs)("div",{className:"chat__input-wrapper",children:[n&&(0,v.jsx)("button",{"aria-label":"Close emojis",onClick:function(){return c(!1)},children:(0,v.jsx)(S,{id:"cancel",className:"chat__input-icon"})}),(0,v.jsx)("button",{"aria-label":"Emojis",onClick:function(){return c(!0)},children:(0,v.jsx)(S,{id:"smiley",className:"chat__input-icon ".concat(n?"chat__input-icon--highlight":"")})}),n&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{"aria-label":"Choose GIF",children:(0,v.jsx)(S,{id:"gif",className:"chat__input-icon"})}),(0,v.jsx)("button",{"aria-label":"Choose sticker",children:(0,v.jsx)(S,{id:"sticker",className:"chat__input-icon"})})]}),(0,v.jsxs)("div",{className:"pos-rel",children:[(0,v.jsx)("button",{"aria-label":"Attach",onClick:function(){return s(!a)},children:(0,v.jsx)(S,{id:"attach",className:"chat__input-icon ".concat(a?"chat__input-icon--pressed":"")})}),(0,v.jsx)("div",{className:"chat__attach ".concat(a?"chat__attach--active":""),children:M.map((function(e){return(0,v.jsxs)("button",{className:"chat__attach-btn","aria-label":e.label,children:[(0,v.jsx)("label",{htmlFor:"fileInput",children:(0,v.jsx)(S,{id:e.icon,className:"chat__attach-icon"})}),(0,v.jsx)("input",{type:"file",id:"fileInput",name:"photo",style:{display:"none"},onChange:function(e){return l(e)}})]},e.label)}))})]}),(0,v.jsx)("textarea",{className:"chat__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",value:i,onChange:function(e){console.log(e.target.value),r(e.target.value)},ref:d,rows:1}),(0,v.jsx)("button",{"aria-label":"Send message",onClick:o,children:(0,v.jsx)(S,{id:"send",className:"chat__input-icon"})})]})},E=s(1413),P=["msgId","className","iconId","iconClassName","ariaLabel","options","position","showPressed","onSelected"],T=function(e){var a=e.msgId,s=e.className,n=e.iconId,c=e.iconClassName,i=e.ariaLabel,r=e.options,l=void 0===r?[]:r,d=e.position,h=void 0===d?"left":d,m=e.showPressed,u=void 0===m||m,_=e.onSelected,p=(0,w.Z)(e,P),x=(0,t.useState)(!1),j=(0,o.Z)(x,2),f=j[0],g=j[1];return(0,v.jsxs)("div",{className:"pos-rel",children:[(0,v.jsx)("button",(0,E.Z)((0,E.Z)({"aria-label":i,className:"options-btn ".concat(f&&u?"options-btn--pressed":""," ").concat(s||""),onClick:function(){return g(!f)}},p),{},{children:(0,v.jsx)(S,{id:n,className:c})})),(0,v.jsx)("ul",{className:"options-btn__options ".concat(f?"options-btn__options--active":""," ").concat("right"===h?"options-btn__options--right":""),children:l.map((function(e,s){return(0,v.jsx)("li",{className:"options-btn__option",onClick:function(){return _(s,a)},children:e},s)}))})]})},L=function(e){var a=e.user,s=e.openProfileSidebar,t=e.openSearchSidebar;return(0,v.jsxs)("header",{className:"headerB chat__header",children:[(0,v.jsx)("div",{className:"chat__avatar-wrapper",onClick:s,children:a.avatar?(0,v.jsx)("img",{src:"".concat("https://proj.uley.team:5000/").concat(a.avatar),alt:null===a||void 0===a?void 0:a.name,className:"avatar-adm"}):(0,v.jsx)("img",{src:j,alt:null===a||void 0===a?void 0:a.name,className:"avatar-adm"})}),(0,v.jsxs)("div",{className:"chat__contact-wrapper",onClick:s,children:[(0,v.jsxs)("h2",{className:"chat__contact-name",children:[" ",null===a||void 0===a?void 0:a.name]}),(0,v.jsx)("p",{className:"chat__contact-desc",children:a.typing?"\u043f\u0435\u0447\u0430\u0442\u0430\u0435\u0442...":"\u0434\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430"})]}),(0,v.jsxs)("div",{className:"chat__actions",children:[(0,v.jsx)("button",{className:"chat__action","aria-label":"Search",onClick:t,children:(0,v.jsx)(S,{id:"search",className:"chat__action-icon chat__action-icon--search"})}),(0,v.jsx)(T,{className:"chat__action",ariaLabel:"Menu",iconId:"menu",iconClassName:"chat__action-icon",onSelected:function(e){switch(e){case 0:s();break;case 1:console.log("1");break;default:console.log("\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435")}},options:["\u0414\u0430\u043d\u043d\u044b\u0435 \u043e \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435","\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u043a\u0443","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0447\u0430\u0442"]})]})]})},O=function(e){var a=e.active,s=e.closeSidebar,t=e.heading,n=e.children;return(0,v.jsxs)("aside",{className:"chat-sidebar ".concat(a?"chat-sidebar--active":""),children:[(0,v.jsxs)("header",{className:"header chat-sidebar__header",children:[(0,v.jsx)("button",{onClick:s,children:(0,v.jsx)(S,{id:"cancel",className:"chat-sidebar__header-icon"})}),(0,v.jsxs)("h2",{className:"chat-sidebar__heading",children:[" ",t]})]}),(0,v.jsx)("div",{className:"chat-sidebar__content",children:n})]})},D=function(){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"search-wrapper",children:[(0,v.jsxs)("div",{className:"search-icons",children:[(0,v.jsx)(S,{id:"search",className:"search-icon"}),(0,v.jsx)("button",{className:"search__back-btn",children:(0,v.jsx)(S,{id:"back"})})]}),(0,v.jsx)("input",{className:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a..."})]}),(0,v.jsx)("div",{className:"chat-sidebar__search-results",children:(0,v.jsx)("p",{children:" \u041f\u043e\u0438\u0441\u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0432 \u0447\u0430\u0442\u0435"})})]})},W=s(50882),R=function(e){var a=e.inputProps;return(0,v.jsxs)("div",{className:"checkbox",children:[(0,v.jsx)("input",(0,E.Z)((0,E.Z)({type:"checkbox",id:"checkbox"},a),{},{className:"checkbox__input"})),(0,v.jsx)("label",{htmlFor:"checkbox",className:"checkbox__label",children:(0,v.jsx)(S,{id:"check",className:"checkbox__icon"})})]})},B=s(94810),J=function(e){var a=e.user,s=(0,t.useState)(""),n=(0,o.Z)(s,2),c=n[0],i=n[1],r=(0,t.useState)(!1),l=(0,o.Z)(r,2),d=l[0],h=l[1],_=(0,f.Z)(),p=_.addNewName,g=_.addNewAvatar,b=(0,t.useContext)(x.w).setPerson,N=(0,t.useState)(null),w=(0,o.Z)(N,2),k=w[0],Z=w[1],y=(0,t.useState)(!1),C=(0,o.Z)(y,2),I=C[0],A=C[1],M=t.useRef(),F="https://proj.uley.team:5000/";(0,t.useEffect)((function(){Z("".concat(F).concat(a.avatar))}),[a]);var E=function(){var e=(0,u.Z)((0,m.Z)().mark((function e(){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b({name:a.name,id:a.chatId,avatar:a.avatar});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,u.Z)((0,m.Z)().mark((function e(s){var t;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),t={username:c},e.next=4,(0,B.mP)(t,a.chatId);case 4:p(a.chatId,c),E(),h(!1);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),T=function(){var e=(0,u.Z)((0,m.Z)().mark((function e(a){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),Z(a.target.files[0]),A(!0);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),L=t.useCallback((0,u.Z)((0,m.Z)().mark((function e(){var s,t,n;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(s=new FormData).append("photo",k),e.next=5,(0,B.cT)(s);case 5:return t=e.sent,n={avatar:t.data.path},e.next=9,(0,B.MB)(n,a.chatId);case 9:g(a.chatId,t.data.path),E(),A(!1),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])}))),[k]);return(0,v.jsxs)("div",{className:"profile",children:[(0,v.jsxs)("div",{className:"profile__section profile__section--personal",children:[(0,v.jsxs)("div",{className:"profile__avatar-wrapper upload",children:[a.avatar?(0,v.jsx)("img",{src:"".concat(F).concat(a.avatar),alt:null===a||void 0===a?void 0:a.name,className:"avatar-adm"}):(0,v.jsx)("img",{src:j,alt:null===a||void 0===a?void 0:a.name,className:"avatar-adm"}),(0,v.jsxs)("div",{className:"round_adm",children:[(0,v.jsx)("input",{type:"file",name:"photo",onChange:T}),(0,v.jsx)("i",{className:"fa fa-camera",style:{color:"#fff"}})]})]}),I?(0,v.jsx)("button",{className:"btn_save",onClick:L,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}):"",(0,v.jsx)("p",{style:{color:"#d5d5d5"},children:a.chatId}),d?(0,v.jsxs)("form",{onSubmit:P,children:[(0,v.jsx)("input",{type:"text",value:c,onChange:function(e){e.preventDefault(),i(e.target.value)},ref:M,onFocus:function(){return M.current.select()},style:{borderBottom:"1px solid #0e892e",color:"#d5d5d5"}}),(0,v.jsx)("input",{type:"submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",style:{color:"#6a6a6a"}})]}):(0,v.jsxs)("h2",{className:"profile__name",children:[" ",a.name," "]}),d?"":(0,v.jsx)("span",{onClick:function(){i(a.name),h(!0)},style:{cursor:"pointer",color:"#6a6a6a"},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]}),(0,v.jsxs)("div",{className:"profile__section profile__section--media",children:[(0,v.jsxs)("div",{className:"sb profile__heading-wrapper",children:[(0,v.jsx)("h2",{className:"profile__heading",children:" \u041c\u0435\u0434\u0438\u0430, \u0441\u0441\u044b\u043b\u043a\u0438 \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b "}),(0,v.jsx)("button",{children:(0,v.jsx)(S,{id:"rightArrow",className:"profile__heading-icon"})})]}),(0,v.jsxs)("div",{className:"profile__media-wrapper",children:[(0,v.jsx)("img",{src:W,alt:"media",className:"profile__media"}),(0,v.jsx)("img",{src:W,alt:"media",className:"profile__media"}),(0,v.jsx)("img",{src:W,alt:"media",className:"profile__media"})]})]}),(0,v.jsxs)("ul",{className:"profile__section profile__section--actions",children:[(0,v.jsxs)("li",{className:"profile__action",children:[(0,v.jsx)("p",{className:"profile__action-left",children:(0,v.jsx)("span",{className:"profile__action-text profile__action-text--top",children:"\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"})}),(0,v.jsx)("div",{className:"profile__action-right",children:(0,v.jsx)(R,{})})]}),(0,v.jsxs)("li",{className:"profile__action",children:[(0,v.jsx)("p",{className:"profile__action-left",children:(0,v.jsx)("span",{className:"profile__action-text profile__action-text--top",children:"\u041e\u0442\u043c\u0435\u0447\u0435\u043d\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"})}),(0,v.jsx)("button",{className:"profile__action-right",children:(0,v.jsx)(S,{id:"rightArrow",className:"profile__heading-icon"})})]}),(0,v.jsxs)("li",{className:"profile__action",children:[(0,v.jsxs)("p",{className:"profile__action-left",children:[(0,v.jsx)("span",{className:"profile__action-text profile__action-text--top",children:"\u0418\u0441\u0447\u0435\u0437\u0430\u044e\u0449\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}),(0,v.jsx)("span",{className:"profile__action-text profile__action-text--bottom",children:"Off"})]}),(0,v.jsxs)("button",{className:"profile__action-right",children:[(0,v.jsx)(S,{id:"rightArrow",className:"profile__heading-icon"})," "]})]})]}),(0,v.jsxs)("div",{className:"profile__section profile__section--about",children:[(0,v.jsx)("div",{className:"sb profile__heading-wrapper",children:(0,v.jsx)("h2",{className:"profile__heading",children:" \u041e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u0438 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 "})}),(0,v.jsxs)("ul",{children:[(0,v.jsx)("li",{className:"profile__about-item",children:"\u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0432 \u043e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438..."}),(0,v.jsx)("li",{className:"profile__about-item",children:"+7 123-12-12"})]})]}),(0,v.jsxs)("div",{className:"profile__section profile__section--danger",children:[(0,v.jsx)(S,{id:"block",className:"profile__danger-icon"}),(0,v.jsx)("p",{className:"profile__danger-text",children:" \u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c "})]}),(0,v.jsxs)("div",{className:"profile__section profile__section--danger",children:[(0,v.jsx)(S,{id:"thumbsDown",className:"profile__danger-icon"}),(0,v.jsx)("p",{className:"profile__danger-text",children:" \u0421\u043e\u043e\u0431\u0449\u0438\u0442\u044c \u043e \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435 "})]}),(0,v.jsxs)("div",{className:"profile__section profile__section--danger",children:[(0,v.jsx)(S,{id:"delete",className:"profile__danger-icon"}),(0,v.jsx)("p",{className:"profile__danger-text",children:" \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0447\u0430\u0442 "})]})]})},U=s(69018),K=s(97144),X=function(e){var a=e.lastMsgRef,s=e.messages,n=(0,t.useContext)(x.w).person,c=Object.keys(s),i="1775583141",r=(0,f.Z)().delMessageContext,l=t.forwardRef((function(e,a){var s=e.children,t=e.onClick;return(0,v.jsxs)("button",{"aria-label":"Message options",className:"chat__msg-options",ref:a,onClick:function(e){e.preventDefault(),t(e)},children:[s,(0,v.jsx)(S,{id:"downArrow",className:"chat__msg-options-icon"})]})}));l.displayName="Search";var d=t.forwardRef((function(e,a){var s=e.children,n=(e.style,e.className),c=e["aria-labelledby"],i=(0,t.useState)(""),r=(0,o.Z)(i,2),l=r[0];r[1];return(0,v.jsx)("div",{ref:a,style:{backgroundColor:"#20272b"},className:n,"aria-labelledby":c,children:(0,v.jsx)("ul",{className:"list-unstyled",children:t.Children.toArray(s).filter((function(e){return!l||e.props.children.toLowerCase().startsWith(l)}))})})}));d.displayName=d;var h=function(){var e=(0,u.Z)((0,m.Z)().mark((function e(a){var s,t,c;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=JSON.parse(a),console.log("id:",s.id),r(s.id,s.date,s.chatId),(0,B.Kp)(s.id),t="https://api.telegram.org/bot".concat("5836103512:AAFoXHwI8PsQ6_xeqcx0IawMbc7njLwJydQ","/deleteMessage?chat_id=").concat(n.id,"&message_id=").concat(s.id),e.next=7,U.y_.get(t);case 7:c=e.sent,console.log("\u0423\u0434\u0430\u043b\u044f\u0435\u043c\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435: ",s.id),console.log("\u0414\u0430\u0442\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f: ",s.date),c?console.log("\u0412\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e \u0438\u0437 \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c! ",c):console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.");case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return c.map((function(e,t){var r=s[e];return(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"chat__date-wrapper",children:(0,v.jsxs)("span",{className:"chat__date",children:[" ",e]})}),0===t&&(0,v.jsxs)("p",{className:"chat__encryption-msg",children:[(0,v.jsx)(S,{id:"lock",className:"chat__encryption-icon"}),"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0448\u0438\u0444\u0440\u0443\u044e\u0442\u0441\u044f \u0441\u043a\u0432\u043e\u0437\u043d\u044b\u043c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c. \u041d\u0438\u043a\u0442\u043e \u0437\u0430 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u043c\u0438 \u044d\u0442\u043e\u0433\u043e \u0447\u0430\u0442\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0447\u0438\u0442\u0430\u0442\u044c \u0438\u043b\u0438 \u0441\u043b\u0443\u0448\u0430\u0442\u044c \u0438\u0445"]}),(0,v.jsx)("div",{className:"chat__msg-group",children:r.map((function(e,s){var o,m,u=function(){return t===c.length-1&&s===r.length-1?a:void 0};return(0,v.jsx)(v.Fragment,{children:e.image?(0,v.jsxs)("div",{className:"chat__msg chat__img-wrapper ".concat(e.sender!==i?"chat__msg--rxd":"chat__msg--sent"),ref:u(),children:[e.content.endsWith(".pdf")?(0,v.jsx)("figure",{children:(0,v.jsx)("iframe",{src:e.content,height:"235px",width:"100%",title:"myFramePdf"})}):(0,v.jsxs)("figure",{children:[(0,v.jsx)("a",{href:e.content,target:"_blank",rel:"noreferrer",children:(0,v.jsx)("img",{src:e.content,alt:"",className:"chat__img"})}),(0,v.jsx)("figcaption",{style:{textAlign:"center",backgroundColor:"#607a7a",borderRadius:"5px"},children:e.descript})]}),(0,v.jsxs)("span",{className:"chat__msg-footer",children:[(0,v.jsx)("span",{children:(0,p.Z)(e.time)}),!e.sender&&(0,v.jsx)(S,{id:"sent"===(null===e||void 0===e?void 0:e.status)?"singleTick":"doubleTick","aria-label":null===e||void 0===e?void 0:e.status,className:"chat__msg-status-icon ".concat("read"===(null===e||void 0===e?void 0:e.status)?"chat__msg-status-icon--blue":"")})]}),(0,v.jsxs)(K.Z,{onSelect:h,children:[(0,v.jsx)(K.Z.Toggle,{as:l,id:"dropdown-custom-components"}),(0,v.jsx)(K.Z.Menu,{as:d,children:(0,v.jsx)(K.Z.Item,{eventKey:JSON.stringify({id:e.id,date:e.date,chatId:n.id}),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})]})]}):e.sender!==i?(0,v.jsxs)("p",{className:"chat__msg chat__msg--rxd",ref:u(),children:[(0,v.jsx)("span",{children:null!==(o=e.content)&&void 0!==o&&o.startsWith("http")?(0,v.jsx)("a",{className:"chat__href",href:e.content,target:"_blank",rel:"noreferrer",children:e.content}):e.content}),(0,v.jsx)("span",{className:"chat__msg-filler",children:" "}),(0,v.jsx)("span",{className:"chat__msg-footer",children:(0,p.Z)(e.time)}),(0,v.jsxs)(K.Z,{onSelect:h,children:[(0,v.jsx)(K.Z.Toggle,{as:l,id:"dropdown-custom-components"}),(0,v.jsx)(K.Z.Menu,{as:d,children:(0,v.jsx)(K.Z.Item,{eventKey:JSON.stringify({id:e.id,date:e.date,chatId:n.id}),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})]})]}):(0,v.jsxs)("p",{className:"chat__msg chat__msg--sent",ref:u(),children:[(0,v.jsx)("span",{children:null!==(m=e.content)&&void 0!==m&&m.startsWith("http")?(0,v.jsx)("a",{className:"chat__href",href:e.content,target:"_blank",rel:"noreferrer",children:e.content}):e.content}),(0,v.jsx)("span",{className:"chat__msg-filler",children:" "}),(0,v.jsxs)("span",{className:"chat__msg-footer",children:[(0,v.jsxs)("span",{children:[" ",(0,p.Z)(e.time)," "]}),(0,v.jsx)(S,{id:"sent"===(null===e||void 0===e?void 0:e.status)?"singleTick":"doubleTick","aria-label":null===e||void 0===e?void 0:e.status,className:"chat__msg-status-icon ".concat("read"===(null===e||void 0===e?void 0:e.status)?"chat__msg-status-icon--blue":"")})]}),(0,v.jsxs)(K.Z,{onSelect:h,children:[(0,v.jsx)(K.Z.Toggle,{as:l,id:"dropdown-custom-components"}),(0,v.jsx)(K.Z.Menu,{as:d,children:(0,v.jsx)(K.Z.Item,{eventKey:JSON.stringify({id:e.id,date:e.date,chatId:n.id}),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})]})]})})}))})]},t)}))},Y=s(75749),q=s(23353),G="1775583141",H="https://proj.uley.team:5000/",Q=function(){var e=(0,f.Z)(),a=e.userWorkers,s=e.setUserAsUnread,n=e.addNewMessage2,c=(0,t.useContext)(x.w).person,i=(0,f.Z)().setCountMessage,r=c.id,l=a.filter((function(e){return e.chatId===r.toString()}))[0],d=(0,t.useRef)(null),h=(0,t.useState)(!1),_=(0,o.Z)(h,2),p=_[0],j=_[1],g=(0,t.useState)(!1),b=(0,o.Z)(g,2),N=b[0],w=b[1],k=(0,t.useState)(!1),Z=(0,o.Z)(k,2),y=Z[0],C=Z[1],A=(0,t.useState)(!1),M=(0,o.Z)(A,2),E=M[0],P=M[1],T=(0,t.useState)(),W=(0,o.Z)(T,2),R=W[0],B=W[1],K=(0,t.useState)(""),Q=(0,o.Z)(K,2),z=Q[0],V=Q[1],$=(0,t.useState)(""),ee=(0,o.Z)($,2),ae=ee[0],se=ee[1],te=new Audio(q);(0,t.useEffect)((function(){l&&(ne(),s(l.chatId),i(0))}),[]),(0,t.useEffect)((function(){l&&ne()}),[a]);var ne=function(){var e;null===(e=d.current)||void 0===e||e.scrollIntoView({transition:"smooth"})};(0,t.useEffect)((function(){var e=function(){var e=(0,u.Z)((0,m.Z)().mark((function e(){var a,s;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R){e.next=10;break}return(a=new FormData).append("name",R.name),a.append("photo",R),e.next=6,(0,Y.cT)(a);case 6:s=e.sent,console.log("response: ",s),V(s.data.path),se(H+s.data.path);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[R]);var ce=function(e){C(!1),P(!1),e(!0)},ie=function(){var e=(0,u.Z)((0,m.Z)().mark((function e(){var a,s,t;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.telegram.org/bot".concat("6242919149:AAGqHGSudmw37vXWYNezhzk-rb7ah5vx>","/sendMessage?chat_id=").concat(c.id,"&parse_mode=html&text=").concat(ae.replace(/\n/g,"%0A")),e.next=3,U.y_.get(a);case 3:return(s=e.sent)?console.log("\u0421\u043f\u0430\u0441\u0438\u0431\u043e! \u0412\u0430\u0448\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e! ",s.data.result.message_id):console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."),t={},R?(t={senderId:G,receiverId:l.chatId,conversationId:l.conversationId,type:"image",text:H+z,is_bot:!1,messageId:s.data.result.message_id},n(l.chatId,H+z,"image","",l.conversationId,s.data.result.message_id)):(t={senderId:G,receiverId:l.chatId,conversationId:l.conversationId,type:"text",text:ae,is_bot:!1,messageId:s.data.result.message_id},n(l.chatId,ae,"text","",l.conversationId,s.data.result.message_id)),console.log("message send button: ",t),e.next=10,(0,Y.rW)(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:"chat",children:[(0,v.jsxs)("div",{className:"chat__body",children:[(0,v.jsx)("div",{className:"chat__bg"}),(0,v.jsx)(L,{user:c,openProfileSidebar:function(){return ce(C)},openSearchSidebar:function(){return ce(P)}}),(0,v.jsx)("div",{className:"chat__content",children:(0,v.jsx)(X,{lastMsgRef:d,messages:l.messages})}),(0,v.jsx)("footer",{className:"chat__footer",children:(0,v.jsxs)("div",{className:"chat__footer-wrapper",children:[(0,v.jsx)("button",{className:"chat__scroll-btn","aria-label":"scroll down",onClick:ne,children:(0,v.jsx)(S,{id:"downArrow"})}),(0,v.jsx)(I,{showEmojis:N,mess:ae,setMess:se}),(0,v.jsx)(F,{showEmojis:N,setShowEmojis:w,showAttach:p,setShowAttach:j,onFileChange:function(e){B(e.target.files[0])},mess:ae,setMess:se,submitNewMessage:function(){te.play(),ie(),se(""),ne(),B(""),V("")}})]})})]}),(0,v.jsx)(O,{heading:"\u041f\u043e\u0438\u0441\u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",active:E,closeSidebar:function(){return P(!1)},children:(0,v.jsx)(D,{})}),(0,v.jsx)(O,{heading:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430",active:y,closeSidebar:function(){return C(!1)},children:(0,v.jsx)(J,{user:l})})]})},z=function(){var e=(0,t.useContext)(x.w).person;return(0,t.useEffect)((function(){document.body.classList.add("dark-theme")})),(0,v.jsxs)("div",{children:[(0,v.jsx)(c.S8,{}),(0,v.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-uley",children:[(0,v.jsx)(c.xF,{}),(0,v.jsx)("div",{className:"body flex-grow-1 px-3",children:(0,v.jsx)(n.KB,{lg:!0,children:(0,v.jsx)(t.Suspense,{fallback:(0,v.jsx)(n.LQ,{color:"primary"}),children:(0,v.jsxs)("div",{className:"app",children:[(0,v.jsx)("p",{className:"app__mobile-message",children:" \u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0435 \ud83d\ude0a. "}),(0,v.jsxs)("div",{className:"app-content",children:[(0,v.jsx)(N,{}),Object.keys(e).length?(0,v.jsx)(Q,{}):(0,v.jsx)(i.Z,{})]})]})})})}),(0,v.jsx)(c.qh,{})]})]})}}}]);
//# sourceMappingURL=544.4fcb78d3.chunk.js.map