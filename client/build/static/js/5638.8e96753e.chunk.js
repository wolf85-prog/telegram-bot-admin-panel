"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[5638,686,1266],{50633:function(e,s,t){t.r(s);var r=t(74165),n=t(93433),a=t(15861),i=t(29439),c=t(72791),l=t(78983),d=t(84688),x=t(24846),m=t(85602),o=t(66925),h=t(80225),u=t(94810),j=t(14248),p=t(80184);s.default=function(){var e=(0,h.Z)().users,s=(0,h.Z)().managers,t=(0,h.Z)().projects,v=(0,h.Z)().companys,f=(0,c.useState)([]),N=(0,i.Z)(f,2),g=N[0],b=N[1],y=(0,c.useState)([]),w=(0,i.Z)(y,2),Z=w[0],I=w[1],S=(0,c.useState)([]),k=(0,i.Z)(S,2),T=k[0],D=k[1],_=(0,c.useState)([]),G=(0,i.Z)(_,2),q=G[0],C=G[1],E=(0,c.useState)(!0),F=(0,i.Z)(E,2),L=F[0],M=F[1],Q="1775583141";return(0,c.useEffect)((function(){var t=[],i=function(){var i=(0,a.Z)((0,r.Z)().mark((function a(){var i,c,l;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("companys (admin): ",v),console.log("clients (admin): ",e),console.log("managers (admin): ",s),r.next=5,(0,u.qu)();case 5:i=r.sent,console.log("messages: ",i),e.map((function(r,a){var c=(0,n.Z)(s)[s.findIndex((function(e){return e.tgID===r.chatId}))],l=v.find((function(e){return e.managers.find((function(e){return e.id===(null===c||void 0===c?void 0:c.id)}))})),d=null===l||void 0===l?void 0:l.title,x=null!==l&&void 0!==l&&l.city?null===l||void 0===l?void 0:l.city:"",m=r.date.split("T"),o=new Date(m[0]),h=o.getFullYear(),u=String(o.getMonth()+1).padStart(2,"0"),j=String(o.getDate()).padStart(2,"0"),p="".concat(j,".").concat(u,".").concat(h),f=r.name.includes("|")?r.name.split(" | ")[1]:r.name,N=i.length,g=i.filter((function(e){return e.senderId===Q})),b=i.filter((function(e){return e.senderId===r.chatId})),y=e.filter((function(e){return""===e.message}));D(y);var w=e.filter((function(e){return""!==e.message}));C(w);var Z={avatar:r.avatar,user:{name:f,new:!0,registered:"01.01.2023"},TG_ID:r.chatId,city:x,company:d||"",phone:null===c||void 0===c?void 0:c.phone,usage:{value:Math.round(100*b.length/(N-g.length)),period:"01.04.2023 - "+p,color:"success"},activity:p};t.push(Z)})),c=[].concat(t).filter((function(e){return e.TG_ID!==Q})),l=(0,n.Z)(c).sort((function(e,s){return s.usage.value-e.usage.value})),console.log("userbots: ",l),b(l),setTimeout((function(){M(!1)}),"6000");case 13:case"end":return r.stop()}}),a)})));return function(){return i.apply(this,arguments)}}();i()}),[e]),(0,c.useEffect)((function(){var e=[],s=function(){var s=(0,a.Z)((0,r.Z)().mark((function s(){return(0,r.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t.map(function(){var s=(0,a.Z)((0,r.Z)().mark((function s(t){var n;return(0,r.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n={id:t.id,name:t.title,start:t.time_start,created:t.time_created,teh:t.teh,manager:t.manager,company:t.company},e.push(n);case 2:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()),I(e);case 2:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();s()}),[t]),(0,p.jsxs)("div",{className:"dark-theme",children:[(0,p.jsx)(d.S8,{}),(0,p.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-uley",children:[(0,p.jsx)(d.tf,{}),(0,p.jsx)("div",{className:"body flex-grow-1 px-3",children:(0,p.jsx)(l.KB,{lg:!0,children:(0,p.jsx)(c.Suspense,{fallback:(0,p.jsx)(l.LQ,{color:"primary"}),children:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(j.Z,{users:e.length-1,projects:Z.length,companys:v.length}),(0,p.jsx)(l.rb,{children:(0,p.jsx)(l.b7,{xs:!0,children:(0,p.jsxs)(l.xH,{className:"mb-4",children:[(0,p.jsxs)(l.bn,{children:["\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0431\u043e\u0442\u0430 (",e.length-1,")"]}),(0,p.jsxs)(l.sl,{children:[(0,p.jsxs)(l.rb,{children:[(0,p.jsx)(l.b7,{xs:12,md:6,xl:6,children:(0,p.jsxs)(l.rb,{children:[(0,p.jsx)(l.b7,{sm:6,children:(0,p.jsxs)("div",{className:"border-start border-start-4 border-start-info py-1 px-3",children:[(0,p.jsx)("div",{className:"text-medium-emphasis small",children:"\u041d\u043e\u0432\u044b\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b"}),(0,p.jsx)("div",{className:"fs-5 fw-semibold",children:T.length})]})}),(0,p.jsx)(l.b7,{sm:6,children:(0,p.jsxs)("div",{className:"border-start border-start-4 border-start-danger py-1 px-3 mb-3",children:[(0,p.jsx)("div",{className:"text-medium-emphasis small",children:"\u041f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b"}),(0,p.jsx)("div",{className:"fs-5 fw-semibold",children:q.length-1})]})})]})}),(0,p.jsxs)(l.b7,{xs:12,md:6,xl:6,children:[(0,p.jsxs)(l.rb,{children:[(0,p.jsx)(l.b7,{sm:6,children:(0,p.jsxs)("div",{className:"border-start border-start-4 border-start-warning py-1 px-3 mb-3",children:[(0,p.jsx)("div",{className:"text-medium-emphasis small",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b"}),(0,p.jsx)("div",{className:"fs-5 fw-semibold",children:"-"})]})}),(0,p.jsx)(l.b7,{sm:6,children:(0,p.jsxs)("div",{className:"border-start border-start-4 border-start-success py-1 px-3 mb-3",children:[(0,p.jsx)("div",{className:"text-medium-emphasis small",children:"\u0414\u0440\u0443\u0433\u043e\u0435"}),(0,p.jsx)("div",{className:"fs-5 fw-semibold",children:"-"})]})})]}),(0,p.jsx)("div",{className:"mb-5"})]})]}),L?(0,p.jsx)(l.LQ,{}):(0,p.jsxs)(l.Sx,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[(0,p.jsx)(l.V,{className:"table-dark",children:(0,p.jsxs)(l.T6,{children:[(0,p.jsx)(l.is,{style:{width:"30px"},children:"\u2116"}),(0,p.jsx)(l.is,{className:"text-center",style:{width:"100px"},children:(0,p.jsx)(x.Z,{icon:m.g})}),(0,p.jsx)(l.is,{style:{width:"160px"},children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),(0,p.jsx)(l.is,{className:"text-center",style:{width:"160px"},children:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f"}),(0,p.jsx)(l.is,{className:"text-center",style:{width:"160px"},children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,p.jsx)(l.is,{className:"text-center",style:{width:"80px"},children:"\u0413\u043e\u0440\u043e\u0434"}),(0,p.jsx)(l.is,{className:"text-center",style:{width:"100px"},children:"TG ID"}),(0,p.jsx)(l.is,{style:{width:"100px"},children:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435"}),(0,p.jsx)(l.is,{style:{width:"100px"},children:"\u0410\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c"})]})}),(0,p.jsx)(l.NR,{children:g.map((function(e,s){return(0,p.jsxs)(l.T6,{"v-for":"item in tableItems",children:[(0,p.jsx)(l.NN,{className:"text-center",children:s+1}),(0,p.jsx)(l.NN,{className:"text-center",children:(0,p.jsx)(l.cU,{size:"md",src:e.avatar?"https://proj.uley.team:5000/"+e.avatar:o,alt:""})}),(0,p.jsxs)(l.NN,{children:[(0,p.jsx)("div",{children:e.user.name}),(0,p.jsx)("div",{className:"small text-medium-emphasis"})]}),(0,p.jsx)(l.NN,{className:"text-center",children:e.company?(0,p.jsx)("div",{children:e.company}):""}),(0,p.jsx)(l.NN,{className:"text-center",children:(0,p.jsx)("div",{children:e.phone})}),(0,p.jsx)(l.NN,{className:"text-center",children:(0,p.jsx)("div",{children:e.city})}),(0,p.jsx)(l.NN,{className:"text-center",children:(0,p.jsx)("div",{children:e.TG_ID})}),(0,p.jsxs)(l.NN,{children:[(0,p.jsxs)("div",{className:"clearfix",children:[(0,p.jsx)("div",{className:"float-start",children:(0,p.jsxs)("strong",{children:[e.usage.value,"%"]})}),(0,p.jsx)("div",{className:"float-end",children:(0,p.jsx)("small",{className:"text-medium-emphasis",children:e.usage.period})})]}),(0,p.jsx)(l.yI,{thin:!0,color:e.usage.color,value:e.usage.value})]}),(0,p.jsxs)(l.NN,{children:[(0,p.jsx)("div",{className:"small text-medium-emphasis",children:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0432\u0445\u043e\u0434"}),(0,p.jsx)("strong",{children:e.activity})]})]},s)}))})]})]})]})})})]})})})}),(0,p.jsx)(d.qh,{})]})]})}}}]);
//# sourceMappingURL=5638.8e96753e.chunk.js.map