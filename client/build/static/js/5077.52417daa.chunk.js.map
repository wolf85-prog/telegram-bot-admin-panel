{"version":3,"file":"static/js/5077.52417daa.chunk.js","mappings":"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","sources":["chat-app-worker/components/Icon/index.jsx","http/projectAPI.js","chat-app-worker/components/Sidebar/Contact.jsx","chat-app-worker/components/Sidebar/index.jsx","chat-app-worker/pages/Chat/components/useAutosizeTextArea.ts","chat-app-worker/pages/Chat/components/ChatInput.jsx","chat-app-worker/pages/Chat/components/Header.jsx","chat-app-worker/pages/Chat/components/ChatSidebar.jsx","chat-app-worker/pages/Chat/components/Search.jsx","chat-app-worker/pages/Chat/components/Profile.jsx","chat-app-worker/assets/images/sp-i-m-image-placeholder.svg","chat-app-worker/pages/Chat/components/Convo.jsx","chat-app-worker/pages/Chat/components/ChatSidebarProfile.jsx","chat-app-worker/pages/Chat/index.jsx","pages/ChatWorker.js"],"sourcesContent":["import Icons from \"../../../chat-app-new/assets/icons\";\nimport React from \"react\";\n\nconst allIcons = Icons;\n\nconst Icon = ({ id, ...props }) => {\n\tconst selectedIcon = allIcons[id];\n\treturn selectedIcon ? selectedIcon(props) : null;\n};\n\nexport default Icon;\n","import {$authHost, $host} from \"./index\";\n\nexport const getProjects = async () =>{\n    try {\n       let response = await $host.get('api/projectnew/get');\n       return response.data;\n    } catch (error) {\n        console.log(\"error while calling getSpecialist api\", error.message);\n    }\n}\n\nexport const getProjectsDel = async () =>{\n    try {\n       let response = await $host.get('api/projectnew/delete/get');\n       return response.data;\n    } catch (error) {\n        console.log(\"error while calling getProjectsDel api\", error.message);\n    }\n}\n\nexport const getProjectCount = async (count, prev) =>{\n    try {\n       let response = await $host.get(`api/projectnew/count/get/${count}/${prev}`);\n       return response.data;\n    } catch (error) {\n        console.log(\"error while calling getProjectCount api\", error.message);\n    }\n}\n\nexport const editProject = async (data, id) =>{\n    try {\n        await $host.patch(`api/projectnew/update/${id}`, data); \n    } catch (error) {\n        console.log(\"error while calling editProject api\",error.message);\n    }\n}\n\nexport const addProject = async (data) =>{\n    try {\n        let response = await $host.post(`api/projectnew/add`, data); \n        return response.data;\n    } catch (error) {\n        console.log(\"error while calling addProject api\",error.message);\n    }\n}\n\nexport const deleteProject = async (id) =>{\n    try {\n        await $host.get(`api/projectnew/delete/${id}`); \n    } catch (error) {\n        console.log(\"error while calling deleteProject api\",error.message);\n    }\n}\n\nexport const getProjectId = async (id) =>{\n    try {\n       let response = await $host.get(`api/projectnew/get/${id}`);\n       return response.data;\n    } catch (error) {\n        console.log(\"error while calling getProjectId api\", error.message);\n    }\n}\n","import React, { useContext, useState, useEffect } from \"react\";\nimport Icon from \"src/chat-app-new/components/Icon\";\nimport { Link } from \"react-router-dom\";\nimport formatTime from \"./../../../chat-app-new/utils/formatTime\";\nimport { AccountContext } from './../../../chat-app-new/context/AccountProvider'\nimport avatarDefault from \"./../../../chat-app-new/assets/images/no-avatar.png\";\nimport avatarKrest from \"./../../../chat-app-worker/assets/images/uncheck.png\";\nimport blockUser from \"./../../../chat-app-worker/assets/images/stop.png\";\nimport block18 from \"./../../../assets/images/block18.png\";\n\nimport { useUsersContext } from \"./../../../chat-app-new/context/usersContext\";\n\nimport { getWMessages2} from '../../../http/workerAPI'\n\nimport { newCountWMessage } from \"src/http/adminAPI\";\n\nconst Contact = ({ contact, worker }) => {\n\t//console.log(\"worker contact: \", contact)\n\tconst { setPersonW } = useContext(AccountContext);\n\tconst host = process.env.REACT_APP_API_URL\n\t\n\t//сделать пользователя непрочитанным\n\tconst { setUserWorkerAsUnread, setCountMessageWork } = useUsersContext();\n\tconst { userWorkers, setUserWorkers } = useUsersContext();\n\n\t//обработка нажатия на пользователя из списка\n    const getUser = async () => {\n        setPersonW({\n            name: contact.name, \n            id: contact.chatId, \n\t\t\tavatar: contact.avatar\n        });\n\n\t\tsetUserWorkerAsUnread(contact.chatId)\n\t\tsetCountMessageWork('0')\n\t\t//await newCountWMessage(0)\n\n\t\tif (Object.keys(contact.messages).length === 0) {\n\t\t\tconsole.log(\"Сообщения не загружены!\")\n\t\t\tconst messages = await getWMessages2(contact.conversationId, 10, 0)\n\t\t\t//console.log(\"messages: \", messages)\n\n\t\t\tconst arrayMessage = []\n\t\t\t\tconst allDate = []\n\t\t\t\t\n\t\t\t\tif (messages) {\n\t\t\t\t\t[...messages].map(message => {\n\t\t\t\t\t\tconst d = new Date(message.createdAt);\n\t\t\t\t\t\tconst year = d.getFullYear();\n\t\t\t\t\t\tconst month = String(d.getMonth()+1).padStart(2, \"0\");\n\t\t\t\t\t\tconst day = String(d.getDate()).padStart(2, \"0\");\n\t\t\t\t\t\tconst chas = d.getHours();\n\t\t\t\t\t\tconst minut = String(d.getMinutes()).padStart(2, \"0\");\n\t\t\t\t\t\n\t\t\t\t\t\tconst newDateMessage = `${day}.${month}.${year}`\n\t\t\t\t\n\t\t\t\t\t\tconst newMessage = {\n\t\t\t\t\t\t\tdate: newDateMessage,\n\t\t\t\t\t\t\tcontent: message.text,\n\t\t\t\t\t\t\timage: message.type === 'image' ? true : false,\n\t\t\t\t\t\t\tdescript: message.buttons ? message.buttons : '',\n\t\t\t\t\t\t\tsender: message.senderId,\n\t\t\t\t\t\t\ttime: chas + ' : ' + minut,\n\t\t\t\t\t\t\tstatus: 'sent',\n\t\t\t\t\t\t\tid:message.messageId,\n\t\t\t\t\t\t\treply:message.replyId,\n\t\t\t\t\t\t}\n\t\t\t\t\t\tarrayMessage.push(newMessage)\n\t\t\t\t\t\tallDate.push(newDateMessage)\n\t\t\t\t\t})\n\t\t\t\t}\t\n\t\t\t\t\n\t\t\t\tconst dates = [...allDate].filter((el, ind) => ind === allDate.indexOf(el));\n\t\t\t\t\n\t\t\t\tlet obj = {};\n\t\t\t\tfor (let i = 0; i < dates.length; i++) {\n\t\t\t\t\tconst arrayDateMessage = []\n\t\t\t\t\tfor (let j = 0; j < arrayMessage.length; j++) {\n\t\t\t\t\t\tif (arrayMessage[j].date === dates[i]) {\n\t\t\t\t\t\t\tarrayDateMessage.push(arrayMessage[j])\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\t\n\t\t\t\t\tobj[dates[i]] = arrayDateMessage;\n\t\t\t\t}\n\n\t\t\t\t//console.log(\"obj: \", obj)\n\n\t\t\t\t//сохранить сообщения в контексте пользователя\n\t\t\t\tsetUserWorkers((userWorkers) => {\n\t\t\t\t\tlet userIndex = userWorkers.findIndex((user) => user.chatId === contact.chatId.toString());\n\t\t\t\t\tconst usersCopy = JSON.parse(JSON.stringify(userWorkers));\n\t\t\t\t\tusersCopy[userIndex].messages = obj\n\n\t\t\t\t\treturn usersCopy;\n\t\t\t\t})\n\t\t} else {\n\t\t\t//console.log(contact.conversationId)\n\t\t}\n\t\t\n    }\n\t\n\tconst getLastMessage = () => {\n\t\t\tconst messageDates = Object.keys(contact.messages);\t\n\t\t\tlet recentMessageDate\n\t\t\t\n\t\t\tmessageDates.length !== 0 \t\n\t\t\t? recentMessageDate = messageDates[messageDates.length - 1]\n\t\t\t: recentMessageDate = '2000-01-01'\n\n\t\t\tlet messages = [];\n\t\t\tif (JSON.stringify(contact.messages) !== '{}') {\n\t\t\t\tmessages = [...contact.messages[recentMessageDate]];\n\t\t\t}\t\n\n\t\t\t//console.log(\"Сообщения: \", messages.length)\n\n\t\t\tif (messages.length) {\n\t\t\t\tconst lastMessage = messages.pop();\n\t\t\t\treturn lastMessage;\n\t\t\t} \n\t\t\tconst lastMessage = '';\n\t\t\treturn lastMessage;\n\t};\n\n\tconst lastMessage = getLastMessage(contact);\n\n\tconst onImageError = (e) => {\n\t\te.target.src = avatarDefault\n\t}\n\n\treturn (\n\t\t<Link\n\t\t\tkey={contact.id}\n\t\t\tclassName=\"sidebar-contact\"\n\t\t\tonClick={() => getUser()}\n\t\t>\n\t\t\t<div className=\"sidebar-contact__avatar-wrapper\" style={{position: 'relative'}}>\n\t\t\t\t{\n\t\t\t\t\tcontact.avatar\n\t\t\t\t\t? <> {contact.blockW ? <img src={blockUser} alt='' className=\"avatar-adm\" style={{position: 'absolute', top: '0', zIndex: '2'}} /> : <></>}\n\t\t\t\t\t\t<img src={`${contact.avatar}`} alt='' onError={onImageError} className=\"avatar-adm\" style={{position: 'absolute', top: '0', zIndex: '0'}} />\n\t\t\t\t\t</>\n\t\t\t\t\t: <> {contact.blockW ? <img src={blockUser} alt='' className=\"avatar-adm\" style={{position: 'absolute', top: '0', zIndex: '2'}} /> : <></>}\n\t\t\t\t\t\t<img src={avatarDefault} alt='' className=\"avatar-adm\" style={{position: 'absolute', top: '0', zIndex: '0'}} />\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t{\n                    worker.length !== 0 ?  \n                    ((JSON.parse(worker[0].worklist)).find(item => item.spec === 'Blacklist') ? \n                    <img src={avatarKrest} alt='' width={18} style={{position: 'absolute', top: '34px', left: '32px'}}/>\n                    : \"\")\n                    : \"\"\n                }\n                \n\t\t\t\t{\n                    worker.length !== 0 ? \n                    ((JSON.parse(worker[0].worklist)).find(item => item.spec === '+18') ?   \n                    <img src={block18} alt='' width={18} style={{position: 'absolute', top: '-5px', left: '32px', width: '23px'}}/>\n                    : \"\")\n                    : \"\"\n                }\n\n\t\t\t\t\n\t\t\t</div>\n\t\t\t<div className=\"sidebar-contact__content\">\n\t\t\t\t<div className=\"sidebar-contact__top-content\">\n\t\t\t\t\t<h2 className=\"sidebar-contact__name\">{contact.name.split(' ')[0] === contact.name.split(' ')[1] ? contact.name.split(' ')[0] : contact.name}</h2>\n\t\t\t\t\t<span className=\"sidebar-contact__time\">\n\t\t\t\t\t\t{lastMessage === ''  ? '' : formatTime(lastMessage.time)}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"sidebar-contact__bottom-content\">\n\t\t\t\t\t<p className=\"sidebar-contact__message-wrapper\">\n\t\t\t\t\t\t{lastMessage.status && (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\tid={\n\t\t\t\t\t\t\t\t\tlastMessage?.status === \"sent\" ? \"singleTick\" : \"doubleTick\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\taria-label={lastMessage?.status}\n\t\t\t\t\t\t\t\tclassName={`sidebar-contact__message-icon ${\n\t\t\t\t\t\t\t\t\tlastMessage?.status === \"read\"\n\t\t\t\t\t\t\t\t\t\t? \"sidebar-contact__message-icon--blue\"\n\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName={`sidebar-contact__message ${\n\t\t\t\t\t\t\t\t!!contact.unread ? \"sidebar-contact__message--unread\" : \"\"\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{contact.typing ? <i> печатает...</i> : lastMessage?.content}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</p>\n\t\t\t\t\t<div className=\"sidebar-contact__icons\">\n\t\t\t\t\t\t{contact.pinned && (\n\t\t\t\t\t\t\t<Icon id=\"pinned\" className=\"sidebar-contact__icon\" />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{!!contact.unread && (\n\t\t\t\t\t\t\t<span className=\"sidebar-contact__unread\">{contact.unread}</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<button aria-label=\"sidebar-contact__btn\">\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\tid=\"downArrow\"\n\t\t\t\t\t\t\t\tclassName=\"sidebar-contact__icon sidebar-contact__icon--dropdown\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Link>\n\t);\n};\n\nexport default Contact;\n","import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./styles/main.css\";\nimport avatar from \"./../../../chat-app-new/assets/images/logo_chat_admin.png\";\nimport Icon from \"./../../../chat-app-new/components/Icon\";\nimport Contact from \"./Contact\";\nimport OptionsBtn from \"./../../../chat-app-new/components/OptionsButton\";\nimport { useUsersContext } from \"./../../../chat-app-new/context/usersContext\";\nimport { CSpinner} from '@coreui/react'\n\nconst Sidebar = () => {\n\tconst { userWorkers, workersAll } = useUsersContext();\n    const chatAdminId = process.env.REACT_APP_CHAT_ADMIN_ID \n\tconst [contacts, setContacts]= useState([]);\n\tconst [text, setText]= useState(\"\");\n\tconst [loading, setLoading]= useState(true);\n\n\tconst CountWorkers = 50\n\n\tconst navigate = useNavigate()\n\n\tuseEffect(() => {\n\t\t\n\t\t//сортировка\n\t\t// const userSort = [...userWorkers].sort((a, b) => {       \n\t\t// \tvar dateA = new Date(a.date), dateB = new Date(b.date) \n\t\t// \treturn dateB-dateA //сортировка по убывающей дате  \n\t\t// })\n\t\t\n\t\tconst arr = []\n\n\t\tfor (const item of userWorkers) {\t\t\n\t\t\tarr.push(item)\n\t\t\tif (arr.length === CountWorkers)\n\t\t\t  break;\n\t\t}\n\n\t\t//console.log(\"contacts: \", userWorkers)\n\n\t\tsetContacts(arr)\n\t\t\n\t\tif(arr.length > 0) {\n\t\t\tsetLoading(false)\n\t\t}\t\t\n\t\t\n\t},[userWorkers])\n\n\t\n\tuseEffect(() => {\n\t\tconst arr = []\n\t\tfor (const item of userWorkers) {\t\t\t\n\t\t\tarr.push(item)\n\t\t\tif (arr.length === CountWorkers)\n\t\t\t  break;\n\t\t}\n\t\tconst filteredData = userWorkers.filter(user=> (user.name+user.chatId+user.phone)?.replace(/[её]/g, '(е|ё)').toLowerCase().includes(text.replace(/[её]/g, '(е|ё)').toLowerCase()));\n        \n\t\tsetContacts(text === '' ? arr : filteredData);      \n    }, [text]);\n\n\n\tconst onSelected = (index) => {\n\t\tswitch(index) {\n\t\t\tcase 0: //данные о контакте\n\t\t\t\tconsole.log('Профиль')\n\t\t\t\tbreak\n\t\t  \n\t\t\tcase 1: \n\t\t\t\tconsole.log('1')\n\t\t\t\tbreak\n\t\t\t\n\t\t\tcase 4: \n\t\t\t\tnavigate(\"/dashboard\");\n\t\t\t\tbreak\n\t\t  \n\t\t\tdefault:\n\t\t\t\tconsole.log(\"В разработке\")\n\t\t\t\tbreak\n\t\t  }\n\t};\n\n\t// const getNeedWorker = (contact) => {\n\t// \tworkers.find((item)=> item.chatId === contact.chatId)}\n\t// };\n\n\treturn (\n\t\t<aside className=\"sidebarB\">\n\t\t\t{/* Header */}\n\t\t\t<header className=\"headerB\">\n\t\t\t\t<div className=\"sidebar__avatar-wrapper\">\n\t\t\t\t\t<img src={avatar} alt='U.L.E.Y' className=\"avatar-adm\" />\n\t\t\t\t</div>\n\t\t\t\t<div>Специалисты</div>\n\t\t\t\t<div className=\"sidebar__actions\">\n\t\t\t\t\t<OptionsBtn\n\t\t\t\t\t\tclassName=\"sidebar__action\"\n\t\t\t\t\t\tariaLabel=\"Menu\"\n\t\t\t\t\t\ticonId=\"menu\"\n\t\t\t\t\t\ticonClassName=\"sidebar__action-icon\"\n\t\t\t\t\t\tonSelected={onSelected}\n\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\"Профиль\",\n\t\t\t\t\t\t\t// \"Архив\",\n\t\t\t\t\t\t\t// \"Избранные сообщения\",\n\t\t\t\t\t\t\t// \"Настройки\",\n\t\t\t\t\t\t\t// \"Вернуться в панель управления\",\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t\n\t\t\t{/* Search */}\n\t\t\t<div className=\"search-wrapper\">\n\t\t\t\t<div className=\"search-icons\">\n\t\t\t\t\t<Icon id=\"search\" className=\"search-icon\" />\n\t\t\t\t\t<button className=\"search__back-btn\">\n\t\t\t\t\t\t<Icon id=\"back\" />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<input \n\t\t\t\t\tclassName=\"search\" \n\t\t\t\t\tplaceholder=\"Поиск специалиста\" \n\t\t\t\t\tonChange={(e)=>setText(e.target.value)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t\n\t\t\t{/* Conversations */}\n\t\t\t<div className=\"sidebar__contacts\">\n\t\t\t\t{loading ? \n\t\t\t\t<CSpinner style={{margin: '50%'}}/> :\n\t\t\t\t\n\t\t\t\tcontacts.map((contact, ind) => (\n\t\t\t\t\tcontact.chatId !== chatAdminId &&\n                    <>   \n\t\t\t\t\t\t<Contact key={ind} contact={contact} worker={workersAll.filter((item)=> item.chatId === contact.chatId)} />\n\t\t\t\t\t</>\n\t\t\t\t))\n\t\t\t\t}\n\t\t\t</div>\n\t\t</aside>\n\t);\n};\n\nexport default Sidebar;\n","import { useEffect } from \"react\";\n\n// Updates the height of a <textarea> when the value changes.\nconst useAutosizeTextArea = (\n  textAreaRef: HTMLTextAreaElement | null,\n  value: string\n) => {\n  useEffect(() => {\n    if (textAreaRef) {\n      \n        // Нам нужно на мгновение сбросить высоту, чтобы получить правильное значение scrollHeight для текстовой области.\n      textAreaRef.style.height = \"0px\";\n      const scrollHeight = textAreaRef.scrollHeight - 40;\n\n      // Затем мы устанавливаем высоту напрямую, вне цикла рендеринга.\n      // Попытка установить это с помощью состояния или ссылки приведет к неправильному значению.\n      textAreaRef.style.height = scrollHeight + \"px\";\n    }\n  }, [textAreaRef, value]);\n};\n\nexport default useAutosizeTextArea;","import React, {useRef, useState} from \"react\";\nimport Icon from \"./../../../components/Icon\";\nimport EmojiPicker from 'emoji-picker-react';\n\nimport CIcon from '@coreui/icons-react'\nimport {\n  cilPen,\n  cilMediaPlay\n} from '@coreui/icons'\n\nimport useAutosizeTextArea from \"./useAutosizeTextArea.ts\";\nimport {Dropdown, DropdownButton, ButtonGroup } from 'react-bootstrap';\n\nconst ChatInput = ({\n\tshowAttach,\n\tsetShowAttach,\n\tshowEmojis,\n\tsetShowEmojis,\n\tshowPicker,\n\tsetShowPicker,\n\tchosenEmoji,\n\tmess,\n\tsetMess,\n\tsubmitNewMessage,\n\tonFileChange,\n\tsetSelectedElement,\n}) => {\n\n\tconst textAreaRef = useRef(null);\n\tuseAutosizeTextArea(textAreaRef.current, mess);\n\n\tconst handleChange = (e) => {\n\t\tconsole.log(e.target.value)\n\t\tsetMess(e.target.value)\n\t};\n\n\tconst detectEnterPress = (e) => {\n\t\tif ((e.key === \"Enter\" && !e.shiftKey) || (e.keyCode === 13 && !e.shiftKey) ) {\n\t\t\tsubmitNewMessage();\n\t\t} \n\t};\n\n\n\tconst CustomToggle = React.forwardRef(({ children, onClick }, ref) => (\n\t\t<button\n\t\t\taria-label=\"Message options\"\n\t\t\tref={ref}\n\t\t\tonClick={(e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tonClick(e);\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t\t<Icon id=\"downArrow\"/>\t\t\t\t\t\t\t\t\t\t\t\n\t\t</button>\n\t));\n\n\tCustomToggle.displayName = \"Search\";\n\n\tconst CustomMenu = React.forwardRef(\n\t\t({ children, style, className, 'aria-labelledby': labeledBy }, ref) => {\n\t\t  const [value, setValue] = useState('');\n\t  \n\t\t  return (\n\t\t\t<div\n\t\t\t  ref={ref}\n\t\t\t  style={{backgroundColor: '#20272b'}}\n\t\t\t  className={className}\n\t\t\t  aria-labelledby={labeledBy}\n\t\t\t>\n\t\t\t  <ul className=\"list-unstyled\">\n\t\t\t\t{React.Children.toArray(children).filter(\n\t\t\t\t  (child) =>\n\t\t\t\t\t!value || child.props.children?.toLowerCase().startsWith(value),\n\t\t\t\t)}\n\t\t\t  </ul>\n\t\t\t</div>\n\t\t  );\n\t\t},\n\t);\n\n\tCustomMenu.displayName = CustomMenu\n\n\tconst change = async (eventkey) => {\n\t\t//alert(`you chosen: ${eventkey}`)\n\t\tsetSelectedElement(eventkey)\n\t}\n\n\tconst clickEmojis = () => {\n\t\tsetShowPicker(true)\n\t\tsetShowEmojis(true)\n\t}\n\n\tconst clickClose = () => {\n\t\tsetShowEmojis(false)\n\t\tsetShowPicker(false)\n\t}\n\n\treturn (\n\t\t<div className=\"chat__input-wrapper\">\n\t\t\t{showEmojis && (\n\t\t\t\t<button aria-label=\"Close emojis\" onClick={clickClose}>\n\t\t\t\t\t<Icon id=\"cancel\" className=\"chat__input-icon\" />\n\t\t\t\t</button>\n\t\t\t)}\n\t\t\t<button aria-label=\"Emojis\" onClick={clickEmojis}>\n\t\t\t\t<Icon\n\t\t\t\t\tid=\"smiley\"\n\t\t\t\t\tclassName={`chat__input-icon ${\n\t\t\t\t\t\tshowEmojis ? \"chat__input-icon--highlight\" : \"\"\n\t\t\t\t\t}`}\n\t\t\t\t/>\n\t\t\t</button>\n\t\t\t{/* {showEmojis && (\n\t\t\t\t<>\n\t\t\t\t\t<button aria-label=\"Choose GIF\">\n\t\t\t\t\t\t<Icon id=\"gif\" className=\"chat__input-icon\" />\n\t\t\t\t\t</button>\n\t\t\t\t\t<button aria-label=\"Choose sticker\">\n\t\t\t\t\t\t<Icon id=\"sticker\" className=\"chat__input-icon\" />\n\t\t\t\t\t</button>\n\t\t\t\t</>\n\t\t\t)} */}\n\t\t\t<div className=\"pos-rel\">\n\t\t\t\t<button aria-label=\"Attach\" onClick={() => setShowAttach(!showAttach)}>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tid=\"attach\"\n\t\t\t\t\t\tclassName={`chat__input-icon ${\n\t\t\t\t\t\t\tshowAttach ? \"chat__input-icon--pressed\" : \"\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t/>\n\t\t\t\t</button>\n\n\t\t\t\t<div className={`chat__attach ${showAttach ? \"chat__attach--active\" : \"\"}`}>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"chat__attach-btn\"\n\t\t\t\t\t\t\taria-label=\"Choose document\"\n\t\t\t\t\t\t\tkey=\"Choose document\"\n\t\t\t\t\t\t\t// onClick={()=>console.log(\"Choose document\")}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<label htmlFor='fileInput2'>\n\t\t\t\t\t\t\t\t<Icon id=\"attachDocument\" className=\"chat__attach-icon\" />\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\tid=\"fileInput2\"\n\t\t\t\t\t\t\t\tname=\"photo\"\n\t\t\t\t\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t\t\t\t\t\tonChange={(e)=>onFileChange(e, 'doc')}\n\t\t\t\t\t\t\t/>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"chat__attach-btn\"\n\t\t\t\t\t\t\taria-label=\"attachImage\"\n\t\t\t\t\t\t\tkey=\"attachImage\"\n\t\t\t\t\t\t\t// onClick={()=>console.log(\"Choose image\")}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<label htmlFor='fileInput'>\n\t\t\t\t\t\t\t\t<Icon id=\"attachImage\" className=\"chat__attach-icon\" />\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\tid=\"fileInput\"\n\t\t\t\t\t\t\t\tname=\"photo\"\n\t\t\t\t\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t\t\t\t\t\tonChange={(e)=>onFileChange(e, 'image')}\n\t\t\t\t\t\t\t/>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\n\t\t\t</div>\n\n\t\t\t<div style={{marginLeft: '8px', marginRight: '8px'}}>\n\t\t\t\t{/* <Dropdown onSelect={change}>\n\t\t\t\t\t<Dropdown.Toggle as={CustomToggle} id=\"dropdown-custom-components\">\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t</Dropdown.Toggle>\n\t\t\t\t\t<Dropdown.Menu as={CustomMenu}>\n\t\t\t\t\t<Dropdown.Item eventKey=\"\">Удалить сообщение</Dropdown.Item>\n\t\t\t\t\t</Dropdown.Menu>\n\t\t\t\t</Dropdown> */}\n\n\t\t\t\t<DropdownButton\n\t\t\t\t\tonSelect={change}\n\t\t\t\t\tas={ButtonGroup}\n\t\t\t\t\tid={`dropdown-button-drop-up`}\n\t\t\t\t\tdrop='up'\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\ttitle=''\n\t\t\t\t\t// \n\t\t\t\t>\n\t\t\t\t\t<Dropdown.Item class=\"dropdown-menu\" eventKey=\"0\">Стандартный ответ</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"1\">Паспорт</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"2\">Кнопка с номером</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"3\">Запас</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"4\">Офис U.L.E.Y</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"5\">Оплата / смета</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"6\">Заявка отклонена</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"7\">Заявка одобрена</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"8\">Запрос ключевых данных</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Divider />\n\t\t\t\t\t<Dropdown.Item eventKey=\"9\">Первый проект</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"10\">Постер</Dropdown.Item>\n\t\t\t\t</DropdownButton>\n\t\t\t\t{/* <CFormSelect \n\t\t\t\t\t\tstyle={{marginTop: '10px', marginBottom: '10px',  display: \"block\"}}\n                        aria-label=\"Default select example\"\n                        options={scenarios}  \n\t\t\t\t\t\t// value={scenari}\n\t\t\t\t\t\tselectedElement={selectedElement}\n                    \tsetSelectedElement={setSelectedElement}\n                        onChange={onSelectChange}\n\t\t\t\t/> */}\n\t\t\t\t{/* <button className=\"profile__action-right\" style={{padding: '6px'}}>\n\t\t\t\t\t<CIcon icon={cilMediaPlay} \n\t\t\t\t\t<Icon id=\"downArrow\" style={{color: 'white'}}/>{\" \"} \n\t\t\t\t</button> */}\n\t\t\t</div>\n\t\t\t\n\t\t\t<textarea\n\t\t\t\tclassName=\"chat__input\"\n\t\t\t\tplaceholder=\"Введите сообщение\"\n\t\t\t\tvalue={mess} \n\t\t\t\tonChange={handleChange} \n\t\t\t\tref={textAreaRef}\t\t\t\n\t\t\t\trows={1}\n\t\t\t/>\n\n\t\t\t<button aria-label=\"Send message\" onClick={submitNewMessage}>\n\t\t\t\t<Icon id=\"send\" className=\"chat__input-icon\" />\n\t\t\t</button>\n\t\t</div>\n\t);\n};\n\nexport default ChatInput;\n","import React, { useState, useContext, useEffect, useRef }  from \"react\";\nimport { Link, useLocation } from 'react-router-dom'\nimport Icon from \"./../../../components/Icon\";\nimport OptionsBtn from \"./../../../components/OptionsButton\";\n\nimport avatarDefault from \"./../../../../chat-app-new/assets/images/no-avatar.png\";\nimport avatarBlacklist from \"./../../../../chat-app-worker/assets/images/uncheck.png\";\nimport blockUser from \"./../../../../chat-app-worker/assets/images/stop.png\";\nimport block18 from \"./../../../../assets/images/block18.png\";\nimport robot from \"./../../../../chat-app-worker/assets/images/robot.png\";\nimport editIcon from './../../../../assets/images/pencil.png'\n\nimport { \n\tCButton\n  } from '@coreui/react'\nimport CIcon from '@coreui/icons-react'\nimport { cilPhone } from '@coreui/icons'\n\nimport sendSound from './../../../../chat-app-new/assets/sounds/sendmessage.mp3';\nimport ishodCall from './../../../../assets/sound/ishod.mp3';\n\nimport { getSendCall, getSendCallRaut } from './../../../../http/adminAPI';\n  \nconst Header = ({ user, worker, openProfileSidebar, openSearchSidebar, closeSidebar, showCloseButton, clearFile, setClearFile, clickClearFile  }) => {\n\n\tconst [press, setPress] = useState(false)\n\n\tconst audio = new Audio(sendSound);\n\tconst audioIshodCall = new Audio(ishodCall);\n\n\tconst host = process.env.REACT_APP_API_URL\n\n\tconsole.log(\"user: \", user)\n\tconsole.log(\"worker: \", worker)\n\n\tconst onSelected = (index) => {\n\t\tswitch(index) {\n\t\t\tcase 0: //данные о контакте\n\t\t\t\topenProfileSidebar()\n\t\t\t\tbreak\n\t\t  \n\t\t\tcase 1: \n\t\t\t\tconsole.log('1')\n\t\t\t\tbreak\n\t\t  \n\t\t\tdefault:\n\t\t\t\tconsole.log(\"В разработке\")\n\t\t\t\tbreak\n\t\t  }\n\t};\n\n\tconst onImageError = (e) => {\n\t\te.target.src = avatarDefault\n\t}\n\n\n\tconst clickToCall = async(id) => {\n\t\t// Button begins to shake\n\t\tsetPress(true);\n\t\tconsole.log(id)\n        \n\t\t// Buttons stops to shake after 2 seconds\n\t\tsetTimeout(() => setPress(false), 200);\n\n\t\taudioIshodCall.play();\n\t\tawait getSendCall(id)\n\t}\n\n\tconst clickToCallRaut = async(id) => {\n\t\t// Button begins to shake\n\t\t//setPress(true);\n\t\t//console.log(id)\n        \n\t\t// Buttons stops to shake after 2 seconds\n\t\t//setTimeout(() => setPress(false), 200);\n\n\t\taudioIshodCall.play();\n\t\tawait getSendCallRaut(id)\n\t}\n\n\treturn (\n\t\t<header className=\"headerB chat__header\">\n\t\t\t<div className=\"chat__avatar-wrapper\" onClick={openProfileSidebar}>\n\t\t\t\t{/* {\n\t\t\t\t\tuser.avatar\n\t\t\t\t\t? <img src={`${user.avatar}`} onError={onImageError} alt={user?.name} className=\"avatar-adm\" />\n\t\t\t\t\t: <img src={avatarDefault} alt={user?.name} className=\"avatar-adm\" />\n\t\t\t\t} */}\n\t\t\t\t{\n\t\t\t\t\tuser.avatar\n\t\t\t\t\t? <> {worker[0]?.blockW ? <img src={blockUser} alt='' className=\"avatar-adm\" style={{position: 'absolute', zIndex: '2', width: '40px', height: '40px'}} /> : <></>}\n\t\t\t\t\t\t<img src={`${user.avatar}`} alt='' onError={onImageError} className=\"avatar-adm\" />\n\t\t\t\t\t</>\n\t\t\t\t\t: <> {worker[0]?.blockW ? <img src={blockUser} alt='' className=\"avatar-adm\" style={{position: 'absolute', zIndex: '2', width: '40px', height: '40px'}} /> : <></>}\n\t\t\t\t\t\t<img src={avatarDefault} alt='' className=\"avatar-adm\" />\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t{\n                    worker && worker.length !== 0 ?  \n                    ((JSON.parse(worker[0].worklist)).find(item => item.spec === 'Blacklist') ? \n                    <img src={avatarBlacklist} alt='' width={18} style={{position: 'absolute', top: '34px', left: '32px'}}/>\n                    : \"\")\n                    : \"\"\n                }\n                \n\t\t\t\t{/* {\n                    worker.length !== 0 ? \n                    ((JSON.parse(worker[0].worklist)).find(item => item.spec === '+18') ?   \n                    <img src={block18} alt='' width={18} style={{position: 'absolute', top: '-5px', left: '32px', width: '23px'}}/>\n                    : \"\")\n                    : \"\"\n                } */}\n\t\t\t</div>\n\n\t\t\t<div className=\"chat__contact-wrapper\" onClick={openProfileSidebar}>\n\t\t\t\t<h2 className=\"chat__contact-name\"> {user?.name.split(' ')[0] === user?.name.split(' ')[1] ? user?.name.split(' ')[0] : user?.name}</h2>\n\t\t\t\t<p className=\"chat__contact-desc\">\n\t\t\t\t\t{user.typing ? \"печатает...\" : \"данные контакта\"}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className=\"chat__actions\">\n\t\t\t\t{clearFile ? <CButton color=\"danger\" onClick={clickClearFile}>Очистить</CButton> : ''}\n\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"chat__action\"\n\t\t\t\t\taria-label=\"robot\"\n\t\t\t\t\tonClick={()=>clickToCallRaut(user?.id)}\n\t\t\t\t>\n\t\t\t\t\t<img className='star-icon' src={robot} width={25} alt='' style={{verticalAlign: 'text-top'}} />\n\t\t\t\t</button>\n\n\t\t\t\t<Link to={'/specialist'} state={{ workerId: worker[0]?.id, }}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"chat__action\"\n\t\t\t\t\t\taria-label=\"profile\"\n\t\t\t\t\t\t//onClick={()=>console.log(user?.id)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<img src={editIcon} width={18} alt='' style={{verticalAlign: 'text-bottom'}} />\n\t\t\t\t\t</button>\n\t\t\t\t</Link>\n\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"chat__action\"\n\t\t\t\t\taria-label=\"Phone\"\n\t\t\t\t\tonClick={()=>clickToCall(user?.id)} \n\t\t\t\t\tstyle={{transform: 'rotate(90deg)', color: '#aaabad'}}\n\t\t\t\t>\n\t\t\t\t\t<CIcon icon={cilPhone} size=\"lg\"/>\n\t\t\t\t</button>\n\t\t\t\t\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"chat__action\"\n\t\t\t\t\taria-label=\"Search\"\n\t\t\t\t\tonClick={openSearchSidebar}\n\t\t\t\t>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tid=\"search\"\n\t\t\t\t\t\tclassName=\"chat__action-icon chat__action-icon--search\"\n\t\t\t\t\t/>\n\t\t\t\t</button>\n\n\n\t\t\t\t{/* <OptionsBtn\n\t\t\t\t\tclassName=\"chat__action\"\n\t\t\t\t\tariaLabel=\"Menu\"\n\t\t\t\t\ticonId=\"menu\"\n\t\t\t\t\ticonClassName=\"chat__action-icon\"\n\t\t\t\t\tonSelected={onSelected}\n\t\t\t\t\toptions={[\n\t\t\t\t\t\t\"Данные о контакте\",\n\t\t\t\t\t\t\"Очистить переписку\",\n\t\t\t\t\t\t\"Удалить чат\",\n\t\t\t\t\t]}\n\t\t\t\t/> */}\n\n\t\t\t\t<button onClick={closeSidebar} style={{marginLeft: '15px', display: showCloseButton ? \"block\": \"none\"}}>\n\t\t\t\t\t<Icon id=\"cancel\" className=\"chat-sidebar__header-icon-close\" />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</header>\n\t);\n};\n\nexport default Header;\n","import React from \"react\";\nimport Icon from \"./../../../components/Icon\";\n\nconst ChatSidebar = ({ active, closeSidebar, heading, children }) => {\n\treturn (\n\t\t<aside className={`chat-sidebar ${active ? \"chat-sidebar--active\" : \"\"}`}>\n\t\t\t<header className=\"header chat-sidebar__header\">\n\t\t\t\t<button onClick={closeSidebar}>\n\t\t\t\t\t<Icon id=\"cancel\" className=\"chat-sidebar__header-icon\" />\n\t\t\t\t</button>\n\t\t\t\t<h2 className=\"chat-sidebar__heading\"> {heading}</h2>\n\t\t\t</header>\n\t\t\t<div className=\"chat-sidebar__content\">{children}</div>\n\t\t</aside>\n\t);\n};\n\nexport default ChatSidebar;\n","import Icon from \"./../../../components/Icon\";\nimport React from \"react\";\n\nconst Search = () => {\n\treturn (\n\t\t<>\n\t\t\t<div className=\"search-wrapper\">\n\t\t\t\t<div className=\"search-icons\">\n\t\t\t\t\t<Icon id=\"search\" className=\"search-icon\" />\n\t\t\t\t\t<button className=\"search__back-btn\">\n\t\t\t\t\t\t<Icon id=\"back\" />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<input className=\"search\" placeholder=\"Поиск...\" />\n\t\t\t</div>\n\t\t\t<div className=\"chat-sidebar__search-results\">\n\t\t\t\t<p> Поиск сообщений в чате</p>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default Search;\n","import React, { useState, useContext, useEffect, useRef } from \"react\";\nimport media from \"./../../../../chat-app-new/assets/images/placeholder.jpeg\";\nimport Checkbox from \"./../../../components/Checkbox\";\nimport Icon from \"./../../../components/Icon\";\nimport { editContact, uploadFile, editContactAvatar } from './../../../../http/chatAPI';\nimport { getLastPretendent, blockedWorkers, getWorker } from './../../../../http/workerAPI';\nimport { getSendCall } from './../../../../http/adminAPI';\nimport { getProjectId } from './../../../../http/projectAPI';\nimport { useUsersContext } from \"../../../../chat-app-new/context/usersContext\";\nimport { AccountContext } from './../../../../chat-app-new/context/AccountProvider';\nimport defaultAvatar from \"./../../../../chat-app-new/assets/images/no-avatar.png\";\nimport CIcon from '@coreui/icons-react'\nimport {\n  cilPen,\n  cilMediaPlay,\n  cilPhone\n} from '@coreui/icons'\nimport { \n\tCFormSelect,\n  } from '@coreui/react'\n\nimport { $host } from './../../../../http/index';\nimport sendSound from './../../../../chat-app-new/assets/sounds/sendmessage.mp3';\nimport ishodCall from './../../../../assets/sound/ishod.mp3';\nimport { getSpecialistId, blockedSpecialist, getSpecialistChatId } from \"src/http/specAPI\";\n\nconst Profile = ({ user, closeSidebar }) => {\n\n\t//console.log('user: ', user)\n\tconst chatAdminId = process.env.REACT_APP_CHAT_ADMIN_ID\n\tconst token = process.env.REACT_APP_TELEGRAM_API_TOKEN_WORK\n\tconst host = process.env.REACT_APP_HOST\n\tconst webAppPassport = process.env.REACT_APP_WEBAPP_PASSPORT\n\tconst webAppAnketa = process.env.REACT_APP_WEBAPP_ANKETA\n\n\tconst [username, setUsername] = useState(\"\")\n\tconst [worker, setWorker] = useState(\"\")\n\tconst [avatar, setAvatar] = useState(\"\")\n\tconst [form, setForm] = useState(false)\n\n\tconst { addNewName, addNewAvatar } = useUsersContext();\n\tconst { userWorkers, workersAll } = useUsersContext();\n\tconst { addNewMessage2 } = useUsersContext();\n\n\tconst { setPersonW } = useContext(AccountContext);\n\tconst [img, setImg] = useState(null)\n\tconst [showEdit, setShowEdit] = useState(false)\n\tconst input = React.useRef();\n\n\tconst [phone, setPhone] = useState(\"\")\n\tconst [showButton, setShowButton] = useState(false)\n\tconst [blockWorker, setBlockWorker] = useState(false)\n\tconst [press, setPress] = useState(false)\n\n\tconst audio = new Audio(sendSound);\n\tconst audioIshodCall = new Audio(ishodCall);\n\n\t//select\n    const [selectedElement, setSelectedElement] = useState(\"\")\n\tconst [scenari, setScenari] = useState(\"\")\n\n\tconst [heightImage, setHeightImage] = useState({})\n\n\tconst divBlock = useRef(null);\n\n\tconst [crmId, setCrmId] = useState(\"\")\n\tconst [crmId2, setCrmId2] = useState(\"\")\n\tconst [crmId3, setCrmId3] = useState(\"\")\n\n\tuseEffect(() => {\n\t\tsetImg(`${host}${user.avatar}`)\n\n\t\t//получить данные из ноушена по телеграм id\n\t\tconst fetchData = async () => {\n\t\t\tconsole.log(\"user: \", user)\n\t\t\tconsole.log(\"specialist: \", workersAll)\n\t\t\tconst fio_notion = workersAll.find(item=>item.chatId === user.chatId) //await getWorkerNotionId(user.chatId)\n\t\t\tconsole.log(\"worker: \", fio_notion)\n\t\t\t\n\t\t\tsetWorker(fio_notion)\n\n\t\t\t//const avatars = await getWorkerChildrenId(fio_notion[0]?.id)\n\t\t\t//const avatars = await getWorker(user.chatId)\n\t\t\tsetAvatar(user.avatar)\n\t\t}\n\n\t\tfetchData();\n\t}, [user]);\n\n\tuseEffect(() => {\n\t\tconsole.log(\"user: \", user)\n\n\t\tsetTimeout(()=>{\n\t\t\tsetHeightImage(divBlock.current.getBoundingClientRect())\n\n\t\t\tvar imgsize = new Image();\n\n\t\t\timgsize.onload = function(){\n\t\t\t\tvar height = imgsize.height;\n\t\t\t\tvar width = imgsize.width;\n\n\t\t\t\t// code here to use the dimensions\n\t\t\t\t//console.log(\"height: \", height, \"width: \", width)\n\t\t\t}\n\n\t\t\timgsize.src = user?.avatar;\n\t\t}, 2000)\n\t\t\n\t\tsetPhone(user.phone)\n\t\t\n\t\t// if (user.phone?.includes('-')) {\n\t\t// \tsetPhone(user.phone)\n\t\t// } else {\n\t\t// \tlet str = user.phone\n\t\t// \t//setPhone(`+7 (${str.slice(1, 4)}) ${str.slice(4, 7)}-${str.slice(7, 9)}-${str.slice(9, 11)}`)\n\t\t// \tsetPhone(user.phone)\n\t\t// }\n\t\t\n\t}, [user])\n\n\n\tuseEffect(()=>{\n\n\t\tconst fetch = async() => {\n\t\t\tconst pretendentArray = await getLastPretendent(user.chatId)\n\t\t\tconsole.log(\"pretendentArray: \", pretendentArray)\n\t\t\t\n\t\t\tif (pretendentArray.length > 0) {\n\t\t\t\tconst projectId = pretendentArray[pretendentArray.length-1]?.projectId\n\t\t\t\tconst projectId2 = pretendentArray[pretendentArray.length-2]?.projectId\n\t\t\t\tconst projectId3 = pretendentArray[pretendentArray.length-3]?.projectId\n\t\t\t\t\n\t\t\t\t//получить CrmId по id проекта\n\t\t\t\tconst project = await getProjectId(projectId)\n\t\t\t\tconsole.log(\"project profile: \", project)\n\t\t\t\tconst project2 = await getProjectId(projectId2)\n\t\t\t\tconst project3 = await getProjectId(projectId3)\n\n\t\t\t\tconst crmId = project ? project.crmID : '—'\n\t\t\t\tconst crmId2 = project2 ? project2.crmID : '—'\n\t\t\t\tconst crmId3 = project3 ? project3.crmID : '—' \n\n\t\t\t\tconsole.log(\"crmId: \", crmId, crmId2, crmId3)\n\n\t\t\t\tsetCrmId(crmId)\n\t\t\t\tsetCrmId2(crmId2)\n\t\t\t\tsetCrmId3(crmId3)\n\t\t\t} else {\n\t\t\t\tsetCrmId('—')\n\t\t\t}\t\n\t\t\t\n\t\t\tconst blocked = await getSpecialistChatId(user.chatId)\n\t\t\tconsole.log(\"blocked: \", blocked, user.chatId)\n\t\t\tsetBlockWorker(blocked?.blockW ? blocked?.blockW : false)\n\t\t}\n\t\t\n\t\tfetch()\n\t}, [user])\n\n\tconst clickSetBlocked = async() => {\n\t\tsetBlockWorker(!blockWorker)\n\t\t//заблокировать/разблокировать пользователю рассылки\n\t\tconst res = await blockedSpecialist(user.chatId)\n\t\tconsole.log(\"res block: \", res)\n\t}\n\t\n\tconst onImageError = (e) => {\n\t\te.target.src = defaultAvatar\n\t}\n\n\tconst clickToCall = async(id) => {\n\t\t// Button begins to shake\n\t\tsetPress(true);\n\t\tconsole.log(press)\n        \n\t\t// Buttons stops to shake after 2 seconds\n\t\tsetTimeout(() => setPress(false), 200);\n\n\t\taudioIshodCall.play();\n\t\tawait getSendCall(id)\n\t}\n\n\treturn (\n\t\t<div className=\"profile\">\n\t\t\t<div className=\"profile__sectionW profile__sectionW--personal\">\n\t\t\t\t<div className=\"profile__avatar-wrapperW profile__avatar-worker\" ref={divBlock}>\n\t\t\t\t\t{\n\t\t\t\t\t\tuser?.avatar\n\t\t\t\t\t\t\t? <img src={user?.avatar} onError={onImageError} alt={user?.name} width='100%' height={heightImage.width} style={{objectFit: 'cover'}} />//<img src={`${host}${user.avatar}`} alt={user?.name} className=\"avatar-adm\" />\n\t\t\t\t\t\t\t: <img src={defaultAvatar} alt={user?.name} width='100%' height={heightImage.width} style={{objectFit: 'cover'}} />\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<h2 className=\"profile__name\" style={{textAlign: 'center'}}>{user?.name.split(' ')[0] === user?.name.split(' ')[1] ? user?.name.split(' ')[0] : user?.name}</h2>\n\t\t\t</div>\n\n\t\t\t<ul className=\"profile__sectionW profile__section--actions\">\t\n\n\t\t\t\t<li className=\"profile__actionW\">\n\t\t\t\t\t<p className=\"profile__actionW-left\">\n\t\t\t\t\t\t<span className=\"profile__action-text--bottom\">\n\t\t\t\t\t\t\tТелефон\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"profile__action-text--top profile__notion\">\n\t\t\t\t\t\t\t{user ? \n\t\t\t\t\t\t\t(user.phone !== '' ? user.phone : \"—\")\n\t\t\t\t\t\t\t: \"—\"}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</p>\n\t\t\t\t</li>\t\t\t\n\n\t\t\t\t<li className=\"profile__actionW\">\n\t\t\t\t\t<p className=\"profile__actionW-left\">\n\t\t\t\t\t\t<span className=\"profile__action-text--bottom\">\n\t\t\t\t\t\t\tГород\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"profile__action-text--top profile__notion\">\n\t\t\t\t\t\t{user ? \n\t\t\t\t\t\t\t(user.city !== '' ? user.city : \"—\")\n\t\t\t\t\t\t\t: \"—\"}\n\t\t\t\t\t\t</span>\t\n\t\t\t\t\t</p>\n\t\t\t\t</li>\t\t\t\n\n\t\t\t\t<li className=\"profile__actionW\">\n\t\t\t\t\t<p className=\"profile__actionW-left\">\n\t\t\t\t\t\t<span className=\"profile__action-text--bottom\">\n\t\t\t\t\t\t\tДата рождения\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"profile__action-text--top profile__notion\">\n\t\t\t\t\t\t\t{user ? \n\t\t\t\t\t\t\t(user.age ? user.age.split('-')[2] +'.'+user.age.split('-')[1]+'.'+user.age.split('-')[0] : \"—\")\n\t\t\t\t\t\t\t: \"—\"}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</p>\n\t\t\t\t</li>\n\n\t\t\t\t<li className=\"profile__actionW\">\n\t\t\t\t\t<p className=\"profile__actionW-left\">\n\t\t\t\t\t\t<span className=\"profile__action-text--bottom\">\n\t\t\t\t\t\t\tTelegram ID\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<span className=\"profile__action-text--top profile__notion\">\n\t\t\t\t\t\t\t{user.chatId}\n\t\t\t\t\t\t\t<div style={{fontSize: '16px', color: '#656565'}}>{user.username ? `@${user.username}` : user.username}</div>\t\t\t\t\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</p>\n\t\t\t\t</li>\n\n\t\t\t\t<li className=\"profile__actionW\">\n\t\t\t\t\t<p className=\"profile__actionW-left\">\n\t\t\t\t\t\t<span className=\"profile__action-text--bottom\">\n\t\t\t\t\t\t\tСпециальность\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"profile__action-text--top\" style={{textAlign: 'right'}}>\n\t\t\t\t\t\t\t{/* {worker.spec?.map((item)=>item.name).join('')} */}\n\t\t\t\t\t\t\t<table className=\"table-noborder\">{worker ? JSON.parse(worker.worklist)?.map((worker, index) => <tr key={index}><td>{worker.spec}</td></tr> ) : '—'}</table>\n\t\t\t\t\t\t</span>\t\n\t\t\t\t\t</p>\n\t\t\t\t</li>\n\n\t\t\t\t<li className=\"profile__actionW\">\n\t\t\t\t\t<p className=\"profile__actionW-left\">\n\t\t\t\t\t\t<span className=\"profile__action-text--bottom\">\n\t\t\t\t\t\t\tПоследний отклик на проект\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<span className=\"profile__action-text--top profile__notion\">\n\t\t\t\t\t\t\t{crmId3}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"profile__action-text--top profile__notion\">\n\t\t\t\t\t\t\t{crmId2}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"profile__action-text--top profile__notion\">\n\t\t\t\t\t\t\t{crmId}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</p>\n\t\t\t\t</li>\t\t\t\n\t\t\t</ul>\n\n\t\t\t<div \n\t\t\t\tclassName=\"profile__sectionW profile__section--success\" \n\t\t\t\tonClick={()=>clickToCall(user.chatId)} \n\t\t\t\tstyle={{cursor: 'pointer', backgroundColor: press ? '#0e1518' : '#131c21'}} \n\t\t\t>\n\t\t\t\t{/* <CIcon icon={cilPhone} className=\"profile__success-icon\" /> */}\n\t\t\t\t<Icon id=\"phone\" className=\"profile__success-icon\" />\n\t\t\t\t<p className=\"profile__success-text profile__worker\">Позвонить</p>\n\t\t\t</div>\n\n\t\t\t<div className=\"profile__sectionW profile__sectionW--danger\">\n\t\t\t\t<Icon id=\"block\" className=\"profile__danger-icon\" />\n\t\t\t\t<p className=\"profile__danger-text profile__worker\" style={{cursor: 'pointer'}} onClick={clickSetBlocked}>{blockWorker ? 'Разблокировать' : 'Заблокировать'}</p>\n\t\t\t</div>\n\n\t\t\t<div className=\"profile__sectionW profile__sectionW--danger\">\n\t\t\t\t<Icon id=\"delete\" className=\"profile__danger-icon\" />\n\t\t\t\t<p className=\"profile__danger-text profile__worker\"> Очистить переписку </p>\n\t\t\t</div>\n\n\t\t\t<div className=\"profile__sectionW profile__sectionW--danger\">\n\t\t\t\t<Icon id=\"delete\" className=\"profile__danger-icon\" />\n\t\t\t\t<p className=\"profile__danger-text profile__worker\"> Удалить чат </p>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Profile;\n","var _path, _path2, _path3;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgSpIMImagePlaceholder(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 48,\n    height: 46,\n    viewBox: \"0 0 48 46\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M0 7C0 5.34315 1.34315 4 3 4H45C46.6569 4 48 5.34315 48 7V37C48 38.6569 46.6569 40 45 40H33C32.4477 40 32 39.5523 32 39C32 38.4477 32.4477 38 33 38H45C45.5523 38 46 37.5523 46 37V7C46 6.44771 45.5523 6 45 6H3C2.44772 6 2 6.44772 2 7V37C2 37.5523 2.44772 38 3 38H15C15.5523 38 16 38.4477 16 39C16 39.5523 15.5523 40 15 40H3C1.34315 40 0 38.6569 0 37V7Z\",\n    fill: \"#9DB5C4\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M24 30C24.5523 30 25 30.4477 25 31V39L27.4 37.2C27.8418 36.8686 28.4686 36.9582 28.8 37.4C29.1314 37.8418 29.0418 38.4686 28.6 38.8L24.6 41.8C24.2444 42.0667 23.7556 42.0667 23.4 41.8L19.4 38.8C18.9582 38.4686 18.8686 37.8418 19.2 37.4C19.5314 36.9582 20.1582 36.8686 20.6 37.2L23 39V31C23 30.4477 23.4477 30 24 30ZM18 45C18 44.4477 18.4477 44 19 44H29C29.5523 44 30 44.4477 30 45C30 45.5523 29.5523 46 29 46H19C18.4477 46 18 45.5523 18 45Z\",\n    fill: \"#9DB5C4\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M46 7C46 6.44772 45.5523 6 45 6H3C2.44772 6 2 6.44771 2 7V34L14 23L20 28L34 15L46 25V7ZM12 18C14.2091 18 16 16.2091 16 14C16 11.7909 14.2091 10 12 10C9.79086 10 8 11.7909 8 14C8 16.2091 9.79086 18 12 18Z\",\n    fill: \"#D3E2EB\"\n  })));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSpIMImagePlaceholder);\nexport default __webpack_public_path__ + \"static/media/sp-i-m-image-placeholder.747d6db2c3e802991d67cf945923e1db.svg\";\nexport { ForwardRef as ReactComponent };","import Icon from \"./../../../components/Icon\";\nimport React, { useContext, useState, useRef, useEffect } from \"react\";\n\nimport { CSpinner } from '@coreui/react'\n\n// import pdf from \"./../../../assets/images/PDFicon.png\";\nimport docIcon from \"./../../../../chat-app-new/assets/images/DOCicon.jpg\";\nimport xlsIcon from \"./../../../../chat-app-new/assets/images/XLSicon.png\";\nimport formatTime from \"./../../../../chat-app-new/utils/formatTime\";\nimport { AccountContext } from './../../../../chat-app-new/context/AccountProvider';\nimport { useUsersContext } from \"../../../../chat-app-new/context/usersContext\";\nimport { $host } from './../../../../http/index'\nimport { delWMessage, getWMessages2 } from \"src/http/workerAPI\";\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport imageIcon from \"./../../../assets/images/sp-i-m-image-placeholder.svg\";\n\nconst Convo = ({ lastMsgRef, messages: allMessages, convId }) => {\n\tconst { personW } = useContext(AccountContext);\n\t\n\tconst chatAdminId = process.env.REACT_APP_CHAT_ADMIN_ID \n\tconst tokenW = process.env.REACT_APP_TELEGRAM_API_TOKEN_WORK\n\n\tconst [showImage, setShowImage] = useState([false])\n\tconst [loading, setLoading]= useState(false);\n\n\tconst [newMessages, setNewMessages] = useState([])\n\tconst [dates, setDates] = useState([])\n\tconst [allArr, setAllArr] = useState(0)\n\n\t//const dates = Object.keys(allMessages);  //['01/01/2023', 'Сегодня']\n\n\tconst msgRef = useRef([]);\n\n\tlet replyMessage;\n\tlet array = []\n\n\tconst { delWMessageContext } = useUsersContext();\n\n\tuseEffect(() => {\n\t\tsetDates(Object.keys(allMessages))  //['01/01/2023', 'Сегодня']\n\t\tsetNewMessages(allMessages)\n\n\t\t//console.log(\"array: \", allMessages)\n\n\t\tconst objDate = Object.keys(allMessages)\n\t\t\n\t\tobjDate.map((date, dateIndex) => {\n\t\t\tarray.push(...allMessages[date]) //allMessages[date];\n\t\t}) \n\t\t//console.log(\"array: \", array)\n\t\tsetAllArr(array.length)\n\t\t\n\t}, [allMessages])\n\n\tuseEffect(() => {\n\t\tsetDates(Object.keys(newMessages))  //['01/01/2023', 'Сегодня']\n\t\t\n\t}, [newMessages])\n\n\tconst startLoadMessages = async() => {\n        console.log('convId: ', convId)\n\t\tsetLoading(!loading)\n\n\t\tconsole.log(\"array: \", allArr)\n\n\t\tconst newMess = await getWMessages2(convId, 20, allArr)\n\t\tconsole.log(\"newMessages: \", newMess.length + allArr)\n\n\t\tsetAllArr(newMess.length + allArr)\n\n\t\tconst arrayMessage = []\n\t\tconst allDate = []\n\n\t\tif (newMess && newMess.length > 0) {\n\t\t\tnewMess.map(message => {\n\t\t\t\tconst d = new Date(message.createdAt);\n\t\t\t\tconst year = d.getFullYear();\n\t\t\t\tconst month = String(d.getMonth()+1).padStart(2, \"0\");\n\t\t\t\tconst day = String(d.getDate()).padStart(2, \"0\");\n\t\t\t\tconst chas = d.getHours();\n\t\t\t\tconst minut = String(d.getMinutes()).padStart(2, \"0\");\n\t\t\t\n\t\t\t\tconst newDateMessage = `${day}.${month}.${year}`\n\t\t\n\t\t\t\tconst newMessage = {\n\t\t\t\t\tdate: newDateMessage,\n\t\t\t\t\tcontent: message.text,\n\t\t\t\t\timage: message.type === 'image' ? true : false,\n\t\t\t\t\tdescript: message.buttons ? message.buttons : '',\n\t\t\t\t\tsender: message.senderId,\n\t\t\t\t\ttime: chas + ' : ' + minut,\n\t\t\t\t\tstatus: 'sent',\n\t\t\t\t\tid:message.messageId,\n\t\t\t\t\treply:message.replyId,\n\t\t\t\t}\n\t\t\t\tarrayMessage.push(newMessage)\n\t\t\t\tallDate.push(newDateMessage)\n\t\t\t})\n\t\t}\t\n\t\t\n\t\tconst dates = [...allDate].filter((el, ind) => ind === allDate.indexOf(el));\n\t\t\n\t\tlet obj = {};\n\t\tfor (let i = 0; i < dates.length; i++) {\n\t\t\tconst arrayDateMessage = []\n\t\t\tfor (let j = 0; j < arrayMessage.length; j++) {\n\t\t\t\tif (arrayMessage[j].date === dates[i]) {\n\t\t\t\t\tarrayDateMessage.push(arrayMessage[j])\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\t\n\t\t\tobj[dates[i]] = arrayDateMessage;\n\t\t}\n\t\tconsole.log(\"obj: \", obj)\n\n\t\tif (Object.keys(obj).length !== 0) {\n\t\t\tsetNewMessages(obj)\n\t\t}\n\n\t\tsetLoading(false)\n    }\n\n\n\t//прокрутка\n\tconst scrollToMsg = (id) => {\n\t\tconsole.log(id)\n\t\t//alert(id)\n\t\tconsole.log(msgRef.current)\n\t\tmsgRef.current[id].scrollIntoView({transition: \"smooth\"});\n\t};\n\n\tconst CustomToggle = React.forwardRef(({ children, onClick }, ref) => (\n\t\t<button\n\t\t\taria-label=\"Message options\"\n\t\t\tclassName=\"chat__msg-options\"\n\t\t\tstyle={{right: '0', top: '0px'}}\n\t\t\tref={ref}\n\t\t\tonClick={(e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tonClick(e);\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t\t<Icon id=\"downArrow\" className=\"chat__msg-options-icon\" />\t\t\t\t\t\t\t\t\t\t\t\n\t\t</button>\n\t));\n\n\tconst CustomToggleBottom = React.forwardRef(({ children, onClick }, ref) => (\n\t\t<button\n\t\t\taria-label=\"Message options\"\n\t\t\tclassName=\"chat__msg-options\"\n\t\t\tstyle={{right: '0', top: '-35px'}}\n\t\t\tref={ref}\n\t\t\tonClick={(e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tonClick(e);\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t\t<Icon id=\"downArrow\" className=\"chat__msg-options-icon\" />\t\t\t\t\t\t\t\t\t\t\t\n\t\t</button>\n\t));\n\n\tconst CustomToggle2 = React.forwardRef(({ children, onClick }, ref) => (\n\t\t<button\n\t\t\taria-label=\"Message options\"\n\t\t\tclassName=\"chat__msg-options\"\n\t\t\tstyle={{right: '0', top: '-20px'}}\n\t\t\tref={ref}\n\t\t\tonClick={(e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tonClick(e);\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t\t<Icon id=\"downArrow\" className=\"chat__msg-options-icon\" />\t\t\t\t\t\t\t\t\t\t\t\n\t\t</button>\n\t));\n\n\tCustomToggle.displayName = \"Del\";\n\tCustomToggle2.displayName = \"Del2\";\n\tCustomToggleBottom.displayName = \"Del3\";\n\n\tconst CustomMenu = React.forwardRef(\n\t\t({ children, style, className, 'aria-labelledby': labeledBy }, ref) => {\n\t\t  const [value, setValue] = useState('');\n\t  \n\t\t  return (\n\t\t\t<div\n\t\t\t  ref={ref}\n\t\t\t  style={{backgroundColor: '#20272b', left: 0, borderRadius: '15px', padding: '0 0 0 0', fontSize: '14px', top: '10px', minWidth:'50px'}}\n\t\t\t  className={className}\n\t\t\t  aria-labelledby={labeledBy}\n\t\t\t>\n\t\t\t  <ul className=\"list-unstyled\" style={{marginBottom: '0'}}>\n\t\t\t\t{React.Children.toArray(children).filter(\n\t\t\t\t  (child) =>\n\t\t\t\t\t!value || child.props.children?.toLowerCase().startsWith(value),\n\t\t\t\t)}\n\t\t\t  </ul>\n\t\t\t</div>\n\t\t  );\n\t\t},\n\t);\n\n\tconst CustomMenu2 = React.forwardRef(\n\t\t({ children, style, className, 'aria-labelledby': labeledBy }, ref) => {\n\t\t  const [value, setValue] = useState('');\n\t  \n\t\t  return (\n\t\t\t<div\n\t\t\t  ref={ref}\n\t\t\t  style={{backgroundColor: '#20272b', right: 0, borderRadius: '15px', padding: '0 0 0 0', fontSize: '14px', top: '10px', minWidth:'50px'}}\n\t\t\t  className={className}\n\t\t\t  aria-labelledby={labeledBy}\n\t\t\t>\n\t\t\t  <ul className=\"list-unstyled\" style={{marginBottom: '0'}}>\n\t\t\t\t{React.Children.toArray(children).filter(\n\t\t\t\t  (child) =>\n\t\t\t\t\t!value || child.props.children?.toLowerCase().startsWith(value),\n\t\t\t\t)}\n\t\t\t  </ul>\n\t\t\t</div>\n\t\t  );\n\t\t},\n\t);\n\n\tconst CustomMenuBottom = React.forwardRef(\n\t\t({ children, style, className, 'aria-labelledby': labeledBy }, ref) => {\n\t\t  const [value, setValue] = useState('');\n\t  \n\t\t  return (\n\t\t\t<div\n\t\t\t  ref={ref}\n\t\t\t  style={{backgroundColor: '#20272b', right: 0, borderRadius: '15px', padding: '0 0 0 0', fontSize: '14px', bottom: '-28px', minWidth:'50px'}}\n\t\t\t  className={className}\n\t\t\t  aria-labelledby={labeledBy}\n\t\t\t>\n\t\t\t  <ul className=\"list-unstyled\" style={{marginBottom: '0'}}>\n\t\t\t\t{React.Children.toArray(children).filter(\n\t\t\t\t  (child) =>\n\t\t\t\t\t!value || child.props.children?.toLowerCase().startsWith(value),\n\t\t\t\t)}\n\t\t\t  </ul>\n\t\t\t</div>\n\t\t  );\n\t\t},\n\t);\n\n\tCustomMenu.displayName = CustomMenu\n\tCustomMenu2.displayName = CustomMenu2\n\tCustomMenuBottom.displayName = CustomMenuBottom\n\n\tconst change = async (eventkey) => {\n\t\t//alert(`you chosen: ${eventkey}`)\n\t\tconst message = JSON.parse(eventkey);\n\t\tconsole.log(\"message: \", message)\n\n\t\t//удалить сообщение через сокет\n\t\tdelWMessageContext(message.id, message.date, message.chatId)\n\n\t\t//удалить сообщение в базе данных\n\t\tawait delWMessage(message.id)\n\n\t\tconst url_del_msg = `https://api.telegram.org/bot${tokenW}/deleteMessage?chat_id=${personW.id}&message_id=${message.id}`\n\n\t\tconst delToTelegram = await $host.get(url_del_msg);\n\n\t\tconsole.log(\"Удаляемое сообщение: \", message.id)\n\t\tconsole.log(\"Дата сообщения: \", message.date)\n\n\t\t//Выводим сообщение об успешной отправке\n\t\tif (delToTelegram) {\n\t\t\tconsole.log('Ваше сообщение удалено из телеграм! ', delToTelegram);\t\n\t\t}           \n\t\t//А здесь сообщение об ошибке при отправке\n\t\telse {\n\t\t\tconsole.log('Что-то пошло не так. Попробуйте ещё раз.');\n\t\t}\t\t\n\t}\n\n\tconst handleClick = (ind) => {\n        //console.log(ind, showImage)\n\t\twindow.event.stopPropagation();\t\n\n        setShowImage(prevShownImage => ({\n            ...prevShownImage,\n            [ind]: !prevShownImage[ind]\n        }));\n\n\t\t// setTimeout(()=> {\n\t\t// \tsetShowImage(false)\n\t\t// }, 30000)\n\n    }\n\n\n\treturn dates.map((date, dateIndex) => {\n\t\tconst messages = newMessages[date] //allMessages[date]; \n\t\t\n\t\treturn (\n\t\t\t<div key={dateIndex}>\n\t\t\t\t{dateIndex === 0 && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"chat__date-wrapper\">{loading && <CSpinner/>}</div>\n\t\t\t\t\t\n\t\t\t\t\t\t<div className=\"chat__date-wrapper\" style={{cursor: 'pointer', textAlign: 'end'}}>\n\t\t\t\t\t\t\t<span className=\"chat__date\" onClick={startLoadMessages}>Загрузить ещё</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t\n\t\t\t\t<div key={dateIndex} className=\"chat__date-wrapper\">\n\t\t\t\t\t<span className=\"chat__date\"> {date}</span>\n\t\t\t\t</div>\n\t\t\t\t{dateIndex === 0 && (\n\n\t\t\t\t\t<p className=\"chat__encryption-msg\">\n\t\t\t\t\t\t<Icon id=\"lock\" className=\"chat__encryption-icon\" />\n\t\t\t\t\t\tСообщения шифруются сквозным шифрованием. Никто за пределами этого чата не может читать или слушать их\n\t\t\t\t\t</p>\n\t\t\t\t)}\n\t\t\t\t<div className=\"chat__msg-group\" >\n\t\t\t\t\t{messages.map((message, msgIndex) => {\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t//получить сообщение по его id\n\t\t\t\t\t\tif (message.content?.includes('_reply_')) {\n\t\t\t\t\t\t\treplyMessage = message?.content.split('_reply_')[0] //messages.find(mess=> mess.id === message.content.split('_reply_')[0])\n\t\t\t\t\t   \t} \n\n\t\t\t\t\t\tconst assignRef = () =>\n\t\t\t\t\t\t\tdateIndex === dates.length - 1 && msgIndex === messages.length - 1\n\t\t\t\t\t\t\t\t? lastMsgRef\n\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{message.image \n\t\t\t\t\t\t\t\t? (\t//картинки\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={`chat__msg chat__img-wrapper ${\n\t\t\t\t\t\t\t\t\t\t\tmessage.sender !== chatAdminId ? \"chat__msg_img--rxd\" : \"chat__msg_img--sent\"\n\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\tref={assignRef()}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{message.content.endsWith('.pdf') \n\t\t\t\t\t\t\t\t\t\t? ( //pdf\n\t\t\t\t\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t\t\t\t\t{/* <img src={pdf} width={30}/>\n\t\t\t\t\t\t\t\t\t\t\t<a href={message.content} target=\"_blank\" rel=\"noreferrer\">{message.content}</a>*/}\n\t\t\t\t\t\t\t\t\t\t\t<iframe src={message.content} height=\"235px\" width=\"100%\" title=\"myFramePdf\"/>\n\t\t\t\t\t\t\t\t\t\t</figure>) : \n\t\t\t\t\t\t\t\t\t\t\tmessage.content.endsWith('.xlsx') \n\t\t\t\t\t\t\t\t\t\t\t? <figure> \n\t\t\t\t\t\t\t\t\t\t\t\t<img src={xlsIcon} width={30}/>\n\t\t\t\t\t\t\t\t\t\t\t\t<a href={message.content} target=\"_blank\" rel=\"noreferrer\">{message.content}</a> \n\t\t\t\t\t\t\t\t\t\t\t</figure> \n\t\t\t\t\t\t\t\t\t\t\t: message.content.endsWith('.docx') \n\t\t\t\t\t\t\t\t\t\t\t? <figure> \n\t\t\t\t\t\t\t\t\t\t\t\t<img src={docIcon} width={30}/>\n\t\t\t\t\t\t\t\t\t\t\t\t<a href={message.content} target=\"_blank\" rel=\"noreferrer\">{message.content}</a> \n\t\t\t\t\t\t\t\t\t\t\t</figure> \n\t\t\t\t\t\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t\t\t\t\t<figure style={{margin:showImage[msgIndex + personW.id] ? '0 0 3rem': '0 0 1rem', position: 'relative'}}>\n\t\t\t\t\t\t\t\t\t\t\t\t{showImage[msgIndex + personW.id]  \n\t\t\t\t\t\t\t\t\t\t\t\t? <a href={message.content} target=\"_blank\" rel=\"noreferrer\"><img src={message.content} alt=\"\" className=\"chat__img\" /></a>\t\n\t\t\t\t\t\t\t\t\t\t\t\t: <div \n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={()=>handleClick(msgIndex + personW.id)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: '100%', \n\t\t\t\t\t\t\t\t\t\t\t\t\t\theight: '100px', \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: '#3179a3', \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: '10px', \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpadding: '25px 75px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tposition: 'relative',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div onClick={()=>console.log(\"console\")}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* <a href={message.content} target=\"_blank\" rel=\"noreferrer\"> */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src={imageIcon} alt=\"\" className=\"chat__img\"  style={{width: '50px'}}/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* </a> */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t</div>}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{/* footer */}\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"chat__msg_img-footer\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{formatTime(message.time)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!message.sender && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage?.status === \"sent\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"singleTick\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"doubleTick\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={message?.status}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`chat__msg-status-icon ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage?.status === \"read\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"chat__msg-status-icon--blue\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t{/*<figcaption style={{textAlign: 'center', borderRadius: '5px'}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{message.descript}\n\t\t\t\t\t\t\t\t\t\t\t\t\t <div style={{display: 'flex', justifyContent: 'space-between', padding: '10px 0'}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={{width:'100px', height: '30px', backgroundColor: '#7b7777', borderRadius: '10px', padding: '3px 0'}}>Принять</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={{width:'100px', height: '30px', backgroundColor: '#7b7777', borderRadius: '10px', padding: '3px 0'}}>Отклонить</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t\t\t\t\t</figcaption>*/}\n\n\t\t\t\t\t\t\t\t\t\t<Dropdown onSelect={change}>\n\t\t\t\t\t\t\t\t\t\t\t<Dropdown.Toggle as={CustomToggleBottom} id=\"dropdown-custom-components\">\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</Dropdown.Toggle>\n\t\t\t\t\t\t\t\t\t\t\t<Dropdown.Menu as={CustomMenuBottom}>\n\t\t\t\t\t\t\t\t\t\t\t<Dropdown.Item eventKey={JSON.stringify({id: message.id, date: message.date, chatId: personW.id})}>Удалить</Dropdown.Item>\n\t\t\t\t\t\t\t\t\t\t\t</Dropdown.Menu>\n\t\t\t\t\t\t\t\t\t\t</Dropdown>\t\n\n\t\t\t\t\t\t\t\t\t\t\t</figure>)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : message.sender !== chatAdminId ? (\n\t\t\t\t\t\t\t\t\t<p className=\"chat__msg chat__msg--rxd\" ref={assignRef()}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-row\" ref={el => msgRef.current[message.id] = el} >\n\t\t\t\t\t\t\t\t\t\t\t{/* пересылаемое сообщение */}\n\t\t\t\t\t\t\t\t\t\t\t{message.content?.includes('_reply_') \n\t\t\t\t\t\t\t\t\t\t\t? <div className=\"chat__msg--reply\" onClick={()=>scrollToMsg(message.reply)}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"reply__content\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"reply__full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"reply__left\"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"reply__pad\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"reply__contact\">U.L.E.Y</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"reply__text\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* {replyMessage?.content.endsWith('.pdf') ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<iframe src={message.content} height=\"50px\" width=\"50px\" title=\"myFramePdf\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</figure>) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href={replyMessage?.content} target=\"_blank\" rel=\"noreferrer\"><img src={replyMessage?.content} alt=\"\" width='50px' height='50px' /></a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figcaption style={{textAlign: 'center', backgroundColor: '#607a7a', borderRadius: '5px'}}></figcaption>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)} */}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{replyMessage?.startsWith('http') ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href={replyMessage} target=\"_blank\" rel=\"noreferrer\"><img src={replyMessage} alt='' width='50px' height='50px' /></a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: replyMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t: <></>}\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t{/* {message.content?.startsWith('http') \n\t\t\t\t\t\t\t\t\t\t\t\t? <a className=\"chat__href\" href={message.content} target=\"_blank\" rel=\"noreferrer\">{message.content}</a> \n\t\t\t\t\t\t\t\t\t\t\t\t: message.content.includes('_reply_') ? message.content.split('_reply_')[1] : message.content}  */}\n\t\t\t\t\t\t\t\t\t\t\t\t{message.content?.includes('_reply_') \n\t\t\t\t\t\t\t\t\t\t\t\t? message.content.split('_reply_')[1] \n\t\t\t\t\t\t\t\t\t\t\t\t: message.content}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"chat__msg-filler\"> </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"chat__msg-footer\">\n\t\t\t\t\t\t\t\t\t\t\t\t{formatTime(message.time)}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t\t<Dropdown onSelect={change}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Dropdown.Toggle as={CustomToggle} id=\"dropdown-custom-components\">\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t</Dropdown.Toggle>\n\t\t\t\t\t\t\t\t\t\t\t\t<Dropdown.Menu as={CustomMenu}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Dropdown.Item eventKey={JSON.stringify({id: message.id, date: message.date, chatId: personW.id})}>Удалить</Dropdown.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t</Dropdown.Menu>\n\t\t\t\t\t\t\t\t\t\t\t</Dropdown>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<p className=\"chat__msg chat__msg--sent\" ref={assignRef()}>\n\t\t\t\t\t\t\t\t\t\t<div ref={el => msgRef.current[message.id] = el}>\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t{message.content?.startsWith('http') \n\t\t\t\t\t\t\t\t\t\t\t\t? <a className=\"chat__href\" href={message.content} target=\"_blank\" rel=\"noreferrer\">{message.content}</a> \n\t\t\t\t\t\t\t\t\t\t\t\t: message.content}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"chat__msg-filler\"> </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"chat__msg-footer\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span> {formatTime(message.time)} </span>\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\t\tid={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage?.status === \"sent\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"singleTick\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"doubleTick\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={message?.status}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`chat__msg-status-icon ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage?.status === \"read\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"chat__msg-status-icon--blue\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t\t<Dropdown onSelect={change}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Dropdown.Toggle as={CustomToggle2} id=\"dropdown-custom-components\">\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t</Dropdown.Toggle>\n\t\t\t\t\t\t\t\t\t\t\t\t<Dropdown.Menu as={CustomMenu2}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Dropdown.Item eventKey={JSON.stringify({id: message.id, date: message.date, chatId: personW.id})}>Удалить</Dropdown.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t</Dropdown.Menu>\n\t\t\t\t\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t});\n};\n\nexport default Convo;\n","import React from \"react\";\nimport Icon from \"../../../components/Icon\";\n\nconst ChatSidebarProfile = ({ active, closeSidebar, heading, children }) => {\n\treturn (\n\t\t<aside className={`chat-sidebar ${active ? \"chat-sidebar--active\" : \"\"}`}>\n\t\t\t{/* <header className=\"header chat-sidebar__header\">\n\t\t\t\t<button onClick={closeSidebar}>\n\t\t\t\t\t<Icon id=\"cancel\" className=\"chat-sidebar__header-icon\" />\n\t\t\t\t</button>\n\t\t\t\t<h2 className=\"chat-sidebar__heading\"> {heading}</h2>\n\t\t\t</header> */}\n\t\t\t<div className=\"chat-sidebar__content\">{children}</div>\n\t\t</aside>\n\t);\n};\n\nexport default ChatSidebarProfile;\n","import React, { useEffect, useRef, useState, useContext } from \"react\";\nimport \"./styles/main.css\";\nimport EmojiPicker from 'emoji-picker-react';\n\nimport EmojiTray from \"./components/EmojiTray\";\nimport ChatInput from \"./components/ChatInput\";\nimport Header from \"./components/Header\";\nimport ChatSidebar from \"./components/ChatSidebar\";\nimport Icon from \"./../../components/Icon\";\nimport Search from \"./components/Search\";\nimport Profile from \"./components/Profile\";\nimport Convo from \"./components/Convo\";\nimport { useUsersContext } from \"./../../../chat-app-new/context/usersContext\";\nimport { AccountContext } from './../../../chat-app-new/context/AccountProvider';\nimport { newMessage, uploadFile } from \"src/http/workerAPI\";\nimport { newCountWMessage, getCountMessage } from \"src/http/adminAPI\";\nimport { $host } from './../../../http/index'\nimport sendSound from './../../../chat-app-new/assets/sounds/sendmessage.mp3';\nimport axios from 'axios';\nimport ChatSidebarProfile from \"./components/ChatSidebarProfile\";\n\nimport { \n\tCButton,\n\tCModal,\n\tCModalHeader,\n\tCModalTitle,\n\tCModalBody,\n\tCModalFooter\n  } from '@coreui/react'\n\nconst chatAdminId = process.env.REACT_APP_CHAT_ADMIN_ID\nconst token_work = process.env.REACT_APP_TELEGRAM_API_TOKEN_WORK\nconst host = process.env.REACT_APP_HOST\nconst baseURL = process.env.REACT_APP_API_URL\nconst webAppAnketa = process.env.REACT_APP_WEBAPP_ANKETA\n\nconst Chat = () => {\n\tconst { userWorkers, setUserAsUnread, addNewMessage2, conversations, workersAll } = useUsersContext();\n\tconst { personW } = useContext(AccountContext);\n\tconst { setCountMessage } = useUsersContext();\n\n\tconst chatId = personW.id;\n\tlet user = userWorkers.filter((user) => user.chatId === chatId.toString())[0];\n\tlet convs = conversations.find((conv) => conv.members[0] === chatId.toString());\n\n\tlet data2\n\n\tconst lastMsgRef = useRef(null);\n\tconst [showAttach, setShowAttach] = useState(false);\n\tconst [showEmojis, setShowEmojis] = useState(false);\n\tconst [showProfileSidebar, setShowProfileSidebar] = useState(false);\n\tconst [showSearchSidebar, setShowSearchSidebar] = useState(false);\n\tconst [file, setFile] = useState();\n\tconst [image, setImage]= useState(\"\");\n\tconst [mess, setMess] = useState(\"\");\n\tconst [fileType, setFileType] = useState(\"\");\n\tconst [showPicker, setShowPicker] = useState(false)\n\tconst [chosenEmoji, setChosenEmoji] = useState('');\n\n\tconst [clearFile, setClearFile] = useState(false)\n\tconst [showCloseButton, setShowCloseButton] = useState(false)\n\tconst [showErrorFile, setShowErrorFile] = useState(false);\n\n\t//select\n    const [selectedElement, setSelectedElement] = useState(\"\")\n\tconst [scenari, setScenari] = useState(\"\")\n\n\t// для хранения ответа от бекенда\n\tconst [data, getFile] = useState({ name: \"\", path: \"\" });\n\tconst [progress, setProgess] = useState(0); // progessbar\n  \tconst el = useRef(); // для доступа к инпуту\n\n\tconst audio = new Audio(sendSound);\n\n\tconst [poster, setPoster] = useState(\"\")\n\n\tconst refreshPage = ()=>{\n\t\twindow.location.reload(true);\n\t }\n\n\tuseEffect(() => {\n\t\t//console.log(\"personW: \", personW.id)\n\t\tif (user) {\n\t\t\tscrollToLastMsg();\n\t\t\tsetUserAsUnread(user.chatId);\n\t\t\tsetCountMessage(0)\n\t\t\t//обнулить кол-во сообщений\n\t\t\t//const kol_mess = getCountMessage()\n\t\t\t//newCountWMessage(kol_mess - 1)\n\t\t}\n\t}, []);\n\n\tuseEffect(() => {\n\t\tuser && scrollToLastMsg();\n\t}, [userWorkers]);\n\n\tuseEffect(() => {\n\t\tconsole.log(selectedElement)\n\t\tsetSelectedElement(selectedElement);\n\t\tsetScenari(selectedElement)\n\n\t\tlet text = ''\n\t\t\n\t\t//Стандартный ответ\n\t\tif (selectedElement === '0') {\n\t\t\ttext = `${user.name.split(' ')[1]}, я юный чат-бот и еще не всё умею. Любой вопрос поможет решить наш оператор: +7 (499) 500-14-11`\n\t\t\tsetMess(text)\n\t\t}\n\t\t//Паспорт\n\t\telse if (selectedElement === '1') {\n\t\t\ttext = \"Отправка запроса паспорта...\"\n\t\t\tsetMess(text)\n\t\t}\n\t\t//Кнопка с номером\n\t\telse if (selectedElement === '2') {\n\t\t\ttext = `+7 (499) 500-14-11 - Менеджер U.L.E.Y`\n\t\t\tsetMess(text)\n\t\t}\n\t\t//Запас\n\t\telse if (selectedElement === '3') {\n\t\t\ttext = `${user.name.split(' ')[1]}, мы готовы поставить Вас в запас на этот проект. Запас оплачивается.\n\t\t\tСумму можно будет уточнить у менеджера. С большой вероятностью Вы будете на нём задействованы, \n\t\t\tно для начала придется проснуться вместе с основным составом и быть готовым выйти на работу. Готовы?`\n\t\t\t\n\t\t\tsetMess(text)\n\t\t}\n\t\t//Офис U.L.E.Y\n\t\telse if (selectedElement === '4') {\n\t\t\ttext = `Офис | U.L.E.Y\n\n\t\t\tАдрес: г. Москва, ул. Дербеневская набережная, д. 7, стр. 2\n\t\t\t\t\t\n\t\t\tКарта: https://goo.gl/maps/uFrAfV5NmE2rUXsT8`\n\n\t\t\tsetMess(text)\n\t\t}\n\t\t//Оплата / смета\n\t\telse if (selectedElement === '5') {\n\t\t\ttext = `Для согласования и получения оплаты: \n\t\t\thttps://t.me/ULEY_Office_Bot`\n\n\t\t\tsetMess(text)\n\t\t}\n\t\t//Заявка отклонена\n\t\telse if (selectedElement === '6') {\n\t\t\ttext = `Добрый день, ${user.name.split(' ')[1]}. Спасибо, что откликнулись на эту заявку. \n\t\t\tВ настоящий момент основной состав уже сформирован.\n\t\t\tДо встречи на новых проектах!`\n\n\t\t\tsetMess(text)\n\t\t}\n\t\t//Заявка одобрена\n\t\telse if (selectedElement === '7') {\n\t\t\ttext = `Добрый день, ${user.name.split(' ')[1]}. Спасибо, что откликнулись на заявку. \n\t\t\tДля согласования тех. задачи на проект позвоните по номеру:\n\t\t\t+7 (499) 500-14-11`\n\n\t\t\tsetMess(text)\n\t\t}\n\t\t//Запрос ключевых данных\n\t\telse if (selectedElement === '8') {\n\t\t\ttext = `Добрый день, ${user.name.split(' ')[1]}. Вы впервые откликнулись на заявку от компании U.L.E.Y\n\t\t\tЧтобы мы смогли предложить Вам работу на этом проекте пришлите, пожалуйста, немного информации о себе:\n\t\t\t\t\t\n\t\t\t✅ ФИО\n\t\t\t\t\t\n\t\t\t✅ Контакты для связи\n\t\t\t\t\t\n\t\t\t✅ Год рождения\n\t\t\t\t\t\n\t\t\t✅ Специальность`\n\n\t\t\tsetMess(text)\n\t\t}\n\n\t\t//Правила\n\t\telse if (selectedElement === '9') {\n\t\t\ttext = 'Отправка сценария \"Первый проект\"...'\n\n\t\t\tsetMess(text)\n\t\t}\n\n\t\t//Постер\n\t\telse if (selectedElement === '10') {\n\t\t\tsetPoster('https://proj.uley.team/upload/2024-05-21T06:26:45.939Z.jpg')\n\n\t\t\ttext = 'https://proj.uley.team/upload/2024-05-21T06:26:45.939Z.jpg'\n\n\t\t\tsetMess(text)\n\t\t}\n\n\t}, [selectedElement]);\n\n\t//прокрутка\n\tconst scrollToLastMsg = () => {\n\t\tlastMsgRef.current?.scrollIntoView({transition: \"smooth\"});\n\t};\n\n\tuseEffect(() => {\n        const getImage = async () => {\n            if (file) {\n                const data = new FormData();\n                data.append(\"name\", file.name); // добавление имени файла\n                data.append(\"photo\", file); // добавление файла\n\n               let response = await uploadFile(data);\n\t\t\t   console.log(\"response: \", response)\n\n\t\t\t//    axios.post(baseURL + 'api/file/upload', data, {\n\t\t\t// \t\tonUploadProgress: (ProgressEvent) => {\n\t\t\t// \t\t\tlet progress = Math.round(\n\t\t\t// \t\t\tProgressEvent.loaded / ProgressEvent.total * 100\n\t\t\t// \t\t\t) + '%';\n\t\t\t// \t\t\tsetProgess(progress);\n\t\t\t// \t\t}\n\t\t\t// \t}).then(res => {\n\t\t\t// \tconsole.log(res);\n\t\t\t// \tgetFile({\n\t\t\t// \t\tname: res.data.name,\n\t\t\t// \t\tpath: baseURL + res.data.path\n\t\t\t// \t})\n\t\t\t// \t}).catch(err => console.log(err))\n\n               setImage(response.data.path.split('.team')[1]);\n\t\t\t   //сообщение с ссылкой на файл\n\t\t\t   setMess(host + response.data.path.split('.team')[1])\n            }\n        }\n        getImage();\n    }, [file])\n\n\tconst onFileChange = (e, key) => {\t\n\t\tsetProgess(0)\n\t\tconst file = e.target.files[0]; // доступ к файлу\n\t\tconsole.log(\"key: \", key);\n\t\tsetFileType(key)\n\t\tconsole.log(file);\n\t\tsetFile(file); // сохранение файла\n\t\tsetShowAttach(false)\n    }\n\n\tconst openSidebar = (cb) => {\n\t\t// close any open sidebar first\n\t\tsetShowProfileSidebar(false);\n\t\tsetShowSearchSidebar(false);\n\n\t\tsetShowCloseButton(true)\n\n\t\t// call callback fn\n\t\tcb(true);\n\t};\n\n\tconst closeSidebar = (cb) => {\n\t\t// close any open sidebar first\n\t\tsetShowProfileSidebar(false);\n\n\t\tsetShowCloseButton(false)\n\n\t\t// call callback fn\n\t\tcb(false);\n\t};\n\n\t//функция отправки сообщения\n\tconst sendText = async () => {\n\t\tconsole.log(\"selectedElement: \", selectedElement)\n\t\tif (selectedElement === '1') { //выбран паспорт\n\t\t\t//отправка сценария\n\t\t\tconsole.log(\"отправка сценария: \", selectedElement)\n\t\t\tsendMyMessage()\n\n\t\t} else if (selectedElement === '9') { //выбран Правила\n\t\t\t\t//отправка сценария\n\t\t\t\tconsole.log(\"отправка сценария: \", selectedElement)\n\t\t\t\tsendMyMessage2()\n\n\t\t} else if (selectedElement === '10') { //выбран Постер\n\t\t\tconsole.log(\"отправка сценария: \", selectedElement)\n\t\t\tsendMyMessagePoster()\n\t\n\t\t} else {\n\t\t\t//отправка сообщения\n\n\t\t\t//Передаем данные боту\n\t\t\tlet temp=mess.replace(/\\n/g, '%0A'); //экранирование переноса строки\n\t\t\ttemp = temp.replace(/#/g, '%23'); \t\t //экранирование решетки\n\t\t\ttemp = temp.replace(/&/g, '%26'); \t\t //экранирование &\n\t\t\ttemp = temp.replace(/\\+/g, '%2b'); \t\t //экранирование +\n\t\t\ttemp = temp.replace(/>/g, '%3e'); \t\t //экранирование >\n\t\t\ttemp = temp.replace(/</g, '%3c'); \t\t //экранирование <\n\t\t\t\n\t\t\tlet sendToTelegram\n\n\t\t\t// const url_send_msg = `https://api.telegram.org/bot${token_work}/sendMessage?chat_id=${personW.id}&parse_mode=html&text=${temp}`\n\t\t\t// const sendToTelegram = await $host.get(url_send_msg);\n\n\t\t\tif(!file) {\n\t\t\t\tconst url_send_msg = `https://api.telegram.org/bot${token_work}/sendMessage?chat_id=${personW.id}&parse_mode=html&text=${temp}`\n\t\t\t\t\n\t\t\t\tsendToTelegram = await $host.get(url_send_msg);\n\t\t\t} else {\n\t\t\t\tif (fileType === 'doc') { //(image.slice(-3) === 'gif' || image.slice(-3)==='zip') {\n\t\t\t\t\t// if (image.slice(-3) === 'ocx' || image.slice(-3)==='doc' || image.slice(-3)==='lsx' || image.slice(-3)==='xls' || image.slice(-3)==='iff' || image.slice(-3)==='IFF') {\n\t\t\t\t\t// \tconst url_send_doc = `https://api.telegram.org/bot${token_work}/sendMessage?chat_id=${personW.id}&parse_mode=html&text=${host+image}`\n\t\t\t\t\t// \t//console.log(\"url_send_doc: \", url_send_doc)\n\t\t\t\t\t// \tsendPhotoToTelegram = await $host.get(url_send_doc);\n\t\t\t\t\t// } else if (image.slice(-3) === 'png' || image.slice(-3)==='jpg' || image.slice(-3)==='peg' || image.slice(-3) !== 'PNG' || image.slice(-3)!=='JPG' || image.slice(-3)!=='PEG') {\n\t\t\t\t\t// \tsetShowErrorFile(true)\n\t\t\t\t\t// } else if (image.slice(-3) === 'pdf' ) {\n\t\t\t\t\t// \tconst url_send_doc = `https://api.telegram.org/bot${token_work}/sendDocument?chat_id=${personW.id}&document=${host+image}`\n\t\t\t\t\t// \t//console.log(\"url_send_doc: \", url_send_doc)\n\t\t\t\t\t// \tsendPhotoToTelegram = await $host.get(url_send_doc);\n\t\t\t\t\t// } else {\n\t\t\t\t\t\tconst url_send_doc = `https://api.telegram.org/bot${token_work}/sendDocument?chat_id=${personW.id}&document=${host+image}`\n\t\t\t\t\t\t//console.log(\"url_send_doc: \", url_send_doc)\n\t\t\t\t\t\t\n\t\t\t\t\t\tconst form = new FormData();\n\t\t\t\t\t\tform.append(\"chat_id\", personW.id); // добавление имени файла\n\t\t\t\t\t\tform.append(\"document\", file); // добавление файла\n\t\t\t\t\t\t//const form = new FormData();\n\t\t\t\t\t\tsendToTelegram = await $host.post(`https://api.telegram.org/bot${token_work}/sendDocument`, form, {headers: { 'Content-Type': 'multipart/form-data' },})\n\n\t\t\t\t\t\t//sendPhotoToTelegram = await $host.get(url_send_doc);\n\t\t\t\t\t//}\t\t\n\t\t\t\t} else if (fileType === 'image') {\n\t\t\t\t\t// if (image.slice(-3) !== 'png' || image.slice(-3)!=='jpg' || image.slice(-3)!=='peg' || image.slice(-3) !== 'PNG' || image.slice(-3)!=='JPG' || image.slice(-3)!=='PEG') {\n\t\t\t\t\t// \tsetShowErrorFile(true)\n\t\t\t\t\t// } else {\n\t\t\t\t\t\tconst url_send_photo = `https://api.telegram.org/bot${token_work}/sendPhoto?chat_id=${personW.id}&photo=${host+image}`\n\t\t\t\t\t\t//console.log(\"url_send_photo: \", url_send_photo)\n\t\t\t\t\t\tsendToTelegram = await $host.get(url_send_photo);\n\t\t\t\t\t//}\t\t\n\t\t\t\t}\t\n\t\t\t}\n\n\t\t\t//Выводим сообщение об успешной отправке\n\t\t\tif (sendToTelegram) {\n\t\t\t\tconsole.log('Спасибо! Ваша сообщение отправлено! ', sendToTelegram.data.result.message_id);\n\t\t\t}           \n\t\t\t//А здесь сообщение об ошибке при отправке\n\t\t\telse {\n\t\t\t\tconsole.log('Что-то пошло не так. Попробуйте ещё раз.');\n\t\t\t}\n\n\t\t\tlet message = {};\n\t\t\tif(!file) {\n\t\t\t\tmessage = {\n\t\t\t\t\tsenderId: chatAdminId, \n\t\t\t\t\treceiverId: user.chatId,\n\t\t\t\t\tconversationId: convs.id,\n\t\t\t\t\ttype: \"text\",\n\t\t\t\t\ttext: mess,\n\t\t\t\t\tisBot: null,\n\t\t\t\t\tmessageId: sendToTelegram.data.result.message_id,\n\t\t\t\t}\n\n\t\t\t\t//сохранение сообщения в базе данных\n\t\t\t\tawait newMessage(message)\t\n\n\t\t\t\t//сохранить в контексте\n\t\t\t\taddNewMessage2(user.chatId, mess, 'text', '', convs.id, sendToTelegram.data.result.message_id, null);\n\t\t\t} else {\n\t\t\t\tmessage = {\n\t\t\t\t\tsenderId: chatAdminId, \n\t\t\t\t\treceiverId: user.chatId,\n\t\t\t\t\tconversationId: convs.id,\n\t\t\t\t\ttype: \"image\",\n\t\t\t\t\ttext: host + image,\n\t\t\t\t\tisBot: null,\n\t\t\t\t\tmessageId: sendToTelegram.data.result.message_id,\n\t\t\t\t}\n\n\t\t\t\t//сохранение сообщения в базе данных\n\t\t\t\tawait newMessage(message)\t\n\n\t\t\t\t//сохранить в контексте\n\t\t\t\taddNewMessage2(user.chatId, host + image, 'image', '', convs.id, sendToTelegram.data.result.message_id, null);\n\t\t\t}\n\t\t\tconsole.log(\"message send: \", message);\n\n\t\t\t\n\t\t}\n\t}\n\n\tconst submitNewMessage = () => {\n\t\taudio.play();\n\t\tsendText();\n\n\t\tsetMess(\"\");\n\t\tscrollToLastMsg();\n\t\tsetFile(\"\");\n        setImage(\"\");\n\t\tsetSelectedElement('')\n\t};\n\n\n\t//отправка сценария\n\tconst sendMyMessage = async() => {\n\t\tconsole.log(\"send passport\")\n\t\t//audio.play();\n\n\t\tlet client = userWorkers.filter((client) => client.chatId === user.chatId)[0];\n\n\t\tconst keyboard = JSON.stringify({\n\t\t\tinline_keyboard: [\n\t\t\t\t[\n\t\t\t\t\t{\"text\": \"Заполнить анкету\", web_app: {url: webAppAnketa}},\n\t\t\t\t],\n\t\t\t]\n\t\t});\n\n\t\t//отправить в телеграмм\n\t\tlet sendToTelegram\n\t\tlet text = ''\n\t\t\n\t\t//Паспорт\n\t\tif (selectedElement === '1') {\n\t\t\t//send photo\n\t\t\tlet anketa = 'https://proj.uley.team/upload/2023-11-10T15:12:36.770Z.png' //poster anketa\n\t\t\tconst url_send_photo = `https://api.telegram.org/bot${token_work}/sendPhoto?chat_id=${user.chatId}&photo=${anketa}&reply_markup=${keyboard}`\n\t\t\tconsole.log(url_send_photo)\t\n\t\t\tsendToTelegram = await $host.get(url_send_photo);\n\t\t} \n\t\t\n\n\t\t//отправить в админку\n\t\tlet message = {};\n\t\t\t\n\t\tmessage = {\n\t\t\tsenderId: chatAdminId, \n\t\t\treceiverId: user.chatId,\n\t\t\tconversationId: client.conversationId,\n\t\t\ttype: \"text\",\n\t\t\ttext: text,\n\t\t\tmessageId: sendToTelegram.data.result.message_id,\n\t\t\tbuttons: 'Согласен предоставить персональные данные',\n\t\t}\n\t\t\t\n\t\t// console.log(\"message send: \", message);\n\t\n\t\t//сохранение сообщения в базе данных\n\t\tawait newMessage(message)\n\t\n\t\t//сохранить в контексте\n\t\taddNewMessage2(user.chatId, text, 'text', 'Согласен предоставить персональные данные', client.conversationId, sendToTelegram.data.result.message_id);\n    }\n\n\t//отправка сценария Правила\n\tconst sendMyMessage2 = async() => {\n\t\tconsole.log(\"send rule\")\n\t\t//audio.play();\n\n\t\tlet client = userWorkers.filter((client) => client.chatId === user.chatId)[0];\n\n\t\tconst keyboard = JSON.stringify({\n\t\t\tinline_keyboard: [\n\t\t\t\t[\n\t\t\t\t\t{\"text\": \"Прочитал правила\", callback_data:'/accept_rule'},\n\t\t\t\t],\n\t\t\t]\n\t\t});\n\n\t\t//отправить в телеграмм\n\t\tlet sendToTelegram\n\t\tlet sendPhotoToTelegram\n\n\t\tconst text = `🔵 <b>Правила первого проекта</b>\n\nВНИМАТЕЛЬНО прочитайте перед выходом на работу!\n\n✅ <b>Общие правила:</b>\n• Не опаздывать | Не флудить\n• Не покидать чат проекта без согласования\n• После подтверждения участия выход на проект обязателен\n• Форс-мажор — необходимо найти себе замену\n• Не нашли замену — едете на проект лично\n• Невыход — система вносит в чёрный список\n• Расходы на такси в ночное время компания берет на себя\n• Всегда с собой:\n— Паспорт\n— Зарядное устройство / Power Bank\n— Мерч [одежда с логотипом компании | получаете в офисе после нескольких отработаных проектов]\n• Рассчитывать время прибытия на площадку заранее\n• Вести себя культурно и выполнять задания заказчика\n• До выхода на проект зарегистрироваться, ответив на вопросы:\nhttps://t.me/ULEY_Office_Bot\n\n✅ <b>День проекта:</b>\n• Выйти на связь в чат проекта за 2 часа до начала\n• Кнопка «Подтвердить» — нажатие подтверждает, что вы на связи [обязательно]\n• Кнопка «В пути» — нажать в момент выхода из дома\n• Кнопка «На месте» — после прибытия на адрес\n• Встретиться с коллегами в указанном месте\n• Позвонить заказчику\n\n✅ <b>На проекте:</b>\n• Кнопка «Начал работу» — нажать после начала работы | подтвердить кнопкой «Да»\n• Кнопка «Закончил работу» — нажать по завершению работ | подтвердить кнопкой «Да»\n• Все вопросы в чат проекта, или по номеру: +7(499)500-14-11\n• Внимание! Обязательно фиксировать статусы — влияет на своевременную оплату\n• Оплата в течение 1-3 рабочих дней`\n\n\t\t//Передаем данные боту\n\t\tlet temp=text.replace(/\\n/g, '%0A'); //экранирование переноса строки\n\t\ttemp = temp.replace(/#/g, '%23'); \t\t //экранирование решетки\n\t\ttemp = temp.replace(/&/g, '%26'); \t\t //экранирование &\n\t\ttemp = temp.replace(/\\+/g, '%2b'); \t\t //экранирование +\n\t\ttemp = temp.replace(/>/g, '%3e'); \t\t //экранирование >\n\t\ttemp = temp.replace(/</g, '%3c'); \t\t //экранирование <\n\t\t\n\t\t//Правила\n\t\tconst url_send_text = `https://api.telegram.org/bot${token_work}/sendMessage?chat_id=${user.chatId}&parse_mode=html&text=${temp}`\n\t\t//console.log(url_send_text)\t\n\t\tsendToTelegram = await $host.get(url_send_text);\n\t\t\n\n\t\t//отправить в админку\n\t\tlet message = {};\n\t\t\t\n\t\tmessage = {\n\t\t\tsenderId: chatAdminId, \n\t\t\treceiverId: user.chatId,\n\t\t\tconversationId: client.conversationId,\n\t\t\ttype: \"text\",\n\t\t\ttext: 'Сценарий \"Первый проект\"',\n\t\t\tisBot: null,\n\t\t\tmessageId: sendToTelegram.data.result.message_id,\n\t\t\tbuttons: '',\n\t\t}\n\t\t\t\n\t\n\t\t//сохранение сообщения в базе данных\n\t\tawait newMessage(message)\n\t\n\t\t//сохранить в контексте\n\t\taddNewMessage2(user.chatId, 'Сценарий \"Первый проект\"', 'text', '', client.conversationId, sendToTelegram.data.result.message_id);\n    \n\t}\n\n\t//отправка сценария Постер\n\tconst sendMyMessagePoster = async() => {\n\t\tconsole.log(\"send poster\")\n\t\t//audio.play();\n\n\t\tlet client = userWorkers.filter((client) => client.chatId === user.chatId)[0];\n\n\t\tconst keyboard = JSON.stringify({\n\t\t\tinline_keyboard: [\n\t\t\t\t[\n\t\t\t\t\t{\"text\": \"Принято / Понято\", callback_data:'/poster_accept'},\n\t\t\t\t],\n\t\t\t]\n\t\t});\n\n\t\tlet sendToTelegram\n\t\t\n\t\t//Постер\n\t\tconst url_send_photo = `https://api.telegram.org/bot${token_work}/sendPhoto?chat_id=${user.chatId}&photo=${poster}&reply_markup=${keyboard}`\n\t\tconsole.log(url_send_photo)\t\n\t\tsendToTelegram = await $host.get(url_send_photo);\n\t\t\n\n\t\t//отправить в админку\n\t\tlet message = {};\n\t\t\t\n\t\tmessage = {\n\t\t\tsenderId: chatAdminId, \n\t\t\treceiverId: user.chatId,\n\t\t\tconversationId: client.conversationId,\n\t\t\ttype: \"image\",\n\t\t\ttext: poster,\n\t\t\tisBot: null,\n\t\t\tmessageId: sendToTelegram.data.result.message_id,\n\t\t\tbuttons: '',\n\t\t}\n\t\t\t\n\t\n\t\t//сохранение сообщения в базе данных\n\t\tawait newMessage(message)\n\t\n\t\t//сохранить в контексте\n\t\taddNewMessage2(user.chatId, poster, 'image', '', client.conversationId, sendToTelegram.data.result.message_id);\n    \n\t}\n\n\tconst clickClearFile = () => {\n\t\tconsole.log(\"clear file...\")\n\t\tsetClearFile(false)\n\t\t\n\t}\n\n\tconst onEmojiClick = (emojiObject, event) => {\n\t\tconsole.log(emojiObject)\n\t\tsetMess(prevInp =>prevInp + emojiObject.emoji);\n\n\t};\n\n\treturn (\n\t\t<div className=\"chat\">\n\t\t\t<div className=\"chat__body\">\n\t\t\t\t<div className=\"chat__bg\"></div>\n\n\t\t\t\t<Header\n\t\t\t\t\tuser={personW}\n\t\t\t\t\tworker={workersAll.filter((item)=> item.chatId === user.chatId)}\n\t\t\t\t\topenProfileSidebar={() => openSidebar(setShowProfileSidebar)}\n\t\t\t\t\topenSearchSidebar={() => openSidebar(setShowSearchSidebar)}\n\t\t\t\t\tcloseSidebar={() => closeSidebar(setShowProfileSidebar)}\n\t\t\t\t\tshowCloseButton={showCloseButton}\n\t\t\t\t\tsetClearFile={setClearFile}\n\t\t\t\t\tclearFile={clearFile}\n\t\t\t\t\tclickClearFile={clickClearFile}\n\t\t\t\t/>\n\t\t\t\t<div className=\"chat__content\">\n\t\t\t\t\t<Convo lastMsgRef={lastMsgRef} messages={user.messages} convId={user.conversationId} />\n\t\t\t\t\t<CModal alignment=\"center\" visible={showErrorFile} onClose={() => setShowErrorFile(false)}>\n                        <CModalHeader>\n                        \t<CModalTitle>Предупреждение</CModalTitle>\n                        </CModalHeader>\n                        <CModalBody>\n                        \t...\n                        </CModalBody>\n                        <CModalFooter>\n                        \t<CButton color=\"primary\" onClick={() => setShowErrorFile(false)}>ОК</CButton>\n                        </CModalFooter>\n                    </CModal>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div style={{position: 'absolute', bottom: '70px', zIndex: '100'}}>\n\t\t\t\t\t<EmojiPicker \n\t\t\t\t\t\topen={showPicker} \n\t\t\t\t\t\ttheme='dark'\n\t\t\t\t\t\theight={400} \n\t\t\t\t\t\twidth={400} \n\t\t\t\t\t\tonEmojiClick={onEmojiClick}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<footer className=\"chat__footer\">\n\t\t\t\t\n\t\t\t\t\t<div className=\"chat__footer-wrapper\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"chat__scroll-btn\"\n\t\t\t\t\t\t\taria-label=\"scroll down\"\n\t\t\t\t\t\t\tonClick={scrollToLastMsg}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<Icon id=\"downArrow\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{/* <EmojiTray\n\t\t\t\t\t\t\tshowEmojis={showEmojis}\n\t\t\t\t\t\t\tmess={mess}\n\t\t\t\t\t\t\tsetMess={setMess}\n\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t{/* <EmojiPicker \n\t\t\t\t\t\t\topen={showPicker} \n\t\t\t\t\t\t\ttheme='dark'\n\t\t\t\t\t\t\theight={500} \n\t\t\t\t\t\t\twidth={400} \n\t\t\t\t\t\t\tonEmojiClick={onEmojiClick}\n\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t<ChatInput\n\t\t\t\t\t\t\tshowEmojis={showEmojis}\n\t\t\t\t\t\t\tsetShowEmojis={setShowEmojis}\n\t\t\t\t\t\t\tsetShowPicker={setShowPicker}\n\t\t\t\t\t\t\tshowAttach={showAttach}\n\t\t\t\t\t\t\tsetShowAttach={setShowAttach}\n\t\t\t\t\t\t\tonFileChange={onFileChange}\n\t\t\t\t\t\t\tmess={mess}\n\t\t\t\t\t\t\tsetMess={setMess}\n\t\t\t\t\t\t\tsubmitNewMessage={submitNewMessage}\n\t\t\t\t\t\t\tsetSelectedElement={setSelectedElement}\n\t\t\t\t\t\t\tchosenEmoji={chosenEmoji}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{/* <div className=\"progessBar\" style={{ width: progress, height: '1rem', width: '0%',  backgroundColor: 'rgb(68, 212, 231)', color: 'white',  padding: '2px' }}>\n\t\t\t\t\t\t\t{progress}\n\t\t\t\t\t\t</div> */}\n\t\t\t\t\t</div>\t\t\n\t\t\t\t</footer>\n\t\t\t</div>\n\t\t\t<ChatSidebar\n\t\t\t\theading=\"Поиск сообщения\"\n\t\t\t\tactive={showSearchSidebar}\n\t\t\t\tcloseSidebar={() => setShowSearchSidebar(false)}\n\t\t\t>\n\t\t\t\t<Search />\n\t\t\t</ChatSidebar>\n\n\t\t\t<ChatSidebarProfile\n\t\t\t\t// heading=\"Данные контакта\"\n\t\t\t\tactive={showProfileSidebar}\n\t\t\t>\n\t\t\t\t<Profile user={user} />\n\t\t\t</ChatSidebarProfile>\n\n\t\t</div>\n\t);\n};\n\nexport default Chat;\n","import React, { Suspense, useEffect, useState, useContext } from 'react'\nimport { CContainer, CSpinner, CNav, CNavLink, CNavItem } from '@coreui/react'\nimport { AppSidebar, AppFooter, AppHeaderChat } from '../components/index'\n\nimport \"./../chat-app-new/App.css\";\nimport \"./../chat-app-new/assets/css/index.css\";\n\n// import Loader from \"../chat-app-new/components/Loader\";\nimport Home from \"../chat-app-new/pages/Home\";\nimport Sidebar from \"../chat-app-worker/components/Sidebar\";\nimport Chat from \"../chat-app-worker/pages/Chat\";\n\nimport { AccountContext } from \"../chat-app-new/context/AccountProvider\";\n\nconst ChatsWorker = () => {\n\n  const { personW } = useContext(AccountContext); \n\n\tuseEffect(() => {\n\t\tdocument.body.classList.add(\"dark-theme\");\n\t});   \n\n\n  return (\n    <div>\n      <AppSidebar />\n      <div className=\"wrapper d-flex flex-column min-vh-100 bg-uley\">\n        <AppHeaderChat />\n        <div className=\"body flex-grow-1 px-3\">\n\n            <CContainer lg>\n                <Suspense fallback={<CSpinner color=\"primary\" />}>                 \n                  \n                  <div className=\"app\">\n                    <p className=\"app__mobile-message\"> Доступно только на компьютере 😊. </p> \n                    <div className=\"app-content\">\n                      <Sidebar />\n                      {Object.keys(personW).length ? <Chat /> : <Home /> }\n                    </div>\n                  </div>\n\n                </Suspense>\n            </CContainer>\n\n        </div>\n        <AppFooter />\n      </div>\n    </div>\n  )\n}\n\nexport default ChatsWorker\n"],"names":["allIcons","Icons","id","props","selectedIcon","getProjects","$host","response","data","console","log","message","getProjectsDel","editProject","addProject","getProjectId","contact","worker","setPersonW","useContext","AccountContext","useUsersContext","setUserWorkerAsUnread","setCountMessageWork","setUserWorkers","userWorkers","getUser","name","chatId","avatar","Object","keys","messages","length","getWMessages2","conversationId","arrayMessage","allDate","map","d","Date","createdAt","year","getFullYear","month","String","getMonth","padStart","day","getDate","chas","getHours","minut","getMinutes","newDateMessage","newMessage","date","content","text","image","type","descript","buttons","sender","senderId","time","status","messageId","reply","replyId","push","dates","filter","el","ind","indexOf","obj","i","arrayDateMessage","j","userIndex","findIndex","user","toString","usersCopy","JSON","parse","stringify","lastMessage","recentMessageDate","messageDates","pop","getLastMessage","className","onClick","style","position","blockW","src","blockUser","alt","top","zIndex","onError","e","target","avatarDefault","worklist","find","item","spec","avatarKrest","width","left","block18","split","formatTime","unread","typing","pinned","workersAll","useState","contacts","setContacts","setText","loading","setLoading","navigate","useNavigate","useEffect","arr","filteredData","phone","replace","toLowerCase","includes","ariaLabel","iconId","iconClassName","onSelected","index","options","placeholder","onChange","value","margin","process","textAreaRef","height","scrollHeight","showAttach","setShowAttach","showEmojis","setShowEmojis","setShowPicker","showPicker","mess","chosenEmoji","setMess","submitNewMessage","onFileChange","setSelectedElement","useRef","useAutosizeTextArea","current","React","ref","children","preventDefault","displayName","CustomMenu","labeledBy","backgroundColor","child","startsWith","change","eventkey","htmlFor","display","marginLeft","marginRight","DropdownButton","onSelect","as","ButtonGroup","drop","variant","title","Dropdown","class","eventKey","rows","openProfileSidebar","openSearchSidebar","closeSidebar","showCloseButton","clearFile","clickClearFile","setClearFile","setPress","audioIshodCall","Audio","sendSound","ishodCall","clickToCall","setTimeout","play","getSendCall","clickToCallRaut","getSendCallRaut","avatarBlacklist","color","robot","verticalAlign","to","state","workerId","editIcon","transform","icon","cilPhone","size","active","heading","setWorker","setAvatar","addNewName","addNewAvatar","addNewMessage2","setImg","setPhone","blockWorker","setBlockWorker","press","heightImage","setHeightImage","divBlock","crmId","setCrmId","crmId2","setCrmId2","crmId3","setCrmId3","fetchData","fio_notion","getBoundingClientRect","imgsize","Image","onload","fetch","getLastPretendent","pretendentArray","projectId","projectId2","projectId3","project","project2","project3","crmID","getSpecialistChatId","blocked","clickSetBlocked","blockedSpecialist","res","defaultAvatar","objectFit","textAlign","city","age","fontSize","username","cursor","replyMessage","lastMsgRef","allMessages","convId","personW","chatAdminId","showImage","setShowImage","newMessages","setNewMessages","setDates","allArr","setAllArr","msgRef","array","delWMessageContext","dateIndex","startLoadMessages","newMess","CustomToggle","right","CustomToggleBottom","CustomToggle2","borderRadius","padding","minWidth","marginBottom","CustomMenu2","CustomMenuBottom","bottom","delWMessage","url_del_msg","delToTelegram","msgIndex","assignRef","undefined","endsWith","xlsIcon","href","rel","docIcon","window","event","stopPropagation","prevShownImage","imageIcon","scrollIntoView","transition","token_work","host","setUserAsUnread","conversations","setCountMessage","convs","conv","members","showProfileSidebar","setShowProfileSidebar","showSearchSidebar","setShowSearchSidebar","file","setFile","setImage","fileType","setFileType","setShowCloseButton","showErrorFile","setShowErrorFile","selectedElement","setScenari","path","setProgess","audio","poster","setPoster","scrollToLastMsg","getImage","FormData","append","uploadFile","openSidebar","cb","sendText","sendMyMessage","sendMyMessage2","sendMyMessagePoster","temp","url_send_msg","sendToTelegram","form","headers","url_send_photo","result","message_id","receiverId","isBot","client","keyboard","inline_keyboard","web_app","url","callback_data","url_send_text","alignment","visible","onClose","open","theme","onEmojiClick","emojiObject","prevInp","emoji","key","files","document","body","classList","add","lg","Suspense","fallback","Home"],"sourceRoot":""}