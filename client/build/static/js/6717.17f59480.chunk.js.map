{"version":3,"file":"static/js/6717.17f59480.chunk.js","mappings":"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","sources":["pages/DistributionAdd.js"],"sourcesContent":["import React, { Suspense, useState, useEffect } from 'react'\nimport { CContainer, CSpinner } from '@coreui/react'\nimport { AppSidebar, AppFooter, AppHeader } from '../components/index'\nimport { \n  CRow,\n  CCol,\n  CCard,\n  CCardBody,\n  CForm,\n  CFormLabel,\n  CFormInput,\n  CFormTextarea,\n  CButton,\n  CAlert,\n  CFormCheck,\n} from '@coreui/react'\n\nimport { MultiSelect } from 'primereact/multiselect';\nimport \"primereact/resources/themes/lara-light-cyan/theme.css\";\n\n//import { MultiSelect } from \"react-multi-select-component\";\n\nimport { useUsersContext } from \"./../chat-app-new/context/usersContext\";\nimport { $host } from './../http/index'\nimport { useNavigate } from 'react-router-dom';\nimport { newDistribution, getDistributions, editDistribution } from './../http/adminAPI';\nimport { newMessage, uploadFile } from './../http/chatAPI';\nimport sendSound from './../chat-app-new/assets/sounds/distribution_sound.mp3';\n\n\nconst DistributionAdd = () => {\n\n  const token = process.env.REACT_APP_TELEGRAM_API_TOKEN\n\tconst host = process.env.REACT_APP_HOST\n  const hostPort = process.env.REACT_APP_API_URL\n  const chatAdminId = process.env.REACT_APP_CHAT_ADMIN_ID\n\n  const { users: clients } = useUsersContext();\n  const { addNewMessage, setDistributions } = useUsersContext();\n  const [contacts, setContacts]= useState([]);\n\n  const [selected, setSelected] = useState(null);\n  const [text, setText] = useState('');\n  const [countChar, setCountChar] = useState(0);\n  const [visible, setVisible] = useState(false);\n  const [showEditButtonAdd, setShowEditButtonAdd] = useState(false);\n  const [sendToAdmin, setSendToAdmin] = useState(false);\n  const [textButton, setTextButton] = useState('');\n  const [file, setFile] = useState();\n  const [value, setValue] = useState(\"\");\n  const [image, setImage]= useState(\"\");\n\n  const audio = new Audio(sendSound);\n\n  const navigate = useNavigate();\n\n  const backPage = () => {\n       navigate('/distribution');\n  } \n\n  useEffect(() => {\n    const arrClients = []\n      \n    clients.map((client) => {\n      const newObj = {\n        name: client.name, \n        code: client.chatId,\n      }\n      arrClients.push(newObj)\n    })\n\n    console.log(\"users: \", arrClients)\n    \n    setContacts(arrClients)      \n  }, [clients]);\n\n\n  const onChangeText = (e) => {\n    setText(e.target.value)\n    setCountChar(e.target.value.length)\n  }\n\n  useEffect(() => {\n    const getImage = async () => {\n        if (file) {\n          console.log(\"file:\", file)\n          const data = new FormData();\n          data.append(\"name\", file.name);\n          data.append(\"photo\", file);\n          \n          let response = await uploadFile(data);\n          console.log(\"response: \", response.data.path)\n\n          setImage(response.data.path.split('.team')[1]);\n          //сообщение с ссылкой на файл\n          //console.log(host + response.data.path)\n          //setValue(host + response.data.path)\n        }\n    }\n    getImage();\n  }, [file])\n\n  {/* Добавление файла */}\n  const onFileChange = (e) => {\n    setFile(e.target.files[0]);\n    setValue(e.target.value)\n  }\n\n  {/* Показать Добавление текста кнопки */}\n  const clickShowEditButton = (e) => {\n    e.preventDefault();\n    showEditButtonAdd ? setShowEditButtonAdd (false) : setShowEditButtonAdd (true)\n  }\n\n  const onChangeTextButton = (e) => {\n    setTextButton(e.target.value)\n  }\n\n  const onChangeCheck = (e) => {\n    console.log(!sendToAdmin)\n    setSendToAdmin(!sendToAdmin)\n  }\n\n  {/* Отправка рассылки */}\n  const onSendText = async() => {\n    //console.log(selected)\n    \n    let arrUsers = []\n    let countSuccess = 0\n\n    audio.play();\n\n    //новая рассылка\n    const message = {\n      name: 'Рассылка', \n      text: text, \n      image: host + image, \n      button: textButton, \n      receivers: JSON.stringify(selected), \n      datestart: Date.now(), \n      delivered: 'true',        \n    }\n    console.log(\"message send button: \", message);\n\n    //сохранение рассылки в базе данных\n    const distrNew = await newDistribution(message)\n    \n    selected.map(async (user, index) => {\n      setTimeout(async()=> { \n        console.log(\"Пользователю ID: \" + user.code + \" сообщение \" + text + \" отправлено! Кнопка \" + textButton + \" отправлена!\")\n\n        //по-умолчанию пока сообщение не отправлено\n        arrUsers.push({\n          label: user.name,\n          value: user.code,\n          status: 500,\n          mess: null,\n        }) \n\n        let client = clients.find((client) => client.chatId === user.code);\n        console.log(\"client: \", client)\n        \n        //Передаем данные боту\n        const keyboard = JSON.stringify({\n          inline_keyboard: [\n              [\n                  {\"text\": textButton, callback_data:'/report'},\n              ],\n          ]\n        });\n\n        //отправить в телеграмм\n        let sendToTelegram\n        if (text !== '') {\n          console.log(arrUsers, distrNew)\n          const url_send_msg = `https://api.telegram.org/bot${token}/sendMessage?chat_id=${user.code}&parse_mode=html&text=${text.replace(/\\n/g, '%0A')}`\n          console.log(\"url_send_msg: \", url_send_msg)\n          sendToTelegram = await $host.get(url_send_msg);\n          console.log('sendToTelegram: ', sendToTelegram)\n\n          const { status } = sendToTelegram;              \n          if (status === 200) {\n            console.log(\"статус 200 текст\", arrUsers, distrNew.id)\n            //countSuccess = countSuccess + 1 \n            \n            //обновить статус доставки\n            arrUsers[index-1].status = 200  \n            arrUsers[index-1].mess = sendToTelegram.data?.result?.message_id \n            \n            console.log(\"res: \", {receivers: JSON.stringify(arrUsers)}, distrNew.id)\n\n            //обновить бд рассылку\n            await editDistribution({receivers: JSON.stringify(arrUsers)}, distrNew.id)\n          } \n                              \n        }  \n\n        const url_send_photo = `https://api.telegram.org/bot${token}/sendPhoto?chat_id=${user.code}&reply_markup=${keyboard}`\n        console.log(\"url_send_photo: \", url_send_photo)\n        \n        let sendPhotoToTelegram\n        if (file) {\n          const form = new FormData();\n          form.append(\"photo\", file);\n\n          sendPhotoToTelegram = await $host.post(url_send_photo, form);\n          console.log('sendPhotoToTelegram: ', sendPhotoToTelegram)\n\n          const { status } = sendPhotoToTelegram;\n\n          if (status === 200 && text === '') {\n            console.log(\"статус 200 фото\")\n            //countSuccess = countSuccess + 1  \n                    \n            //обновить статус доставки\n            arrUsers[index-1].status = 200\n            arrUsers[index-1].mess = sendPhotoToTelegram.data?.result?.message_id   \n\n            //обновить бд рассылку\n            await editDistribution({receivers: JSON.stringify(arrUsers)}, distrNew.id)\n          }\n        } \n\n        //отправить в админку\n        if (sendToAdmin) {\n          let message = {};\n          if(!file) {\n              message = {\n                  senderId: chatAdminId, \n                  receiverId: user.code,\n                  conversationId: client.conversationId,\n                  type: \"text\",\n                  text: text,\n                  is_bot: true,\n                  messageId: sendToTelegram.data.result.message_id,\n                  buttons: '',\n              }\n          } else {\n              message = {\n                  senderId: chatAdminId, \n                  receiverId: user.code,\n                  conversationId: client.conversationId,\n                  type: \"image\",\n                  text: host + image,\n                  is_bot: true,\n                  messageId: sendPhotoToTelegram.data.result.message_id,\n                  buttons: textButton,\n              }\n          }\n          console.log(\"message send: \", message);\n\n          //сохранение сообщения в базе данных\n          await newMessage(message)\n\n          //сохранить в контексте\n          if(!file) {\n            addNewMessage(user.code, text, 'text', '', client.conversationId, sendToTelegram.data.result.message_id);\n          } else {\n            addNewMessage(user.code, host + image, 'image', textButton, client.conversationId, sendPhotoToTelegram.data.result.message_id);\n          }\n    \n        }  \n\n      }, 3000 * ++index) \n    })\n\n    //обновить список рассылок\n    // let response = await getDistributions();\n    // console.log(\"distribution new add: \", response.length)\n    // setDistributions(response)\n\n    setSelected([])\n    setSendToAdmin(false)\n    setText('')\n    setShowEditButtonAdd(false)\n    setTextButton('')\n    setVisible(true)\n    setValue('')\n\n    //navigate('/distribution');\n  }\n\n  const selectChange = (e)=> {\n    console.log(selected)\n    setSelected(e.value)\n  } \n\n  return (\n    <div className='dark-theme'>\n      <AppSidebar />\n      <div className=\"wrapper d-flex flex-column min-vh-100 bg-uley\">\n        <AppHeader />\n        <div className=\"body flex-grow-1 px-3\">\n\n            <CContainer lg>\n                <Suspense fallback={<CSpinner color=\"primary\" />}>\n                  <>\n                    <h2>Новая рассылка</h2>\n\n                    <CRow>\n                        <CCol xs>\n                          <CCard className=\"mb-4\">\n                            {/* <CCardHeader>Рассылки</CCardHeader> */}\n                            <CCardBody>\n                            <CAlert color=\"success\" dismissible visible={visible} onClose={() => setVisible(false)}>\n                              Сообщение успешно отправлено!\n                            </CAlert>\n                              <CForm>\n                                <div className=\"mb-3\" style={{color: '#f3f3f3'}}>\n                                  <CFormLabel htmlFor=\"exampleFormControlInput1\">Выберите получателей:</CFormLabel>\n                                  {/* <MultiSelect\n                                    options={options}\n                                    value={selected}\n                                    onChange={setSelected}\n                                    style={{color: '#1e1919'}}\n                                    overrideStrings={{\n                                      \"allItemsAreSelected\": \"Все поля выбраны\",\n                                      \"clearSearch\": \"Очистить поиск\",\n                                      \"clearSelected\": \"Очистить выбор\",\n                                      \"noOptions\": \"Ничего не найдено\",\n                                      \"search\": \"Поиск\",\n                                      \"selectAll\": \"Выбрать всё\",\n                                      \"selectAllFiltered\": \"Выбрать всё (Найденных)\",\n                                      \"selectSomeItems\": \"Выбрать...\",\n                                      \"create\": \"Создать\",\n                                    }}   \n                                  /> */}\n\n                                  <MultiSelect \n                                    id=\"exampleFormControlInput1\"\n                                    value={selected} \n                                    onChange={(e) => selectChange(e)} \n                                    options={contacts} \n                                    optionLabel=\"name\" \n                                    maxSelectedLabels={3} \n                                    className=\"w-full md:w-20rem\" \n                                    filter \n                                    virtualScrollerOptions={{ itemSize: 43 }}\n                                    placeholder=\"\"\n                                  />\n\n                                  {/* <MultiSelect \n                                    value={selected} \n                                    onChange={(e)=>selectChange(e)} \n                                    options={options} \n                                    style={{color: '#1e1919'}}\n                                    filter \n                                    virtualScrollerOptions={{ itemSize: 43 }}\n                                    maxSelectedLabels={3}\n                                    placeholder=\"Select Items\"\n                                  /> */}\n                                  {/* <MultiSelect\n                                    id=\"exampleFormControlInput1\"\n                                    options={options}\n                                    value={selected}\n                                    onChange={setSelected}\n                                    labelledBy={\"Select\"}\n                                    isCreatable={true}\n                                  /> */}\n                                  <p style={{color: '#767676'}}>Получателей: <span>{selected?.length}</span></p>\n                                </div>\n\n                                <div className='mb-3' style={{color: '#f3f3f3'}}>\n                                  <CFormCheck \n                                    id=\"flexCheckDefault\" \n                                    label=\"Дублировать в админку\"\n                                    onChange={onChangeCheck}\n                                    defaultChecked={sendToAdmin}\n                                  />\n                                </div>\n\n                                <div className=\"mb-3\">\n                                  {/* <CFormLabel htmlFor=\"exampleFormControlTextarea1\">Текст сообщения</CFormLabel> */}\n                                  <CFormTextarea \n                                    id=\"exampleFormControlTextarea1\" \n                                    rows={3} \n                                    placeholder='Введите текст сообщения'\n                                    onChange={onChangeText}\n                                    value={text}\n                                    // helperText = {`${countChar}/500`}\n                                  >           \n                                  </CFormTextarea>\n                                </div>\n                              \n\n                                {/* Добавление картинки */}\n                                <div className=\"mb-6\" style={{color: '#8f8888'}}>\n                                  <CFormInput \n                                    type=\"file\" \n                                    id=\"formFile\" \n                                    label=\"Добавить картинку\" \n                                    name=\"photo\"\n                                    onChange={(e) => onFileChange(e)}\n                                    value={value}\n                                  />\n                                </div>\n\n                                <div className=\"mb-3\"></div>\n\n                                <div className=\"mb-3 text-center\">\n                                  <p style={{color: '#fff', cursor: 'pointer'}} onClick={clickShowEditButton} > {showEditButtonAdd ? '- Убрать кнопку' : '+ Добавить кнопку'}</p>\n                                </div>\n\n                                {/* Добавление кнопки */}\n                                <CForm className=\"row g-3\" style={{color: '#8f8888', display: showEditButtonAdd ? \"block\" : \"none\" }}>\n                                  <CCol md={6}>\n                                    <CFormInput \n                                      type=\"text\" \n                                      id=\"inputTextButton\" \n                                      label=\"Название кнопки\" \n                                      placeholder=\"Введите текст\"\n                                      onChange={onChangeTextButton}\n                                      value={textButton}\n                                    />\n                                  </CCol>\n                                </CForm>\n                                <br/>\n                                <div className=\"mb-3\" style={{textAlign: 'right'}}>\n                                  <CButton color=\"secondary\" style={{marginRight: '15px'}} onClick={backPage}>Отмена</CButton>\n                                  <CButton color=\"primary\" onClick={onSendText}>Отправить рассылку</CButton>\n                                </div>\n                              </CForm>\n\n                            </CCardBody>\n                          </CCard>\n                        </CCol>\n                      </CRow>\n                  </>\n                </Suspense>\n            </CContainer>\n\n        </div>\n        <AppFooter />\n      </div>\n    </div>\n  )\n}\n\nexport default DistributionAdd\n"],"names":["token","process","host","chatAdminId","clients","useUsersContext","users","addNewMessage","setDistributions","useState","contacts","setContacts","selected","setSelected","text","setText","setCountChar","visible","setVisible","showEditButtonAdd","setShowEditButtonAdd","sendToAdmin","setSendToAdmin","textButton","setTextButton","file","setFile","value","setValue","image","setImage","audio","Audio","sendSound","navigate","useNavigate","useEffect","arrClients","map","client","newObj","name","code","chatId","push","console","log","getImage","data","FormData","append","uploadFile","response","path","split","onSendText","arrUsers","play","message","button","receivers","JSON","stringify","datestart","Date","now","delivered","newDistribution","distrNew","user","index","setTimeout","label","status","mess","find","keyboard","inline_keyboard","callback_data","url_send_msg","replace","$host","sendToTelegram","id","result","message_id","editDistribution","url_send_photo","form","sendPhotoToTelegram","senderId","receiverId","conversationId","type","is_bot","messageId","buttons","newMessage","className","lg","Suspense","fallback","color","xs","dismissible","onClose","style","htmlFor","onChange","e","selectChange","options","optionLabel","maxSelectedLabels","filter","virtualScrollerOptions","itemSize","placeholder","length","defaultChecked","rows","target","files","onFileChange","cursor","onClick","preventDefault","display","md","textAlign","marginRight"],"sourceRoot":""}