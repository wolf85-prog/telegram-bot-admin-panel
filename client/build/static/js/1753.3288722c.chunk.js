"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[1753,5049,4729,758],{90758:function(e,t,s){s.r(t);var n=s(74165),a=s(15861),r=s(29439),l=s(72791),o=s(78983),c=s(84688),i=s(36167),u=s(80225),d=s(69018),x=s(57689),p=s(69835),h=s(94810),m=s(68631),f=s(80184);t.default=function(){var e="5836103512:AAFoXHwI8PsQ6_xeqcx0IawMbc7njLwJydQ",t="https://proj.uley.team",s="1775583141",g=(0,u.Z)().users,v=(0,u.Z)(),b=v.addNewMessage,j=v.setDistributions,y=(0,l.useState)([]),k=(0,r.Z)(y,2),Z=k[0],w=k[1],S=(0,l.useState)([]),I=(0,r.Z)(S,2),_=I[0],C=I[1],N=(0,l.useState)(""),F=(0,r.Z)(N,2),A=F[0],D=F[1],T=(0,l.useState)(0),O=(0,r.Z)(T,2),J=(O[0],O[1]),P=(0,l.useState)(!1),B=(0,r.Z)(P,2),E=B[0],L=B[1],M=(0,l.useState)(!1),Q=(0,r.Z)(M,2),q=Q[0],G=Q[1],H=(0,l.useState)(!1),K=(0,r.Z)(H,2),R=K[0],U=K[1],W=(0,l.useState)(""),X=(0,r.Z)(W,2),$=X[0],z=X[1],V=(0,l.useState)(),Y=(0,r.Z)(V,2),ee=Y[0],te=Y[1],se=(0,l.useState)(""),ne=(0,r.Z)(se,2),ae=ne[0],re=ne[1],le=(0,l.useState)(""),oe=(0,r.Z)(le,2),ce=oe[0],ie=oe[1],ue=new Audio(m),de=(0,x.s0)();(0,l.useEffect)((function(){var e=[];g.map((function(t){var s={label:t.name,value:t.chatId};e.push(s)})),w(e)}),[g]);(0,l.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ee){e.next=10;break}return console.log("file:",ee),(t=new FormData).append("name",ee.name),t.append("photo",ee),e.next=7,(0,h.cT)(t);case 7:s=e.sent,console.log("response: ",s.data.path),ie(s.data.path.split(".team")[1]);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[ee]);var xe=function(){var r=(0,a.Z)((0,n.Z)().mark((function r(){var l;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(_),ue.play(),l={name:"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0430",text:A,image:t+ce,button:$,receivers:JSON.stringify(_),datestart:Date.now(),delivered:"true"},console.log("message send button: ",l),r.next=6,(0,p.Gl)(l);case 6:_.map(function(){var r=(0,a.Z)((0,n.Z)().mark((function a(r,l){var o,c,i,u,x,m,f,v,y;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e ID: "+r.value+" \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 "+A+" \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e! \u041a\u043d\u043e\u043f\u043a\u0430 "+$+" \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430!"),o=g.filter((function(e){return e.chatId===r.value.toString()}))[0],c=JSON.stringify({inline_keyboard:[[{text:$,callback_data:"/report"}]]}),""===A){n.next=10;break}return u="https://api.telegram.org/bot".concat(e,"/sendMessage?chat_id=").concat(r.value,"&parse_mode=html&text=").concat(A.replace(/\n/g,"%0A")),console.log("url_send_msg: ",u),n.next=8,d.y_.get(u);case 8:i=n.sent,console.log("sendToTelegram: ",i);case 10:if(x="https://api.telegram.org/bot".concat(e,"/sendPhoto?chat_id=").concat(r.value,"&reply_markup=").concat(c),console.log("url_send_photo: ",x),!ee){n.next=19;break}return(f=new FormData).append("photo",ee),n.next=17,d.y_.post(x,f);case 17:m=n.sent,console.log("sendPhotoToTelegram: ",m);case 19:if(!R){n.next=26;break}return v={},v=ee?{senderId:s,receiverId:r.value,conversationId:o.conversationId,type:"image",text:t+ce,is_bot:!0,messageId:m.data.result.message_id,buttons:$}:{senderId:s,receiverId:r.value,conversationId:o.conversationId,type:"text",text:A,is_bot:!0,messageId:i.data.result.message_id,buttons:""},console.log("message send: ",v),n.next=25,(0,h.rW)(v);case 25:ee?b(r.value,t+ce,"image",$,o.conversationId,m.data.result.message_id):b(r.value,A,"text","",o.conversationId,i.data.result.message_id);case 26:return n.next=28,(0,p.$J)();case 28:y=n.sent,console.log("distribution new add: ",y.length),j(y);case 31:case"end":return n.stop()}}),a)})));return function(e,t){return r.apply(this,arguments)}}()),C([]),U(!1),D(""),G(!1),z(""),L(!0),re(""),de("/distribution");case 15:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return(0,f.jsxs)("div",{className:"dark-theme",children:[(0,f.jsx)(c.S8,{}),(0,f.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-uley",children:[(0,f.jsx)(c.tf,{}),(0,f.jsx)("div",{className:"body flex-grow-1 px-3",children:(0,f.jsx)(o.KB,{lg:!0,children:(0,f.jsx)(l.Suspense,{fallback:(0,f.jsx)(o.LQ,{color:"primary"}),children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h2",{children:"\u041d\u043e\u0432\u0430\u044f \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0430"}),(0,f.jsx)(o.rb,{children:(0,f.jsx)(o.b7,{xs:!0,children:(0,f.jsx)(o.xH,{className:"mb-4",children:(0,f.jsxs)(o.sl,{children:[(0,f.jsx)(o.Gc,{color:"success",dismissible:!0,visible:E,onClose:function(){return L(!1)},children:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e!"}),(0,f.jsxs)(o.lx,{children:[(0,f.jsxs)("div",{className:"mb-3",style:{color:"#f3f3f3"},children:[(0,f.jsx)(o.L8,{htmlFor:"exampleFormControlInput1",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u0435\u0439:"}),(0,f.jsx)(i.NU,{options:Z,value:_,onChange:C,style:{color:"#1e1919"},overrideStrings:{allItemsAreSelected:"\u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u0432\u044b\u0431\u0440\u0430\u043d\u044b",clearSearch:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043f\u043e\u0438\u0441\u043a",clearSelected:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u044b\u0431\u043e\u0440",noOptions:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",search:"\u041f\u043e\u0438\u0441\u043a",selectAll:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0451",selectAllFiltered:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0451 (\u041d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0445)",selectSomeItems:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c...",create:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}}),(0,f.jsxs)("p",{style:{color:"#767676"},children:["\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u0435\u0439: ",(0,f.jsx)("span",{children:_.length})]})]}),(0,f.jsx)("div",{className:"mb-3",style:{color:"#f3f3f3"},children:(0,f.jsx)(o.EC,{id:"flexCheckDefault",label:"\u0414\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0443",onChange:function(e){U(e.target.value)},defaultChecked:R})}),(0,f.jsx)("div",{className:"mb-3",children:(0,f.jsx)(o.PB,{id:"exampleFormControlTextarea1",rows:3,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",onChange:function(e){D(e.target.value),J(e.target.value.length)},value:A})}),(0,f.jsx)("div",{className:"mb-6",style:{color:"#8f8888"},children:(0,f.jsx)(o.jO,{type:"file",id:"formFile",label:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"photo",onChange:function(e){return function(e){te(e.target.files[0]),re(e.target.value)}(e)},value:ae})}),(0,f.jsx)("div",{className:"mb-3"}),(0,f.jsx)("div",{className:"mb-3 text-center",children:(0,f.jsxs)("p",{style:{color:"#fff",cursor:"pointer"},onClick:function(e){e.preventDefault(),G(!q)},children:[" ",q?"- \u0423\u0431\u0440\u0430\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0443":"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0443"]})}),(0,f.jsx)(o.lx,{className:"row g-3",style:{color:"#8f8888",display:q?"block":"none"},children:(0,f.jsx)(o.b7,{md:6,children:(0,f.jsx)(o.jO,{type:"text",id:"inputTextButton",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u043e\u043f\u043a\u0438",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442",onChange:function(e){z(e.target.value)},value:$})})}),(0,f.jsx)("br",{}),(0,f.jsxs)("div",{className:"mb-3",style:{textAlign:"right"},children:[(0,f.jsx)(o.u5,{color:"secondary",style:{marginRight:"15px"},onClick:function(){de("/distribution")},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,f.jsx)(o.u5,{color:"primary",onClick:xe,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0443"})]})]})]})})})})]})})})}),(0,f.jsx)(c.qh,{})]})]})}},68631:function(e,t,s){e.exports=s.p+"static/media/distribution_sound.77a858448f3b5ce5598d.mp3"}}]);
//# sourceMappingURL=1753.3288722c.chunk.js.map