"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[756],{71415:function(e,s,t){t.r(s),t.d(s,{default:function(){return b}});var r=t(4942),i=t(1413),n=t(74165),c=t(15861),a=t(29439),l=t(72791),d=t(11087),o=t(78983),x=t(84688),u=t(9936),h=t.p+"static/media/pencil.0ce7745fa668e89bedfc.png",j=t(80225),p=t(69835),m="MyModal_myModal__TPf3j",f="MyModal_myModalContent__fPXa-",N="MyModal_active__zFeON",v=t(80184),g=function(e){var s=e.children,t=e.visible,r=e.setVisible,i=[m];return t&&i.push(N),(0,v.jsx)("div",{className:i.join(" "),onClick:function(){return r(!1)},children:(0,v.jsx)("div",{className:f,onClick:function(e){return e.stopPropagation()},children:s})})};var y=t.p+"static/media/close.fd4d4a44373883e617072fe7cf0c201d.svg",b=function(){var e=(0,j.Z)(),s=e.distributionsWork,t=e.addNewDistrib,m=e.workers,f=(0,l.useState)([]),N=(0,a.Z)(f,2),b=N[0],w=N[1],S=(0,l.useState)([]),Z=(0,a.Z)(S,2),k=Z[0],C=Z[1],_=(0,l.useState)([]),I=(0,a.Z)(_,2),M=I[0],O=I[1],T=(0,l.useState)(!0),J=(0,a.Z)(T,2),D=J[0],L=J[1],R=(0,l.useState)(""),F=(0,a.Z)(R,2),P=F[0],V=(F[1],(0,l.useState)(1)),z=(0,a.Z)(V,2),E=(z[0],z[1],(0,l.useState)(!1)),H=(0,a.Z)(E,2),U=H[0],W=H[1],X=(0,l.useState)(""),K=(0,a.Z)(X,2),Q=K[0],Y=K[1],q=(0,l.useState)(0),A=(0,a.Z)(q,2),B=A[0],G=A[1],$=(0,l.useState)(0),ee=(0,a.Z)($,2),se=ee[0],te=ee[1],re=(0,l.useState)(0),ie=(0,a.Z)(re,2),ne=ie[0],ce=ie[1],ae=(0,l.useRef)(),le=(0,v.jsx)(o.oo,{autohide:!0,visible:!0,color:"success",className:"text-white align-items-center",children:(0,v.jsxs)("div",{className:"d-flex",children:[(0,v.jsx)(o.S3,{children:"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430!"}),(0,v.jsx)(o.Pv,{className:"me-2 m-auto",white:!0})]})});(0,l.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],s.map((function(e,s){var r=new Date(e.datestart),i=r.getFullYear(),n=String(r.getMonth()+1).padStart(2,"0"),c=String(r.getDate()).padStart(2,"0"),a=r.getHours(),l=String(r.getMinutes()).padStart(2,"0"),d="".concat(c,".").concat(n,".").concat(i),o="".concat(a,":").concat(l),x=e.delivered,u={id:e.id,text:e.text,image:""!==e.image?e.image:"",project:e.project,projectId:e.projectId?e.projectId:"",receivers:e.receivers.replace(/,/gi,"<br/>"),categories:e.receivers,count:e.count,datestart:d,timestart:o,status:x?"\u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e":"\u0437\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e",uuid:e.uuid,success:e.success,report:e.report,delivered:x};t.push(u)})),w(t),L(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[s]),(0,l.useEffect)((function(){var e=setInterval((function(){t(!0)}),1e4);return function(){return clearInterval(e)}}));var de=function(){var e=(0,c.Z)((0,n.Z)().mark((function e(s){var t,c,a,l,d,o,x,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce(le),w(b.filter((function(e){return e.id!==s.id}))),e.next=4,(0,p.YW)(s.id);case 4:return e.next=6,(0,p.Wh)(s.datestart);case 6:return c=e.sent,a=JSON.parse(c.times),l=a.findIndex((function(e){return e.time===s.timestart})),d=JSON.parse(JSON.stringify(a)),o=d[l],d[l]=(0,i.Z)((0,i.Z)({},o),{},(t={},(0,r.Z)(t,"proj",""),(0,r.Z)(t,"save",!1),t)),x=JSON.stringify(d),u={datestart:s.datestart,times:x},e.next=16,(0,p.A0)(u);case 16:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){console.log("users: ",M);var e=M.filter((function(e){var s;return null===(s=e.userfamily+e.username+e.user)||void 0===s?void 0:s.toLowerCase().includes(Q.toLowerCase())}));C(e)}),[Q,M]),(0,v.jsxs)("div",{className:"dark-theme",children:[(0,v.jsx)(x.S8,{}),(0,v.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-uley",children:[(0,v.jsx)(x.tf,{}),(0,v.jsx)("div",{className:"body flex-grow-1 px-3",children:(0,v.jsx)(o.KB,{lg:!0,children:(0,v.jsx)(l.Suspense,{fallback:(0,v.jsx)(o.LQ,{color:"primary"}),children:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h2",{children:"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0438"}),(0,v.jsx)(d.rU,{to:"/distributionw_add",children:(0,v.jsx)(o.u5,{color:"primary",size:"lg",children:"\u041d\u043e\u0432\u0430\u044f \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0430"})}),(0,v.jsx)(o.KF,{ref:ae,push:ne,placement:"top-end"}),(0,v.jsx)("br",{}),(0,v.jsx)("br",{}),(0,v.jsx)(o.rb,{children:(0,v.jsxs)(o.b7,{xs:!0,children:[(0,v.jsxs)(o.xH,{className:"mb-4",children:[(0,v.jsx)(o.bn,{children:"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0438 \u0434\u043b\u044f \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u043e\u0432"}),(0,v.jsxs)(o.sl,{children:[(0,v.jsx)("br",{}),D?(0,v.jsx)(o.LQ,{}):(0,v.jsxs)(o.Sx,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[(0,v.jsx)(o.V,{className:"table-dark",children:(0,v.jsxs)(o.T6,{children:[(0,v.jsx)(o.is,{className:"text-center",children:"\u0414\u0430\u0442\u0430"}),(0,v.jsx)(o.is,{className:"text-center",children:"\u0412\u0440\u0435\u043c\u044f"}),(0,v.jsx)(o.is,{className:"text-center",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"}),(0,v.jsx)(o.is,{className:"text-center",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,v.jsx)(o.is,{className:"text-center",children:"\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u0438"}),(0,v.jsx)(o.is,{className:"text-center",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,v.jsx)(o.is,{className:"text-center",children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435"})]})}),(0,v.jsx)(o.NR,{children:b.map((function(e,s){return(0,v.jsxs)(o.T6,{"v-for":"item in tableItems",style:{height:"130px"},children:[(0,v.jsx)(o.NN,{className:"text-center",style:{width:"50px"},children:(0,v.jsx)("div",{children:e.datestart})}),(0,v.jsx)(o.NN,{className:"text-center",style:{width:"50px"},children:(0,v.jsx)("div",{children:e.timestart})}),(0,v.jsx)(o.NN,{className:"text-center",children:(0,v.jsx)("div",{children:e.project})}),(0,v.jsx)(o.NN,{className:"text-center",children:(0,v.jsx)("div",{dangerouslySetInnerHTML:{__html:e.receivers}})}),(0,v.jsx)(o.NN,{className:"text-center",onClick:function(){return function(e){console.log(m),W(!0);var s=0,t=0,r=[];JSON.parse(e).map((function(e,i){200===e.status?s++:t++;var n=m.find((function(s){return s.chatId===e.user})),c={user:e.user,status:e.status,userfamily:n.userfamily,username:n.username,categories:n.worklist};r.push(c)})),G(s),te(t),C(r),O(r)}(e.report)},style:{cursor:"pointer"},children:"\u0437\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e"===e.status?(0,v.jsx)("div",{style:{color:"#3887cd"},children:e.count}):(0,v.jsxs)("div",{children:[e.count," | ",e.success?e.success:"0"]})}),(0,v.jsx)(o.NN,{className:"text-center",children:"\u0437\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e"===e.status?(0,v.jsx)("div",{style:{color:"#3887cd"},children:e.status}):(0,v.jsx)("div",{style:{color:"#f5f114"},children:e.status})}),(0,v.jsxs)(o.NN,{className:"text-center",children:[e.projectId?(0,v.jsx)(d.rU,{to:"/distributionw_add",state:{editD:!0,delivered:e.delivered,project:e.projectId,id:e.id,category:e.categories,img:e.image,date:e.datestart,uuid:e.uuid},children:(0,v.jsx)(o.u5,{color:"light",style:{marginRight:"10px"},children:(0,v.jsx)("img",{src:h,alt:"",width:"10px"})})}):(0,v.jsx)(d.rU,{to:"",state:{project:"".concat(P)},children:(0,v.jsx)(o.u5,{color:"light",style:{marginRight:"10px"},children:(0,v.jsx)("img",{src:h,alt:"",width:"10px"})})}),(0,v.jsx)(o.u5,{color:"light",onClick:function(){return de(e)},children:(0,v.jsx)("img",{src:u,alt:"",width:"10px"})})]})]},s)}))})]})]})]}),(0,v.jsxs)(g,{alignment:"center",visible:U,setVisible:W,onClose:function(){return W(!1)},children:[(0,v.jsx)("div",{style:{paddingTop:"25px"},children:(0,v.jsxs)(o.rb,{className:"mb-3",children:[(0,v.jsx)(o.b7,{sm:9,children:(0,v.jsx)("h3",{children:"\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u0438"})}),(0,v.jsx)(o.b7,{sm:3,children:(0,v.jsx)(o.jO,{placeholder:"\u041f\u043e\u0438\u0441\u043a...",onChange:function(e){return Y(e.target.value)},"aria-label":"spec"})})]})}),(0,v.jsx)("img",{onClick:function(){return W(!1)},src:y,alt:"",style:{position:"absolute",right:"20px",top:"20px",width:"15px"}}),(0,v.jsxs)(o.sl,{children:[(0,v.jsxs)("p",{style:{display:"flex",justifyContent:"space-between"},children:[(0,v.jsxs)("span",{children:["\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0430: ",B+se]})," ",(0,v.jsxs)("span",{children:["\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e: ",B]})," ",(0,v.jsxs)("span",{children:[" \u041d\u0435 \u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e: ",se]})]}),(0,v.jsxs)("div",{className:"scroll-table",children:[(0,v.jsx)(o.Sx,{align:"middle",className:"mb-0",responsive:!0,style:{color:"#ffffff"},children:(0,v.jsx)(o.V,{className:"table-dark",children:(0,v.jsxs)(o.T6,{children:[(0,v.jsx)(o.is,{scope:"col",style:{width:"45px"},children:"\u2116"}),(0,v.jsx)(o.is,{scope:"col",style:{width:"110px"},children:"TelegramID"}),(0,v.jsx)(o.is,{scope:"col",style:{width:"170px"},children:"\u0424\u0418\u041e"}),(0,v.jsx)(o.is,{scope:"col",style:{width:"180px"},children:"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c"}),(0,v.jsx)(o.is,{scope:"col",style:{width:"100px"},children:"\u0421\u0442\u0430\u0442\u0443\u0441"})]})})}),(0,v.jsx)("div",{className:"scroll-table-body",style:{height:"300px",overflowX:"auto"},children:(0,v.jsx)(o.Sx,{children:(0,v.jsx)(o.NR,{style:{height:"300px",overflowX:"auto"},children:k.map((function(e,s){return(0,v.jsxs)(o.T6,{children:[(0,v.jsx)(o.is,{style:{width:"45px"},scope:"row",children:s<9?"0"+(s+1):s+1}),(0,v.jsx)(o.NN,{style:{width:"110px"},children:e.user}),(0,v.jsxs)(o.NN,{style:{width:"170px"},children:[e.userfamily," ",e.username]}),(0,v.jsx)(o.NN,{style:{fontSize:"11px",width:"180px"},children:(0,v.jsx)("table",{children:""!==e.categories?JSON.parse(e.categories).map((function(e,s){return(0,v.jsx)("tr",{children:(0,v.jsx)("td",{children:""!==e.spec?"- "+e.spec:""})},s)})):""})}),(0,v.jsx)(o.NN,{className:"text-center",style:{width:"100px",color:200===e.status?"#7070e7":"red"},children:200===e.status?"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043e":"\u041d\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e"})]},s+1)}))})})})]})]})]})]})})]})})})}),(0,v.jsx)(x.qh,{})]})]})}},9936:function(e,s,t){e.exports=t.p+"static/media/delete.196e3a0746aa2189534d.png"}}]);
//# sourceMappingURL=756.0344e064.chunk.js.map