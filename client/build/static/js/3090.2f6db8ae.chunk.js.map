{"version":3,"file":"static/js/3090.2f6db8ae.chunk.js","mappings":"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","sources":["webpack://client/./src/components/MyModal/MyModal.module.css?67e6","components/MyModal/MyModal.jsx","assets/images/close.svg","pages/DistributionW.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"myModal\":\"MyModal_myModal__TPf3j\",\"showModal\":\"MyModal_showModal__+Dcvr\",\"myModalContent\":\"MyModal_myModalContent__fPXa-\",\"active\":\"MyModal_active__zFeON\"};","import React from 'react';\r\nimport cl from './MyModal.module.css';\r\n\r\nconst MyModal = ({children, visible, setVisible}) => {\r\n\r\n    const rootClasses = [cl.myModal]\r\n\r\n    if (visible) {\r\n        rootClasses.push(cl.active);\r\n    }\r\n\r\n    return (\r\n        <div className={rootClasses.join(' ')} onClick={() => setVisible(false)}>\r\n            <div className={cl.myModalContent} onClick={(e) => e.stopPropagation()}>\r\n                {children}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MyModal;","var _path;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgClose(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.62399 10.0556L2.35384 15.3257L0.0294979 13.0014L5.29965 7.73122L0.00463867 2.4362L2.44084 0L7.73586 5.29501L12.9936 0.0372888L15.3179 2.36163L10.0602 7.61935L15.3676 12.9268L12.9314 15.363L7.62399 10.0556Z\",\n    fill: \"#E8F1F9\"\n  })));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgClose);\nexport default __webpack_public_path__ + \"static/media/close.fd4d4a44373883e617072fe7cf0c201d.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Suspense, useState, useEffect, useRef } from 'react'\nimport { Link } from 'react-router-dom'\nimport { \n  CContainer, \n  CSpinner, \n  CButton, \n  CTable, \n  CTableRow, \n  CTableHead,\n  CTableHeaderCell,\n  CTableBody,\n  CTableDataCell,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCol,\n  CRow,\n  CToast,\n  CToastBody,\n  CToaster,\n  CToastClose,\n  CModal,\n  CModalHeader,\n  CModalTitle,\n  CModalBody,\n  CModalFooter,\n  CFormInput\n} from '@coreui/react'\nimport { AppSidebar, AppFooter, AppHeader } from '../components/index'\n\nimport deleteIcon from 'src/assets/images/delete.png'\nimport editIcon from 'src/assets/images/pencil.png'\nimport { useUsersContext } from \"../chat-app-new/context/usersContext\";\nimport { delDistributionW, getPlan, newPlan } from 'src/http/adminAPI';\n\nimport MyModal from \"../components/MyModal/MyModal\";\nimport Close from \"../assets/images/close.svg\"\n\nconst DistributionW = () => {\n  const { distributionsWork: messages, addNewDistrib, workers } = useUsersContext();\n  const [distributionsWork, setDistributionsWork]= useState([]);\n  const [userReceivers, setUserReceivers]= useState([]);\n  const [users, setUsers]= useState([]);\n  const [loading, setLoading]= useState(true);\n  const [proj, setProj] = useState('');\n  const [seconds, setSeconds] = useState(1);\n\n  const [visibleModal, setVisibleModal] = useState(false);\n\n  const [text, setText]= useState(\"\");\n\n  const [count, setCount] = useState(0)\n  const [count2, setCount2] = useState(0)\n\n  const [toast, addToast] = useState(0)\n  const toaster = useRef()\n\n  const exampleToast = (\n    <CToast autohide={true} visible={true} color=\"success\" className=\"text-white align-items-center\">\n      <div className=\"d-flex\">\n        <CToastBody>Рассылка успешно удалена!</CToastBody>\n        <CToastClose className=\"me-2 m-auto\" white />\n      </div>\n    </CToast>\n  )\n\n  //get Distribution\n  useEffect(() => {\n    const fetchData = async () => {\n\n      const arrDitributions = []\n      messages.map((distrib, index) => {\n        const d = new Date(distrib.datestart);\n\t\t\t\tconst year = d.getFullYear();\n\t\t\t\tconst month = String(d.getMonth()+1).padStart(2, \"0\");\n\t\t\t\tconst day = String(d.getDate()).padStart(2, \"0\");\n\t\t\t\tconst chas = d.getHours();\n\t\t\t\tconst minut = String(d.getMinutes()).padStart(2, \"0\");\n\t\t\t\tconst newDateMessage = `${day}.${month}.${year}`\n        const newTimeMessage = `${chas}:${minut}`\n\n        let space = /,/gi;\n\n        const newDistribution = {\n          id: distrib.id,\n          text: distrib.text,\n          image: distrib.image !=='' ? distrib.image : '',\n          project: distrib.project,\n          projectId: distrib.projectId ? distrib.projectId : '',\n          receivers: distrib.receivers.replace(space, '<br/>'), //strReceivers,//JSON.parse(distrib.receivers)[index-1].label,\n          categories: distrib.receivers,\n          count: distrib.count,\n          datestart: newDateMessage,\n          timestart: newTimeMessage,\n          status: distrib.delivered ? \"отправлено\" : \"запланировано\",\n          uuid: distrib.uuid,\n          success: distrib.success,\n          report: distrib.report,\n\t\t\t\t}\n        arrDitributions.push(newDistribution)\n      })\n\n      //console.log(\"arrDitributions: \", arrDitributions)\n\n      setDistributionsWork(arrDitributions) \n      setLoading(false)\n    }\n\n    fetchData();\n    \n  },[messages])\n\n  //обновление списка рассылок\n  useEffect(() => {\n    const timer = setInterval(() => {\n      //setSeconds(seconds => seconds + 5);\n      addNewDistrib(true)\n    }, 10000);\n    \n    // очистка интервала\n    return () => clearInterval(timer);\n  });\n\n  {/* Удаление рассылки */}\n  const removeDescription = async(desk) => {\n    addToast(exampleToast) //ваша рассылка удалена\n    \n    setDistributionsWork(distributionsWork.filter(p => p.id !== desk.id))\n    \n    //удаление сообщения в базе данных\n    await delDistributionW(desk.id)  \n\n    //удаление проекта из планировщика\n    //обновить план в БД\n    let plan = await getPlan(desk.datestart);\n    const newArray = JSON.parse(plan.times)\n\n    let dateIndex = newArray.findIndex((i) => i.time === desk.timestart)\n    const datesCopy = JSON.parse(JSON.stringify(newArray));\n    const dateObject = datesCopy[dateIndex];\n    datesCopy[dateIndex] = { ...dateObject, ['proj']: '', ['save']: false};\n    let planer_str = JSON.stringify(datesCopy)\n\n    const newObj = {\n      \"datestart\": desk.datestart,\n      \"times\": planer_str\n    }\n\n    await newPlan(newObj)\n  }\n\n  const showReceivers = (users) => {\n    console.log(workers)\n\n    setVisibleModal(true)\n    let count = 0\n    let count2 = 0\n    let arrReceiver = []\n    JSON.parse(users).map((item, index)=> {\n      if (item.status === 200) {\n        count++\n      } else {\n        count2++\n      }\n      const worker = workers.find((i)=> i.chatId === item.user)\n      const obj = {\n        user: item.user,\n        status: item.status,\n        userfamily: worker.userfamily,\n        username: worker.username,\n        categories: worker.worklist,\n      }\n      arrReceiver.push(obj)\n    })\n    setCount(count)\n    setCount2(count2)\n    setUserReceivers(arrReceiver)\n    setUsers(arrReceiver)\n    //console.log(JSON.stringify(users))\n  }\n\n\n  //поиск\n  useEffect(() => {\n    console.log(\"users: \", users)\n\t\tconst filteredData = users.filter(user=> (user.userfamily+user.username+user.user)?.toLowerCase().includes(text.toLowerCase()));\n    setUserReceivers(filteredData);      \n  }, [text, users]);\n\n\n  return (\n    <div className='dark-theme'>\n      <AppSidebar />\n      <div className=\"wrapper d-flex flex-column min-vh-100 bg-uley\">\n        <AppHeader />\n        <div className=\"body flex-grow-1 px-3\">\n\n            <CContainer lg>\n                <Suspense fallback={<CSpinner color=\"primary\" />}>\n                  <>\n                    <h2>Рассылки</h2>\n                      <Link to={'/distributionw_add'}><CButton color=\"primary\" size=\"lg\" >Новая рассылка</CButton></Link>\n                      <CToaster ref={toaster} push={toast} placement=\"top-end\" /> \n                      <br />\n                      <br />\n                      <CRow>\n                        <CCol xs>\n                          <CCard className=\"mb-4\">\n                            <CCardHeader>Рассылки для специалистов</CCardHeader>\n                            <CCardBody>\n                              <br /> \n\n                            {loading ? \n                                  \n                              <CSpinner/> :\n\n                              <CTable align=\"middle\" className=\"mb-0 border\" hover responsive>\n                                <CTableHead className='table-dark'>\n                                  <CTableRow>\n                                    <CTableHeaderCell className=\"text-center\">Дата</CTableHeaderCell>\n                                    <CTableHeaderCell className=\"text-center\">Время</CTableHeaderCell>\n                                    <CTableHeaderCell className=\"text-center\">Название проекта</CTableHeaderCell>\n                                    {/* <CTableHeaderCell className=\"text-center\">Картинка</CTableHeaderCell> */}\n                                    <CTableHeaderCell className=\"text-center\">Категория</CTableHeaderCell> \n                                    <CTableHeaderCell className=\"text-center\">Получатели</CTableHeaderCell>    \n                                    <CTableHeaderCell className=\"text-center\">Статус</CTableHeaderCell>\n                                    <CTableHeaderCell className=\"text-center\">Управление</CTableHeaderCell>\n                                  </CTableRow>\n                                </CTableHead>\n                                <CTableBody>\n                                  {distributionsWork.map((item, index) => (\n                                    <CTableRow v-for=\"item in tableItems\" key={index} style={{height: '130px'}}>\n                                      {/* <CTableDataCell>\n                                        <div>{index+1}</div>\n                                      </CTableDataCell> */}\n                                      <CTableDataCell className=\"text-center\" style={{width: '50px'}}>\n                                        <div>{item.datestart}</div>\n                                      </CTableDataCell>  \n                                      <CTableDataCell className=\"text-center\" style={{width: '50px'}}>\n                                        <div>{item.timestart}</div>\n                                      </CTableDataCell>  \n                                      <CTableDataCell className=\"text-center\">\n                                        <div>{item.project}</div>\n                                      </CTableDataCell>    \n                                      {/* <CTableDataCell className=\"text-center\">\n                                        {item.image.endsWith('.pdf') ?\n                                        <iframe src={item.image} height=\"120px\" width=\"200px\" title=\"myFramePdf\"/>\n                                        : <div>{item.image ? <a href={item.image} target='_blank' rel=\"noreferrer\"><img src={item.image} alt='' width={230} height={120} style={{objectFit: 'contain'}}></img></a> : ''}</div>\n                                        }\n                                      </CTableDataCell> */}\n                                      <CTableDataCell className=\"text-center\">\n                                        <div dangerouslySetInnerHTML={{__html: item.receivers}} />\n                                      </CTableDataCell>\n                                      <CTableDataCell className=\"text-center\" onClick={()=>showReceivers(item.report)} style={{cursor: 'pointer'}}>\n                                        {\n                                          item.status === 'запланировано' ? \n                                          <div style={{color: '#3887cd'}}>{item.count}</div>\n                                          :<div>{item.count} | {item.success ? item.success : \"0\"}</div>\n                                        }\n                                      </CTableDataCell>\n                                      <CTableDataCell className=\"text-center\">\n                                        {\n                                          item.status === 'запланировано' ? \n                                          <div style={{color: '#3887cd'}}>{item.status}</div>\n                                          :<div style={{color: '#f5f114'}}>{item.status}</div>\n                                        }\n                                      </CTableDataCell>\n                                      <CTableDataCell className=\"text-center\">\n                                        {/* <Link to={'/distributionw_planer'} state={{ project: proj}}>\n                                          <CButton color=\"light\" style={{marginRight: '10px'}}>\n                                            <img src={editIcon} alt='' width='10px' />\n                                          </CButton>\n                                        </Link> */}\n\n                                        {item.projectId ? \n                                          <Link to={'/distributionw_add'} state={{ project: item.projectId, id: item.id, category: item.categories, img: item.image, date: item.datestart, uuid: item.uuid}}><CButton color=\"light\" style={{marginRight: '10px'}}><img src={editIcon} alt='' width='10px' /></CButton></Link>\n                                          :<Link to={''} state={{ project: `${proj}`, }}><CButton color=\"light\" style={{marginRight: '10px'}}><img src={editIcon} alt='' width='10px' /></CButton></Link>\n                                        }\n                                        \n                                        <CButton color=\"light\" onClick={() => removeDescription(item)}>\n                                          <img src={deleteIcon} alt='' width='10px' />\n                                        </CButton>\n\n                                      </CTableDataCell>\n                                    </CTableRow>\n                                  ))}\n                                </CTableBody>\n                              </CTable>\n                            }                              \n                            </CCardBody>\n                          </CCard>\n\n                                        <MyModal alignment=\"center\" visible={visibleModal} setVisible={setVisibleModal} onClose={() => setVisibleModal(false)}>\n                                          {/* <CModalHeader>\n                                            <CModalTitle>Получатели рассылки</CModalTitle>\n                                          </CModalHeader> */}\n                                          <div style={{paddingTop: '25px'}}>\n                                            <CRow className=\"mb-3\" >\n                                              <CCol sm={9} >\n                                                <h3>Получатели</h3>\n                                              </CCol>\n                                              <CCol sm={3} >\n                                                <CFormInput placeholder=\"Поиск...\" onChange={(e)=>setText(e.target.value)} aria-label=\"spec\"/>\n                                              </CCol>\n                                            </CRow>\n                                          </div>\n                                          \n                                          <img onClick={()=>setVisibleModal(false)} src={Close} alt='' style={{position: 'absolute', right: '20px', top: '20px', width: '15px'}}/>\n                                          <CCardBody>\n\n                                          {/* Рассылка: 800 | Доставлен: 600 | Не доставлено: 200  */}\n                                          <p style={{display: 'flex', justifyContent: 'space-between'}}><span>Рассылка: {count+count2}</span> <span>Доставлено: {count}</span> <span> Не доставлено: {count2}</span></p>  \n\n                                            <div className=\"scroll-table\">\n                                              <CTable align=\"middle\" className=\"mb-0\" responsive style={{color: '#ffffff'}}>\n                                                <CTableHead className='table-dark'>\n                                                  <CTableRow>\n                                                    <CTableHeaderCell scope=\"col\" style={{width: '45px'}}>№</CTableHeaderCell>\n                                                    <CTableHeaderCell scope=\"col\"style={{width: '110px'}}>TelegramID</CTableHeaderCell>\n                                                    <CTableHeaderCell scope=\"col\" style={{width: '170px'}}>ФИО</CTableHeaderCell>\n                                                    <CTableHeaderCell scope=\"col\" style={{width: '180px'}}>Специальность</CTableHeaderCell>\n                                                    <CTableHeaderCell scope=\"col\" style={{width: '100px'}}>Статус</CTableHeaderCell>\n                                                  </CTableRow>\n                                                </CTableHead>\n                                              </CTable>\t\n                                              <div className=\"scroll-table-body\" style={{height: '300px', overflowX: 'auto'}}>\n                                                <CTable>\n                                                  <CTableBody style={{height: '300px', overflowX: 'auto'}}>\n                                                  {userReceivers.map((item, index) => (\n                                                    <CTableRow key={index+1}>\n                                                      <CTableHeaderCell style={{width: '45px'}} scope=\"row\">{index < 9 ? '0'+(index+1) : index+1}</CTableHeaderCell>\n                                                      <CTableDataCell style={{width: '110px'}}>{item.user}</CTableDataCell>\n                                                      <CTableDataCell style={{width: '170px'}}>{item.userfamily} {item.username}</CTableDataCell>\n                                                      <CTableDataCell style={{fontSize: '11px', width: '180px'}}>\n                                                        {/* {JSON.parse(item.categories).map(it=>\"- \"+it.spec).join('\\n')} */}\n                                                        <table>\n                                                          {item.categories !== '' ? (JSON.parse(item.categories)).map((spec, index)=>( \n                                                              <tr key={index}>\n                                                                <td>{spec.spec !== '' ? \"- \" + spec.spec : ''}</td>\n                                                              </tr>          \n                                                          )) : \"\"}\n                                                        </table>\n                                                      </CTableDataCell>\n                                                      <CTableDataCell className='text-center' style={{width: '100px', color: item.status === 200 ? '#7070e7' : 'red'}}>{item.status === 200 ? \"Получено\" : \"Не получено\"}</CTableDataCell>\n                                                    </CTableRow> \n                                                  ))\n                                                  }   \n                                                  </CTableBody>\n                                                </CTable>\n                                              </div>\t\n                                            </div>\n\n                                            {/* <p style={{display: 'flex', justifyContent: 'space-between'}}><span>Получено: {count}</span> <span>Не получено: {count2}</span></p>   */}\n                                          </CCardBody> \n                                          \n                                        </MyModal>\n                        </CCol>\n                      </CRow>\n                  </>\n                </Suspense>\n            </CContainer>\n\n        </div>\n        <AppFooter />\n      </div>\n    </div>\n  )\n}\n\nexport default DistributionW\n"],"names":["children","visible","setVisible","rootClasses","cl","push","className","join","onClick","e","stopPropagation","useUsersContext","messages","distributionsWork","addNewDistrib","workers","useState","setDistributionsWork","userReceivers","setUserReceivers","users","setUsers","loading","setLoading","proj","visibleModal","setVisibleModal","text","setText","count","setCount","count2","setCount2","toast","addToast","toaster","useRef","exampleToast","autohide","color","white","useEffect","fetchData","arrDitributions","map","distrib","index","d","Date","datestart","year","getFullYear","month","String","getMonth","padStart","day","getDate","chas","getHours","minut","getMinutes","newDateMessage","newTimeMessage","newDistribution","id","image","project","projectId","receivers","replace","categories","timestart","status","delivered","uuid","success","report","timer","setInterval","clearInterval","removeDescription","desk","filter","p","delDistributionW","getPlan","plan","newArray","JSON","parse","times","dateIndex","findIndex","i","time","datesCopy","stringify","dateObject","planer_str","newObj","newPlan","console","log","filteredData","user","userfamily","username","toLowerCase","includes","lg","Suspense","fallback","to","size","ref","placement","xs","align","hover","responsive","item","style","height","width","dangerouslySetInnerHTML","__html","arrReceiver","worker","find","chatId","obj","worklist","showReceivers","cursor","state","category","img","date","marginRight","src","editIcon","alt","deleteIcon","alignment","onClose","paddingTop","sm","placeholder","onChange","target","value","Close","position","right","top","display","justifyContent","scope","overflowX","fontSize","spec"],"sourceRoot":""}